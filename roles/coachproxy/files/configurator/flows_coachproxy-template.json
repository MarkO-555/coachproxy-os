[{"id":"de0536ab.6a9728","type":"tab","label":"Main"},{"id":"2f811349.94c06c","type":"tab","label":"Notify / System"},{"id":"60515b24.49bab4","type":"tab","label":"Logic","disabled":false,"info":""},{"id":"3c3d44e8.9e19ac","type":"tab","label":"Configuration","disabled":false,"info":""},{"id":"eb2b4fb3.4113e","type":"mqtt-broker","z":"","name":"","broker":"coachproxyos","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"c31d6ea2.af377","type":"ui_tab","z":"","name":"BMV","icon":"dashboard","disabled":false,"hidden":false},{"id":"98007e4.0a8078","type":"ui_group","z":"","name":"Status","tab":"c31d6ea2.af377","disp":true,"width":"6","collapse":false},{"id":"a459c88d.e477e8","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"ff703384.1f35d","type":"ui_group","z":"","name":"History","tab":"c31d6ea2.af377","order":2,"disp":true,"width":"12","collapse":false},{"id":"1423b707.4df2c9","type":"ui_group","z":"","name":"MiFlora","tab":"","order":2,"disp":true,"width":"6"},{"id":"efd704b.4ec05f8","type":"ui_group","z":"","name":"Report","tab":"","order":2,"disp":true,"width":"18"},{"id":"c55c79bf.400ab8","type":"ui_group","z":"","name":"Selection","tab":"","order":1,"disp":true,"width":"5"},{"id":"47079c76.b9c644","type":"ui_tab","z":"","name":"Temps","icon":"dashboard","order":2,"disabled":false,"hidden":false},{"id":"60492991.0a9d58","type":"ui_group","z":"","name":"Default","tab":"47079c76.b9c644","disp":true,"width":10,"collapse":false},{"id":"2697892c.100ca6","type":"sqlitedb","z":"","db":"/home/pi/sqlite/nodered"},{"id":"ddc18775.364138","type":"ui_group","z":"","name":"MiFlora","tab":"","order":2,"disp":true,"width":"6"},{"id":"9d8da0ce.1a187","type":"ui_group","z":"","name":"Report","tab":"","order":2,"disp":true,"width":"18"},{"id":"9ca20fba.3f6df","type":"ui_group","z":"","name":"Selection","tab":"","order":1,"disp":true,"width":"5"},{"id":"8da078e1.d118f8","type":"mqtt-broker","z":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"verifyservercert":true,"compatmode":true,"keepalive":"15","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"true","birthPayload":"","willTopic":"","willQos":"0","willRetain":"true","willPayload":""},{"id":"e87b7ba9.b74318","type":"ui_group","z":"","name":"System Information","tab":"e8dbc886.589ba8","order":1,"disp":true,"width":"6","collapse":false},{"id":"3bcfacd.cbd9a54","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#169dd3","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"default":"#4B7930","baseColor":"#3d89be","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#0094ce","value":"#0094ce","edited":false},"page-titlebar-backgroundColor":{"value":"#3d89be","edited":true},"page-backgroundColor":{"value":"#e8e8e8","edited":true},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#3d89be","edited":true},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#3d89be","edited":true},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"CoachProxy","hideToolbar":"false","allowSwipe":"false","dateFormat":"YYYY/MM/DD","sizes":{"sx":46,"sy":48,"gx":14,"gy":14,"cx":6,"cy":6,"px":4,"py":6}}},{"id":"c366de51.7eeec","type":"ui_group","z":"","name":"Coach Selection","tab":"f75a5bb2.b1e4d8","order":1,"disp":true,"width":"6","collapse":false},{"id":"89700e93.cb249","type":"ui_group","z":"","name":"Coach Options","tab":"f75a5bb2.b1e4d8","order":2,"disp":true,"width":"6","collapse":false},{"id":"72afae72.00078","type":"ui_group","z":"","name":"Save and Install","tab":"f75a5bb2.b1e4d8","order":4,"disp":true,"width":"6","collapse":false},{"id":"5ca17d4f.a09f34","type":"sqlitedb","z":"","db":"/coachproxy/node-red/coachproxy.sqlite"},{"id":"f75a5bb2.b1e4d8","type":"ui_tab","z":"","name":"Configuration","icon":"dashboard","order":9},{"id":"e8dbc886.589ba8","type":"ui_tab","z":"","name":"System","icon":"settings","order":8},{"id":"c0ec7986.09f2e8","type":"ui_group","z":"","name":"General Shades","tab":"e561f958.083068","order":1,"disp":true,"width":"6","collapse":false},{"id":"c06e884.2813978","type":"ui_group","z":"","name":"Main Shades","tab":"e561f958.083068","order":3,"disp":true,"width":"6","collapse":false},{"id":"94ba14b1.0d0d68","type":"ui_group","z":"","name":"Locks","tab":"7d6f4df0.4c39c4","order":2,"disp":true,"width":"6"},{"id":"a9150e63.aa674","type":"ui_group","z":"","name":"Readings","tab":"217d327e.d7e02e","order":1,"disp":true,"width":"6","collapse":false},{"id":"fff7b384.b177a","type":"ui_group","name":"Generator","tab":null,"order":3,"disp":true,"width":6},{"id":"d00cc30e.0c9e8","type":"ui_group","z":"","name":"General","tab":"c9e7e4a4.085018","order":12,"disp":true,"width":"6","collapse":false},{"id":"a3e4cd18.9b6fe","type":"ui_group","z":"","name":"Network Information","tab":"e8dbc886.589ba8","order":2,"disp":true,"width":"6"},{"id":"98fb63d6.8dacd","type":"ui_group","z":"","name":"Awnings","tab":"7d6f4df0.4c39c4","order":6,"disp":true,"width":"6","collapse":false},{"id":"69b2b8a5.f064c8","type":"ui_group","z":"","name":"Temperatures","tab":"7d6f4df0.4c39c4","order":4,"disp":true,"width":"6"},{"id":"cb039874.c973d8","type":"ui_group","z":"","name":"Closet","tab":"c9e7e4a4.085018","order":11,"disp":true,"width":"6","collapse":false},{"id":"b310dc23.904a5","type":"ui_group","z":"","name":"Bedroom Shades","tab":"e561f958.083068","order":5,"disp":true,"width":"6","collapse":false},{"id":"c644e97c.e8dd28","type":"ui_group","z":"","name":"Cockpit Shades","tab":"e561f958.083068","order":2,"disp":true,"width":"6","collapse":false},{"id":"c48d1f63.ed942","type":"ui_group","z":"","name":"TV Lift","tab":"c9e7e4a4.085018","order":7,"disp":true,"width":"6","collapse":false},{"id":"ddc847be.259998","type":"ui_group","z":"","name":"Power","tab":"c9e7e4a4.085018","order":2,"disp":true,"width":"6","collapse":false},{"id":"62386ef7.983d","type":"ui_group","z":"","name":"Presets","tab":"6143bc57.661564","order":1,"disp":true,"width":"6","collapse":false},{"id":"28185b30.a842a4","type":"ui_group","z":"","name":"Save Presets","tab":"6143bc57.661564","order":2,"disp":true,"width":"6","collapse":false},{"id":"6143bc57.661564","type":"ui_tab","z":"","name":"Presets","icon":"favorite","order":5},{"id":"779a467e.0b7118","type":"ui_group","z":"","name":"New Remote Access","tab":"e8dbc886.589ba8","order":3,"disp":true,"width":"6","collapse":false},{"id":"5020628.b2ece9c","type":"ui_group","z":"","name":"Galley","tab":"c9e7e4a4.085018","order":5,"disp":true,"width":"6","collapse":false},{"id":"143ecece.3930e1","type":"ui_group","z":"","name":"Hall","tab":"c9e7e4a4.085018","order":6,"disp":true,"width":"6","collapse":false},{"id":"a477c56a.f19268","type":"ui_group","z":"","name":"Thermostats","tab":"6fea254d.298cac","order":3,"disp":true,"width":"6","collapse":false},{"id":"1ebcf35e.cc84ed","type":"ui_group","z":"","name":"Alexa Commands","tab":"e8dbc886.589ba8","order":5,"disp":true,"width":"6","collapse":false},{"id":"7f1e058c.2bbfac","type":"ui_group","z":"","name":"Restart Alexa Integration","tab":"e8dbc886.589ba8","order":4,"disp":true,"width":"6","collapse":false},{"id":"3d6c4eba.5fa4f2","type":"ui_group","z":"","name":"Living Room","tab":"c9e7e4a4.085018","order":4,"disp":true,"width":"6","collapse":false},{"id":"1f2644bb.89372b","type":"ui_group","z":"","name":"User Interface Options","tab":"f75a5bb2.b1e4d8","order":3,"disp":true,"width":"6","collapse":false},{"id":"c8f57dd5.b5d86","type":"ui_group","z":"","name":"Notification Rules","tab":"e5b53d58.91cd2","order":4,"disp":true,"width":"6","collapse":false},{"id":"fdc85854.384d68","type":"ui_group","z":"","name":"Notification Settings","tab":"e5b53d58.91cd2","order":1,"disp":true,"width":"6","collapse":false},{"id":"3efa9018.5063d","type":"ui_group","z":"","name":"Pushover Key","tab":"e5b53d58.91cd2","order":3,"disp":true,"width":"6","collapse":false},{"id":"692c2b54.d3d8d4","type":"ui_group","z":"","name":"About","tab":"f75a5bb2.b1e4d8","order":5,"disp":true,"width":"6","collapse":false},{"id":"36ced4c2.f9ba0c","type":"ui_group","z":"","name":"Notification Email Address","tab":"e5b53d58.91cd2","order":2,"disp":true,"width":"6","collapse":false},{"id":"49c96b7.f7f1194","type":"ui_group","z":"","name":"Remote","tab":"7d6f4df0.4c39c4","order":5,"disp":true,"width":"6","collapse":false},{"id":"39da9c17.d7b3f4","type":"ui_spacer","name":"spacer","group":"a9150e63.aa674","order":9,"width":5,"height":1},{"id":"a3b5453e.42ed18","type":"ui_group","z":"","name":"Power","tab":"217d327e.d7e02e","order":2,"disp":true,"width":"6","collapse":false},{"id":"5405279d.816228","type":"ui_group","z":"","name":"Generator","tab":"217d327e.d7e02e","order":3,"disp":true,"width":"6","collapse":false},{"id":"f39c0408.649eb8","type":"ui_tab","z":"","name":"Test","icon":"dashboard","order":10,"disabled":false,"hidden":false},{"id":"2989871c.f86568","type":"ui_group","z":"","name":"TEST","tab":"f39c0408.649eb8","order":1,"disp":true,"width":"6","collapse":false},{"id":"327cb1d1.a042ce","type":"ui_spacer","name":"spacer","group":"5cfde2ad.54731c","order":4,"width":3,"height":1},{"id":"9bda0b00.c28668","type":"ui_spacer","name":"spacer","group":"3fdf8cb1.112cc4","order":7,"width":3,"height":1},{"id":"55c489f9.6f0b28","type":"ui_spacer","name":"spacer","group":"69b2b8a5.f064c8","order":4,"width":3,"height":1},{"id":"fae30b4d.239258","type":"ui_tab","z":"de0536ab.6a9728","name":"Status","icon":"visibility","order":6},{"id":"849e2284.fb7ed","type":"ui_tab","z":"de0536ab.6a9728","name":"Climate","icon":"brightness_4","order":4},{"id":"f33e9f6.ab1166","type":"ui_tab","z":"de0536ab.6a9728","name":"Shades","icon":"reorder","order":3},{"id":"689fc56b.144cec","type":"mqtt-broker","z":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"verifyservercert":true,"compatmode":true,"keepalive":"15","cleansession":true,"birthTopic":"","birthQos":"0","birthRetain":"true","birthPayload":"","willTopic":"","willQos":"0","willRetain":"true","willPayload":""},{"id":"9d35a7f5.963b98","type":"ui_tab","z":"de0536ab.6a9728","name":"Exterior","icon":"directions_bus","order":2},{"id":"61e07929.32e208","type":"ui_tab","z":"de0536ab.6a9728","name":"Interior","icon":"home","order":1},{"id":"29879dab.7af262","type":"ui_group","z":"de0536ab.6a9728","name":"Driver Side","tab":"61e07929.32e208","order":2,"disp":true,"width":"6"},{"id":"992d81a2.fb54b","type":"ui_group","z":"de0536ab.6a9728","name":"Mid Bath","tab":"61e07929.32e208","order":8,"disp":true,"width":"6"},{"id":"f25c5685.f9c998","type":"ui_tab","z":"2f811349.94c06c","name":"Notifications","icon":"notifications_active","order":7},{"id":"c2b41353.c92fd","type":"sqlitedb","z":"2f811349.94c06c","db":"/coachproxy/node-red/coachproxy.sqlite"},{"id":"1733d850.9fd7d8","type":"ui_group","z":"de0536ab.6a9728","name":"Main","tab":"61e07929.32e208","order":1,"disp":true,"width":"6","collapse":false},{"id":"ee91d876.3e6178","type":"ui_group","z":"de0536ab.6a9728","name":"Passenger Side","tab":"61e07929.32e208","order":3,"disp":true,"width":"6"},{"id":"4fd30f6d.93146","type":"ui_group","z":"de0536ab.6a9728","name":"Water","tab":"9d35a7f5.963b98","order":3,"disp":true,"width":"6"},{"id":"8567c648.c51bf8","type":"ui_group","z":"de0536ab.6a9728","name":"Bedroom","tab":"61e07929.32e208","order":9,"disp":true,"width":"6"},{"id":"5afcf121.35be","type":"ui_group","z":"de0536ab.6a9728","name":"Rear Bath","tab":"61e07929.32e208","order":10,"disp":true,"width":"6"},{"id":"a2df36fa.e5fd58","type":"ui_group","z":"de0536ab.6a9728","name":"Exterior Lights","tab":"9d35a7f5.963b98","order":1,"disp":true,"width":"6","collapse":false},{"id":"934216d7.301848","type":"ui_group","z":"de0536ab.6a9728","name":"Vent Fans","tab":"849e2284.fb7ed","order":1,"disp":true,"width":"6"},{"id":"4166c8e2.b67978","type":"ui_group","z":"de0536ab.6a9728","name":"Heated Floors","tab":"849e2284.fb7ed","order":2,"disp":true,"width":"6"},{"id":"e9523e77.03c04","type":"ui_group","z":"","name":"General Shades","tab":"f33e9f6.ab1166","order":1,"disp":true,"width":"6","collapse":false},{"id":"4524b1da.db022","type":"ui_group","z":"","name":"Main Shades","tab":"f33e9f6.ab1166","order":3,"disp":true,"width":"6","collapse":false},{"id":"b8c9b429.c61198","type":"ui_group","z":"","name":"Locks","tab":"9d35a7f5.963b98","order":2,"disp":true,"width":"6"},{"id":"31e63998.e49f26","type":"ui_group","name":"Readings","tab":"fae30b4d.239258","order":1,"disp":true,"width":6},{"id":"55546bb9.a1f0b4","type":"ui_group","name":"Generator","tab":"fae30b4d.239258","order":3,"disp":true,"width":6},{"id":"6900161b.fbecc8","type":"ui_group","z":"","name":"General","tab":"61e07929.32e208","order":12,"disp":true,"width":"6","collapse":false},{"id":"9aae914e.5b372","type":"ui_group","z":"","name":"System Information","tab":"fdd23a7c.f066b8","order":1,"disp":true,"width":"6","collapse":false},{"id":"89741f7.6ae75e","type":"ui_group","z":"","name":"Network Information","tab":"fdd23a7c.f066b8","order":2,"disp":true,"width":"6"},{"id":"358ad550.310efa","type":"ui_base","theme":{"name":"theme-custom","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#169dd3","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"default":"#4B7930","baseColor":"#3d89be","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","reset":false},"themeState":{"base-color":{"default":"#0094ce","value":"#0094ce","edited":false},"page-titlebar-backgroundColor":{"value":"#3d89be","edited":true},"page-backgroundColor":{"value":"#e8e8e8","edited":true},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#3d89be","edited":true},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#3d89be","edited":true},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"CoachProxyOS","hideToolbar":"false","allowSwipe":"false","dateFormat":"YYYY/MM/DD","sizes":{"sx":46,"sy":48,"gx":14,"gy":14,"cx":6,"cy":6,"px":4,"py":6}}},{"id":"ff64ed84.f36a8","type":"ui_group","z":"","name":"Awnings","tab":"9d35a7f5.963b98","order":5,"disp":true,"width":"6","collapse":false},{"id":"1541cbc0.49eaa4","type":"ui_group","z":"","name":"Temperatures","tab":"9d35a7f5.963b98","order":4,"disp":true,"width":"6"},{"id":"8c4450cd.35c37","type":"ui_group","z":"","name":"Closet","tab":"61e07929.32e208","order":11,"disp":true,"width":"6","collapse":false},{"id":"de55bc8e.c280f","type":"ui_group","z":"","name":"Coach Selection","tab":"e10b1bec.04aff8","order":1,"disp":true,"width":"6","collapse":false},{"id":"d8f9c515.f70708","type":"ui_group","z":"","name":"Coach Options","tab":"e10b1bec.04aff8","order":2,"disp":true,"width":"6","collapse":false},{"id":"de32d7b1.5f27b8","type":"ui_group","z":"","name":"Save and Install","tab":"e10b1bec.04aff8","order":4,"disp":true,"width":"6","collapse":false},{"id":"cacb1b98.3549b8","type":"sqlitedb","z":"","db":"/coachproxy/node-red/coachproxy.sqlite"},{"id":"e10b1bec.04aff8","type":"ui_tab","z":"","name":"Configuration","icon":"dashboard","order":11},{"id":"c42f0be0.1a0dd8","type":"ui_group","z":"","name":"Bedroom Shades","tab":"f33e9f6.ab1166","order":5,"disp":true,"width":"6","collapse":false},{"id":"c91dc5d8.aa70c8","type":"ui_group","z":"","name":"Cockpit Shades","tab":"f33e9f6.ab1166","order":2,"disp":true,"width":"6","collapse":false},{"id":"ab88210.09dcbe","type":"ui_group","z":"","name":"TV Lift","tab":"61e07929.32e208","order":7,"disp":true,"width":"6","collapse":false},{"id":"fdd23a7c.f066b8","type":"ui_tab","z":"","name":"System","icon":"settings","order":10},{"id":"fdbf2c15.ae20a","type":"ui_group","z":"","name":"Power","tab":"fae30b4d.239258","order":2,"disp":true,"width":"6","collapse":false},{"id":"2ebc985e.745fd8","type":"ui_group","z":"","name":"Presets","tab":"5e2e20ce.7ac8d","order":1,"disp":true,"width":"6","collapse":false},{"id":"167edf8b.e385b","type":"ui_group","z":"","name":"Save Presets","tab":"5e2e20ce.7ac8d","order":2,"disp":true,"width":"6","collapse":false},{"id":"5e2e20ce.7ac8d","type":"ui_tab","z":"","name":"Presets","icon":"favorite","order":5},{"id":"7b37b867.538e78","type":"ui_group","z":"","name":"New Remote Access","tab":"fdd23a7c.f066b8","order":3,"disp":true,"width":"6","collapse":false},{"id":"ac3eab12.a203a8","type":"ui_group","z":"","name":"Galley","tab":"61e07929.32e208","order":5,"disp":true,"width":"6","collapse":false},{"id":"77711941.795218","type":"ui_group","z":"","name":"Hall","tab":"61e07929.32e208","order":6,"disp":true,"width":"6","collapse":false},{"id":"f2e98653.59c9e8","type":"ui_group","z":"","name":"Thermostats","tab":"849e2284.fb7ed","order":3,"disp":true,"width":"6","collapse":false},{"id":"6c056dd3.cf5af4","type":"ui_group","z":"","name":"Alexa Commands","tab":"fdd23a7c.f066b8","order":5,"disp":true,"width":"6","collapse":false},{"id":"541b9b96.9a6354","type":"ui_group","z":"","name":"Restart Alexa Integration","tab":"fdd23a7c.f066b8","order":4,"disp":true,"width":"6","collapse":false},{"id":"9f85014f.98512","type":"ui_group","z":"","name":"Living Room","tab":"61e07929.32e208","order":4,"disp":true,"width":"6","collapse":false},{"id":"3b0dc7e1.eb63d8","type":"ui_group","z":"","name":"User Interface Options","tab":"e10b1bec.04aff8","order":3,"disp":true,"width":"6","collapse":false},{"id":"dbba06fe.896a28","type":"ui_group","z":"","name":"Notification Rules","tab":"f25c5685.f9c998","order":4,"disp":true,"width":"6","collapse":false},{"id":"1c0887fa.626488","type":"ui_group","z":"","name":"Notification Settings","tab":"f25c5685.f9c998","order":1,"disp":true,"width":"6","collapse":false},{"id":"b16ae0ed.fe998","type":"ui_group","z":"","name":"Notification Email Address","tab":"f25c5685.f9c998","order":2,"disp":true,"width":"6","collapse":false},{"id":"9143b49.e301448","type":"ui_group","z":"","name":"About","tab":"e10b1bec.04aff8","order":5,"disp":true,"width":"6","collapse":false},{"id":"b15b6e12.9a77a","type":"ui_group","z":"","name":"Notification SMTP Server","tab":"f25c5685.f9c998","order":3,"disp":true,"width":"6","collapse":false},{"id":"7adf5385.a5d64c","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_1/+pred/","label":"Main","group":"1733d850.9fd7d8","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"1_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":140,"wires":[["14680a97.4f7d25"]]},{"id":"71ed39a.2df8cc8","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_1/brightness/","label":"","group":"1733d850.9fd7d8","order":4,"width":"3","height":"1","passthru":false,"topic":"1_brightness","min":"1","max":"100","step":"","x":850,"y":180,"wires":[["14680a97.4f7d25"]]},{"id":"18310acc.c93755","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_2/+pred/","label":"Entry","group":"1733d850.9fd7d8","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"2_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":220,"wires":[["14680a97.4f7d25"]]},{"id":"467738b3.6b65a8","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_2/brightness/","label":"","group":"1733d850.9fd7d8","order":2,"width":"3","height":"1","passthru":false,"topic":"2_brightness","min":"1","max":"100","step":"","x":850,"y":260,"wires":[["14680a97.4f7d25"]]},{"id":"2b4072ea.e19ece","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_3/+pred/","label":"Ceiling","group":"ee91d876.3e6178","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"3_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":300,"wires":[["14680a97.4f7d25"]]},{"id":"f5378130.0cc47","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_3/brightness/","label":"","group":"ee91d876.3e6178","order":2,"width":"3","height":"1","passthru":false,"topic":"3_brightness","min":"1","max":"100","step":"","x":850,"y":340,"wires":[["14680a97.4f7d25"]]},{"id":"1eeb4982.1abf66","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_4/+pred/","label":"Ceiling","group":"29879dab.7af262","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"4_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":380,"wires":[["14680a97.4f7d25"]]},{"id":"96162afb.ff1918","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_4/brightness/","label":"","group":"29879dab.7af262","order":2,"width":"3","height":"1","passthru":false,"topic":"4_brightness","min":"1","max":"100","step":"","x":850,"y":420,"wires":[["14680a97.4f7d25"]]},{"id":"ffb5e8ee.91e9a8","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/dc_dimmer.pl ","addpay":true,"append":"","useSpawn":"","name":"","x":1210,"y":1500,"wires":[[],[],[]]},{"id":"cea46d4e.4092f","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_8/+pred/","label":"Slide","group":"29879dab.7af262","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"8_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":700,"wires":[["14680a97.4f7d25"]]},{"id":"7d506587.4c33ac","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_8/brightness/","label":"","group":"29879dab.7af262","order":4,"width":"3","height":"1","passthru":false,"topic":"8_brightness","min":"1","max":"100","step":"","x":850,"y":740,"wires":[["14680a97.4f7d25"]]},{"id":"64dc0f34.61749","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_9/+pred/","label":"Courtesy","group":"29879dab.7af262","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"9_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":780,"wires":[["14680a97.4f7d25"]]},{"id":"b10f5751.555318","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_9/brightness/","label":"","group":"29879dab.7af262","order":6,"width":"3","height":"1","passthru":false,"topic":"9_brightness","min":"1","max":"100","step":"","x":850,"y":820,"wires":[["14680a97.4f7d25"]]},{"id":"a731e8e6.1e8298","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_7/+pred/","label":"Sconce","group":"ee91d876.3e6178","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"7_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":620,"wires":[["14680a97.4f7d25"]]},{"id":"2f1cc273.15d11e","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_7/brightness/","label":"","group":"ee91d876.3e6178","order":6,"width":"3","height":"1","passthru":false,"topic":"7_brightness","min":"1","max":"100","step":"","x":850,"y":660,"wires":[["14680a97.4f7d25"]]},{"id":"ed3338ca.4f7948","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_6/+pred/","label":"Slide","group":"ee91d876.3e6178","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"6_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":540,"wires":[["14680a97.4f7d25"]]},{"id":"43b63903.ef8ee8","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_6/brightness/","label":"","group":"ee91d876.3e6178","order":4,"width":"3","height":"1","passthru":false,"topic":"6_brightness","min":"1","max":"100","step":"","x":850,"y":580,"wires":[["14680a97.4f7d25"]]},{"id":"71b443be.f075fc","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_19/+pred/","label":"Accent","group":"1733d850.9fd7d8","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"19_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1360,"wires":[["14680a97.4f7d25"]]},{"id":"127f467.4a078ba","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_14/+pred/","label":"Task","group":"29879dab.7af262","order":7,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"14_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1160,"wires":[["14680a97.4f7d25"]]},{"id":"bb745798.143ba8","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_15/+pred/","label":"Ceiling","group":"992d81a2.fb54b","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"15_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1200,"wires":[["14680a97.4f7d25"]]},{"id":"8cb5466e.40bbe8","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_16/+pred/","label":"Vanity","group":"992d81a2.fb54b","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"16_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1240,"wires":[["14680a97.4f7d25"]]},{"id":"36188c04.7cf3e4","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_12/+pred/","label":"Ceiling","group":"8567c648.c51bf8","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"12_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":1020,"wires":[["14680a97.4f7d25"]]},{"id":"16cef559.aff5db","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_12/brightness/","label":"","group":"8567c648.c51bf8","order":2,"width":"3","height":"1","passthru":false,"topic":"12_brightness","min":"1","max":"100","step":"","x":840,"y":1060,"wires":[["14680a97.4f7d25"]]},{"id":"7a08deb6.43662","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_11/+pred/","label":"Sconce","group":"8567c648.c51bf8","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"11_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":940,"wires":[["14680a97.4f7d25"]]},{"id":"a7d1b796.878248","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_11/brightness/","label":"","group":"8567c648.c51bf8","order":6,"width":"3","height":"1","passthru":false,"topic":"11_brightness","min":"1","max":"100","step":"","x":840,"y":980,"wires":[["14680a97.4f7d25"]]},{"id":"4836552c.966f3c","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_10/+pred/","label":"Courtesy","group":"8567c648.c51bf8","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"10_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":860,"wires":[["14680a97.4f7d25"]]},{"id":"f069f03f.2c60d","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_10/brightness/","label":"","group":"8567c648.c51bf8","order":4,"width":"3","height":"1","passthru":false,"topic":"10_brightness","min":"1","max":"100","step":"","x":840,"y":900,"wires":[["14680a97.4f7d25"]]},{"id":"ba6f168.e669ce8","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_13/+pred/","label":"Ceiling","group":"5afcf121.35be","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"13_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1120,"wires":[["14680a97.4f7d25"]]},{"id":"85b5a0fd.7002e","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_17/+pred/","label":"Vanity","group":"5afcf121.35be","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"17_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1280,"wires":[["14680a97.4f7d25"]]},{"id":"b4d29a75.ce46e8","type":"ui_switch","z":"de0536ab.6a9728","name":"Water Pump /pump_out/","label":"Pump","group":"4fd30f6d.93146","order":1,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"93_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":870,"y":2480,"wires":[["14680a97.4f7d25"]]},{"id":"2420242b.69ec4c","type":"ui_switch","z":"de0536ab.6a9728","name":"Elec Water Heat /elecheat_out/","label":"Electric","group":"4fd30f6d.93146","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"23_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":850,"y":2560,"wires":[["14680a97.4f7d25","12ee225a.d72ace"]]},{"id":"57bbb38f.3acf8c","type":"ui_switch","z":"de0536ab.6a9728","name":"Fuel Water Heat /fuelheat_out/","label":"Fuel","group":"4fd30f6d.93146","order":6,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"24_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":850,"y":2520,"wires":[["14680a97.4f7d25"]]},{"id":"3f924498.d4437c","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_22/+pred/","label":"Porch","group":"a2df36fa.e5fd58","order":"9020","width":"3","height":"1","passthru":false,"decouple":"true","topic":"22_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1480,"wires":[["14680a97.4f7d25"]]},{"id":"b50ee7ba.993a78","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_95/+pred/","label":"Door","group":"a2df36fa.e5fd58","order":"9010","width":"3","height":"1","passthru":false,"decouple":"true","topic":"95_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2320,"wires":[["14680a97.4f7d25"]]},{"id":"d5d064be.c33588","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_96/+pred/","label":"Cargo","group":"a2df36fa.e5fd58","order":"9040","width":"3","height":"1","passthru":false,"decouple":"true","topic":"96_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2360,"wires":[["14680a97.4f7d25"]]},{"id":"7f0a0e40.2a70b","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_28/+pred/","label":"Light","group":"8c4450cd.35c37","order":6,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"28_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1720,"wires":[["14680a97.4f7d25"]]},{"id":"2257d52.fc5fc2a","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_21/+pred/","label":"Road","group":"a2df36fa.e5fd58","order":"9030","width":"3","height":"1","passthru":false,"decouple":"true","topic":"21_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1440,"wires":[["14680a97.4f7d25"]]},{"id":"9a2723ce.76b54","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/3","qos":"0","broker":"689fc56b.144cec","x":150,"y":320,"wires":[["c495e938.efe368"]]},{"id":"bfb0744f.a51d68","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/4","qos":"0","broker":"689fc56b.144cec","x":150,"y":400,"wires":[["f2defd61.c41a3"]]},{"id":"149ada63.06a326","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/6","qos":"0","broker":"689fc56b.144cec","x":150,"y":560,"wires":[["b42e5836.16b788"]]},{"id":"8f1fb648.db7c28","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/7","qos":"0","broker":"689fc56b.144cec","x":150,"y":640,"wires":[["859deedb.c6e62"]]},{"id":"772b73a.e7bb28c","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/8","qos":"0","broker":"689fc56b.144cec","x":150,"y":720,"wires":[["6d85a6b8.fe8ba8"]]},{"id":"43a9919.ab7e17","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/9","qos":"0","broker":"689fc56b.144cec","x":150,"y":800,"wires":[["60179f10.bf2f2"]]},{"id":"8d9ed71e.205258","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/10","qos":"0","broker":"689fc56b.144cec","x":160,"y":880,"wires":[["880bb90b.ab0128"]]},{"id":"6d8e49c8.e6f828","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/11","qos":"0","broker":"689fc56b.144cec","x":160,"y":960,"wires":[["8d60dc2.8be9d2"]]},{"id":"10b3ade2.35d292","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/12","qos":"0","broker":"689fc56b.144cec","x":160,"y":1040,"wires":[["984501.8acafb"]]},{"id":"8d7983e0.fb392","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/13","qos":"0","broker":"689fc56b.144cec","x":160,"y":1120,"wires":[["ee167049.6bc3c"]]},{"id":"e6c3b28.3e4b85","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/14","qos":"0","broker":"689fc56b.144cec","x":160,"y":1160,"wires":[["43853011.ff858"]]},{"id":"1b9eaf31.fb0e41","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/15","qos":"0","broker":"689fc56b.144cec","x":160,"y":1200,"wires":[["f108924c.a7a5e"]]},{"id":"63eefcec.d4d504","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/16","qos":"0","broker":"689fc56b.144cec","x":160,"y":1240,"wires":[["d6da34a9.45a1b8"]]},{"id":"c9387b62.c6f0b8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/17","qos":"0","broker":"689fc56b.144cec","x":160,"y":1280,"wires":[["2bb4db42.e7f5c4"]]},{"id":"cb971ec2.b801","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/19","qos":"0","broker":"689fc56b.144cec","x":160,"y":1360,"wires":[["faa862e7.df795"]]},{"id":"6198eec7.0d7b1","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/21","qos":"0","broker":"689fc56b.144cec","x":160,"y":1440,"wires":[["a42e130e.14c31"]]},{"id":"abd1b804.106878","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/22","qos":"0","broker":"689fc56b.144cec","x":160,"y":1480,"wires":[["177cf4ce.ef5b3b"]]},{"id":"559ea140.59874","type":"mqtt in","z":"de0536ab.6a9728","name":"/elecheat_in/","topic":"RVC/DC_DIMMER_STATUS_3/23","qos":"0","broker":"689fc56b.144cec","x":110,"y":2560,"wires":[["a9228e6e.767be"]]},{"id":"c45abe74.67563","type":"mqtt in","z":"de0536ab.6a9728","name":"/fuelheat_in/","topic":"RVC/DC_DIMMER_STATUS_3/24","qos":"0","broker":"689fc56b.144cec","x":110,"y":2520,"wires":[["e790bc37.eb4a7"]]},{"id":"ea9a2cf6.d25ca","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/28","qos":"0","broker":"689fc56b.144cec","x":160,"y":1720,"wires":[["a0db3ec0.b7e2a"]]},{"id":"8982554e.fc1ec8","type":"mqtt in","z":"de0536ab.6a9728","name":"/pump_in/","topic":"RVC/DC_DIMMER_STATUS_3/93","qos":"0","broker":"689fc56b.144cec","x":100,"y":2480,"wires":[["79bdb248.c6045c"]]},{"id":"f0e2cd9.1dbb63","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/95","qos":"0","broker":"689fc56b.144cec","x":160,"y":2320,"wires":[["5f936da9.c81cb4"]]},{"id":"6017bfcd.d6f27","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/96","qos":"0","broker":"689fc56b.144cec","x":160,"y":2360,"wires":[["d8666077.4ddfd"]]},{"id":"2a992dc.5dc31d2","type":"mqtt in","z":"de0536ab.6a9728","name":"/galley-fan-mqtt/","topic":"RVC/DC_DIMMER_STATUS_3/25","qos":"0","broker":"689fc56b.144cec","x":2780,"y":1400,"wires":[["8af48c3e.8153f"]]},{"id":"f7e30f2a.c243b","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/vent_lid.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"vent_lid.pl","x":4240,"y":1580,"wires":[[],[],[]]},{"id":"59cf9e2.a6a016","type":"ui_button","z":"de0536ab.6a9728","name":"/entry-unlock/","group":"b8c9b429.c61198","order":6,"width":"3","height":"1","passthru":false,"label":"Unlock","color":"","bgcolor":"","icon":"fa-unlock","payload":"0","payloadType":"str","topic":"1","x":1460,"y":980,"wires":[["79384503.aa066c"]]},{"id":"d5bfe04f.ab1f9","type":"ui_button","z":"de0536ab.6a9728","name":"/entry-lock/","group":"b8c9b429.c61198","order":5,"width":"3","height":"1","passthru":false,"label":"Lock","color":"","bgcolor":"","icon":"fa-lock","payload":"1","payloadType":"str","topic":"1","x":1470,"y":1020,"wires":[["79384503.aa066c"]]},{"id":"d7b8de0f.5fa62","type":"ui_button","z":"de0536ab.6a9728","name":"/cargo-unlock/","group":"b8c9b429.c61198","order":9,"width":"3","height":"1","passthru":false,"label":"Unlock","color":"","bgcolor":"","icon":"fa-unlock","payload":"0","payloadType":"str","topic":"6","x":1460,"y":1100,"wires":[["79384503.aa066c"]]},{"id":"9eabb939.ba60d8","type":"ui_button","z":"de0536ab.6a9728","name":"/cargo-lock/","group":"b8c9b429.c61198","order":8,"width":"3","height":"1","passthru":false,"label":"Lock","color":"","bgcolor":"","icon":"fa-lock","payload":"1","payloadType":"str","topic":"6","x":1470,"y":1140,"wires":[["79384503.aa066c"]]},{"id":"ff33bb6c.42be28","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/locks.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"locks.pl /locks/+pred/","x":2180,"y":1000,"wires":[[],[],[]]},{"id":"4f52c4.ae716d3c","type":"mqtt in","z":"de0536ab.6a9728","name":"/ceilfan_low/","topic":"RVC/DC_DIMMER_STATUS_3/35","qos":"0","broker":"689fc56b.144cec","x":2770,"y":1880,"wires":[["446ced3f.3fe4e4"]]},{"id":"a5c3a0b5.d8a9a","type":"mqtt in","z":"de0536ab.6a9728","name":"/ceilfan_high/","topic":"RVC/DC_DIMMER_STATUS_3/36","qos":"0","broker":"689fc56b.144cec","x":2770,"y":1920,"wires":[["cfa8cbef.2b1688"]]},{"id":"bcf76433.3a91e8","type":"ui_slider","z":"de0536ab.6a9728","name":"Ceiling Fan /ceilfan_switch/","label":"","group":"8567c648.c51bf8","order":17,"width":"3","height":"1","passthru":false,"topic":"1","min":0,"max":"2","step":"","x":3720,"y":1920,"wires":[["edec82c4.5dee"]]},{"id":"1e901a10.2b1456","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/ceiling_fan.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"ceiling_fan.pl /ceilfan/+pred/","x":4240,"y":1920,"wires":[[],[],[]]},{"id":"fcafb8bd.947fa8","type":"ui_switch","z":"de0536ab.6a9728","name":"Galley Fan /galley-fan-sw/","label":"Fan","group":"934216d7.301848","order":3,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"1","onvalue":"2","onvalueType":"num","onicon":"","oncolor":"","offvalue":"3","offvalueType":"num","officon":"","offcolor":"","x":3710,"y":1400,"wires":[["72bd8146.df489"]]},{"id":"277c858b.5f2faa","type":"ui_switch","z":"de0536ab.6a9728","name":"Galley Lid /galley-lid-sw/","label":"Vent Lid","group":"934216d7.301848","order":2,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"1","onvalue":"69","onvalueType":"num","onicon":"","oncolor":"","offvalue":"133","offvalueType":"num","officon":"","offcolor":"","x":3710,"y":1440,"wires":[["4c8e6a2.04d7794"]]},{"id":"d2923412.b03748","type":"ui_switch","z":"de0536ab.6a9728","name":"Mid Fan /mid-fan-sw/","label":"Fan","group":"934216d7.301848","order":6,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"2","onvalue":"2","onvalueType":"num","onicon":"","oncolor":"","offvalue":"3","offvalueType":"num","officon":"","offcolor":"","x":3700,"y":1540,"wires":[["abf7b521.e90b68"]]},{"id":"9b1814e2.b961d8","type":"ui_switch","z":"de0536ab.6a9728","name":"Mid Lid /mid-lid-sw/","label":"Vent Lid","group":"934216d7.301848","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"2","onvalue":"69","onvalueType":"num","onicon":"","oncolor":"","offvalue":"133","offvalueType":"num","officon":"","offcolor":"","x":3700,"y":1580,"wires":[["9daf737f.8e83"]]},{"id":"1faf4356.96e32d","type":"ui_switch","z":"de0536ab.6a9728","name":"Rear Fan /rear-fan-sw/","label":"Fan","group":"934216d7.301848","order":9,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"3","onvalue":"2","onvalueType":"num","onicon":"","oncolor":"","offvalue":"3","offvalueType":"num","officon":"","offcolor":"","x":3700,"y":1680,"wires":[["26f19e00.5098a2"]]},{"id":"d69372a4.723b2","type":"ui_switch","z":"de0536ab.6a9728","name":"Rear Lid /rear-lid-sw/","label":"Vent Lid","group":"934216d7.301848","order":8,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"3","onvalue":"69","onvalueType":"num","onicon":"","oncolor":"","offvalue":"133","offvalueType":"num","officon":"","offcolor":"","x":3700,"y":1720,"wires":[["da362c86.c9b56"]]},{"id":"3afd43e8.47302c","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/20","qos":"0","broker":"689fc56b.144cec","x":160,"y":1400,"wires":[["bbd9d335.e7ce1"]]},{"id":"dce00061.3fae3","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/18","qos":"0","broker":"689fc56b.144cec","x":160,"y":1320,"wires":[["e3791328.8b72"]]},{"id":"8b104eda.8fec7","type":"ui_button","z":"de0536ab.6a9728","name":"/all-unlock/","group":"b8c9b429.c61198","order":3,"width":"3","height":"1","passthru":false,"label":"Unlock","color":"","bgcolor":"","icon":"fa-unlock","payload":"0","payloadType":"str","topic":"0","x":1470,"y":860,"wires":[["79384503.aa066c"]]},{"id":"8b84cdb9.5dcce","type":"ui_button","z":"de0536ab.6a9728","name":"/all-lock/","group":"b8c9b429.c61198","order":2,"width":"3","height":"1","passthru":false,"label":"Lock","color":"","bgcolor":"","icon":"fa-lock","payload":"1","payloadType":"str","topic":"0","x":1480,"y":900,"wires":[["79384503.aa066c"]]},{"id":"4a4e0e96.6acd2","type":"ui_template","z":"de0536ab.6a9728","group":"b8c9b429.c61198","name":"All Locks","order":1,"width":"","height":"","format":"<!DOCTYPE html>\n<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;overflow:hidden;\">\n    All\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1480,"y":820,"wires":[["79384503.aa066c"]]},{"id":"3565b1ea.28beae","type":"ui_template","z":"de0536ab.6a9728","group":"b8c9b429.c61198","name":"Entrance Door","order":4,"width":"","height":"","format":"<!DOCTYPE html>\n<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left;\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;overflow:hidden;\">\n    Entrance Door\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>\n","storeOutMessages":true,"fwdInMessages":true,"x":1460,"y":940,"wires":[["79384503.aa066c"]]},{"id":"4bd0506a.abd0c","type":"ui_template","z":"de0536ab.6a9728","group":"b8c9b429.c61198","name":"Cargo Bays","order":7,"width":"","height":"","format":"<!DOCTYPE html>\n<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;overflow:hidden;\">\n    Cargo Bays\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":true,"fwdInMessages":true,"x":1470,"y":1060,"wires":[["79384503.aa066c"]]},{"id":"550fa458.1fe58c","type":"ui_template","z":"de0536ab.6a9728","group":"934216d7.301848","name":"Galley Vent Label","order":1,"width":"","height":"","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    Galley\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3690,"y":1360,"wires":[["72bd8146.df489"]]},{"id":"773434d4.606aec","type":"ui_template","z":"de0536ab.6a9728","group":"934216d7.301848","name":"Mid Bath Vent Label","order":4,"width":"","height":"","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    Mid Bath\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":3700,"y":1500,"wires":[["abf7b521.e90b68"]]},{"id":"bc93533d.95122","type":"ui_template","z":"de0536ab.6a9728","group":"934216d7.301848","name":"Rear Bath Vent Label","order":7,"width":"","height":"","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    Rear Bath\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":3700,"y":1640,"wires":[["26f19e00.5098a2"]]},{"id":"2215f1d4.43d18e","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"CP/TANK_STATUS/Fresh","qos":"2","broker":"689fc56b.144cec","x":310,"y":3620,"wires":[["7808a085.c445"]]},{"id":"55f25b97.937a04","type":"ui_text","z":"de0536ab.6a9728","group":"31e63998.e49f26","order":2,"width":"2","height":"1","name":"Fresh:","label":"Fresh","format":"{{msg.payload}}%","layout":"col-center","x":730,"y":3620,"wires":[]},{"id":"8138b7ee.3d13d8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"CP/TANK_STATUS/Grey","qos":"2","broker":"689fc56b.144cec","x":310,"y":3660,"wires":[["7bc72b70.e50004"]]},{"id":"40aa0f29.80681","type":"ui_text","z":"de0536ab.6a9728","group":"31e63998.e49f26","order":3,"width":"2","height":"1","name":"Grey:","label":"Grey","format":"{{msg.payload}}%","layout":"col-center","x":730,"y":3660,"wires":[]},{"id":"1636b1b0.329cae","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"CP/TANK_STATUS/Black","qos":"2","broker":"689fc56b.144cec","x":310,"y":3700,"wires":[["806f3c61.170f5"]]},{"id":"716b1050.7d9ff","type":"ui_text","z":"de0536ab.6a9728","group":"31e63998.e49f26","order":4,"width":"2","height":"1","name":"Black:","label":"Black","format":"{{msg.payload}}%","layout":"col-center","x":730,"y":3700,"wires":[]},{"id":"145788e6.ffddd7","type":"ui_text","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","order":3,"width":"3","height":"1","name":"House Battery /battery-house/battery-basic/+pred/","label":"House Battery","format":"{{msg.payload}} Volts","layout":"col-center","x":1130,"y":2760,"wires":[]},{"id":"3eb848b7.cb0cb8","type":"ui_text","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","order":4,"width":"3","height":"1","name":"Chassis Battery  /battery-chassis/battery-basic/+pred/","label":"Chassis Battery","format":"{{msg.payload}} Volts","layout":"col-center","x":1140,"y":2800,"wires":[]},{"id":"6d42e59.7122b1c","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"CP/GENERATOR_STATUS","qos":"2","broker":"689fc56b.144cec","x":290,"y":3920,"wires":[["f5fc301f.ef658"]]},{"id":"5514d0db.9c3f3","type":"ui_switch","z":"de0536ab.6a9728","name":"Gen Controls Enable","label":"Gen Controls Enable","tooltip":"","group":"55546bb9.a1f0b4","order":3,"width":"6","height":"1","passthru":false,"decouple":"true","topic":"genstartenable","onvalue":"1","onvalueType":"num","onicon":"","oncolor":"","offvalue":"0","offvalueType":"num","officon":"","offcolor":"","x":1010,"y":4400,"wires":[["85ea9729.bd8688"]]},{"id":"a92a81f6.2b828","type":"ui_button","z":"de0536ab.6a9728","name":"Start Generator","group":"55546bb9.a1f0b4","order":4,"width":"3","height":"1","label":"Start Gen","color":"","icon":"fa-repeat","payload":"1","payloadType":"str","topic":"generator","x":990,"y":4468,"wires":[["85ea9729.bd8688"]]},{"id":"6178453b.2b5bfc","type":"ui_button","z":"de0536ab.6a9728","name":"Stop Generator","group":"55546bb9.a1f0b4","order":5,"width":"3","height":"1","label":"Stop Gen","color":"","icon":"fa-stop","payload":"0","payloadType":"str","topic":"generator","x":990,"y":4504.5,"wires":[["85ea9729.bd8688"]]},{"id":"7f57eb6e.8b3f34","type":"inject","z":"de0536ab.6a9728","name":"Check Gen Start Enabled Timer","topic":"checkgenenable","payload":"","payloadType":"date","repeat":"1","crontab":"","once":true,"x":297,"y":4408,"wires":[["701f3685.bbbd38"]]},{"id":"4eb82aa1.e05fc4","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/generator.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"generator.pl /gencontrol/+pred/","x":1490,"y":4440,"wires":[["45fc3aef.7cb544"],[],[]]},{"id":"545516cc.214aa8","type":"ui_slider","z":"de0536ab.6a9728","name":"Brightness","label":"","group":"6900161b.fbecc8","order":5,"width":"3","height":"1","passthru":false,"outs":"all","topic":"","min":"1","max":"100","step":"","x":2010,"y":100,"wires":[["a8234617.b2a018"]]},{"id":"c68795b9.0ec1c8","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/panel_lights.pl ","addpay":true,"append":"","useSpawn":"","name":"","x":2430,"y":80,"wires":[[],[],[]]},{"id":"18e11915.4ec557","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"CP/IGNITION","qos":"2","broker":"689fc56b.144cec","x":270,"y":3840,"wires":[["8e7f1fe2.f669d"]]},{"id":"7bb1514c.33b45","type":"ui_text","z":"de0536ab.6a9728","group":"31e63998.e49f26","order":8,"width":"3","height":"1","name":"Ignition /ignition/+pred/","label":"Ignition","format":"{{msg.payload}}","layout":"col-center","x":790,"y":3840,"wires":[]},{"id":"56c1086b.cc21f8","type":"ui_switch","z":"de0536ab.6a9728","name":"Panel Lights","label":"Panels","group":"6900161b.fbecc8","order":4,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"","onvalue":"100","onvalueType":"num","onicon":"","oncolor":"","offvalue":"0","offvalueType":"num","officon":"","offcolor":"","x":2010,"y":60,"wires":[["a8234617.b2a018"]]},{"id":"66384e97.29c9e","type":"ui_template","z":"de0536ab.6a9728","group":"55546bb9.a1f0b4","name":"Generator Note","order":1,"width":"0","height":"0","format":"<div>\n<p>\nAs a safety precaution for operating the generator,\nyou must turn on 'Gen Controls Enable', then press\n'Start Gen' or 'Stop Gen' within 5 seconds.\nGenerator may take up to 60 seconds to start.\n</p>\n<p>&nbsp;</p>\n</div>\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":990.5000114440918,"y":4433.750005722046,"wires":[["85ea9729.bd8688"]]},{"id":"cb7601f7.5348d","type":"ui_template","z":"de0536ab.6a9728","group":"55546bb9.a1f0b4","name":"Gen Start Status","order":6,"width":"","height":"","format":"<div layout=\"row\" layout-align=\"center center\"><b>{{msg.payload}}</b></div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1000,"y":4541,"wires":[["85ea9729.bd8688"]]},{"id":"f9eb7aa9.50db38","type":"mqtt in","z":"de0536ab.6a9728","name":"GenStart Message","topic":"GENSTART/MESSAGE","broker":"689fc56b.144cec","x":363,"y":4541,"wires":[["3dd6b991.08eef6"]]},{"id":"45fc3aef.7cb544","type":"delay","z":"de0536ab.6a9728","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1720,"y":4440,"wires":[["5de9f5c4.9fed3c"]]},{"id":"5de9f5c4.9fed3c","type":"template","z":"de0536ab.6a9728","name":"Blank","field":"payload","fieldType":"msg","format":"handlebars","syntax":"plain","template":"","x":667,"y":4502,"wires":[["9ecfe871.2fab78"]]},{"id":"678442ff.bb7f4c","type":"inject","z":"de0536ab.6a9728","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":true,"x":476,"y":4502,"wires":[["5de9f5c4.9fed3c"]]},{"id":"49b24ce8.761b94","type":"ui_button","z":"de0536ab.6a9728","name":"Mem On","group":"6900161b.fbecc8","order":1,"width":"2","height":"1","passthru":false,"label":"Mem On","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"master","x":1700,"y":240,"wires":[["cac073ca.22154"]]},{"id":"cac073ca.22154","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/master.pl","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"","x":1940,"y":240,"wires":[[],[],[]]},{"id":"40aad588.70ab6c","type":"ui_button","z":"de0536ab.6a9728","name":"All Off","group":"6900161b.fbecc8","order":3,"width":"2","height":"1","passthru":false,"label":"All Off","color":"","bgcolor":"","icon":"","payload":"0","payloadType":"str","topic":"master","x":1691,"y":281,"wires":[["cac073ca.22154"]]},{"id":"fa7c62e0.3286b","type":"ui_template","z":"de0536ab.6a9728","group":"31e63998.e49f26","name":"Tanks","order":1,"format":"<!DOCTYPE html>\n<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    Tanks\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":true,"fwdInMessages":true,"x":730,"y":3520,"wires":[[]]},{"id":"9786c05b.08ce1","type":"ui_template","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","name":"12V Power Label","order":1,"width":"","height":"","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    12V Power\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":450,"y":2720,"wires":[[]]},{"id":"ec67ff03.4e6ec","type":"ui_text","z":"de0536ab.6a9728","group":"55546bb9.a1f0b4","order":2,"width":"6","height":"1","name":"Generator State /genstatus/+pred/","label":"Status","format":"{{msg.payload}}","layout":"","x":920,"y":3920,"wires":[]},{"id":"67018fc.1bc4b7","type":"ui_button","z":"2f811349.94c06c","name":"Shutdown","group":"9aae914e.5b372","order":6,"width":"3","height":"1","passthru":false,"label":"Shutdown","color":"","bgcolor":"","icon":"fa-power-off","payload":"","payloadType":"str","topic":"shutdown","x":730,"y":3140,"wires":[["d12edc76.a16e2"]]},{"id":"d12edc76.a16e2","type":"exec","z":"2f811349.94c06c","command":"sudo /coachproxy/bin/safe_shutdown","addpay":false,"append":"","useSpawn":"","name":"","x":1000,"y":3140,"wires":[[],[],[]]},{"id":"2402e5e7.9492fa","type":"ui_button","z":"2f811349.94c06c","name":"Reboot","group":"9aae914e.5b372","order":5,"width":"3","height":"1","label":"Reboot","color":"","icon":"fa-repeat","payload":"","payloadType":"str","topic":"reboot","x":730,"y":3080,"wires":[["ebb1183d.4f0548"]]},{"id":"ebb1183d.4f0548","type":"exec","z":"2f811349.94c06c","command":"sudo /coachproxy/bin/safe_reboot","addpay":false,"append":"","useSpawn":"","name":"","x":990,"y":3080,"wires":[[],[],[]]},{"id":"a54c66d6.5aad68","type":"ui_text","z":"2f811349.94c06c","group":"9aae914e.5b372","order":7,"width":"","height":"","name":"Shutdown Feedback","label":"","format":"{{msg.payload}}","layout":"col-center","x":950,"y":3200,"wires":[]},{"id":"f4a85d74.b5613","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"GLOBAL/MESSAGE","qos":"0","broker":"689fc56b.144cec","x":130,"y":320,"wires":[["82ba0d9f.648eb"]]},{"id":"ec39bb7b.cf1668","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"GLOBAL/SN","qos":"0","broker":"689fc56b.144cec","x":720,"y":2900,"wires":[["6330aef7.df586"]]},{"id":"6330aef7.df586","type":"ui_text","z":"2f811349.94c06c","group":"9aae914e.5b372","order":2,"width":"","height":"","name":"Serial Number","label":"Serial Number","format":"{{msg.payload}}","layout":"","x":930,"y":2900,"wires":[]},{"id":"349eaf77.fb5c1","type":"ui_text","z":"2f811349.94c06c","group":"9aae914e.5b372","order":1,"width":"","height":"","name":"CoachProxyOS Version","label":"CoachProxyOS Version","format":"{{msg.payload}}","layout":"","x":940,"y":2940,"wires":[]},{"id":"300050d0.2cf4d","type":"inject","z":"2f811349.94c06c","name":"Every Minute","topic":"","payload":"","payloadType":"date","repeat":"60","crontab":"","once":true,"onceDelay":"","x":310,"y":2980,"wires":[["6d090ed3.c2dd4"]]},{"id":"6d090ed3.c2dd4","type":"exec","z":"2f811349.94c06c","command":"date +%s -d \"$(uptime -s)\"","addpay":false,"append":"","useSpawn":"","name":"Uptime","x":510,"y":2980,"wires":[["f8900a90.013218"],[],[]]},{"id":"5e4db807.2b4348","type":"ui_text","z":"2f811349.94c06c","group":"9aae914e.5b372","order":3,"width":"","height":"","name":"Uptime","label":"Uptime","format":"{{msg.payload}}","layout":"","x":910,"y":2980,"wires":[]},{"id":"d9d93bd5.615028","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"GLOBAL/SHUTDOWN","qos":"0","broker":"689fc56b.144cec","x":690,"y":3200,"wires":[["a54c66d6.5aad68"]]},{"id":"c1a5b08c.a13b9","type":"ui_template","z":"de0536ab.6a9728","group":"4fd30f6d.93146","name":"Water Heat Label /waterheat-label/","order":3,"width":"","height":"","format":"<!DOCTYPE html>\n<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;overflow: hidden;\">\n    Water Heat\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":180,"y":2440,"wires":[[]]},{"id":"5e2d008d.44e2b","type":"ui_text","z":"de0536ab.6a9728","group":"8567c648.c51bf8","order":16,"width":"3","height":"1","name":"Ceiling Fan Label /ceilfan/ceilfan_label/+pred/","label":"Ceiling Fan: ","format":"{{msg.payload}}","layout":"col-center","x":3780,"y":1880,"wires":[]},{"id":"a47b9c78.424ba","type":"ui_button","z":"de0536ab.6a9728","name":"All On","group":"6900161b.fbecc8","order":2,"width":"2","height":"1","label":"All On","color":"","icon":"","payload":"2","payloadType":"str","topic":"master","x":1690.2857360839844,"y":199.5712890625,"wires":[["cac073ca.22154"]]},{"id":"db46c842.450ca8","type":"ui_text","z":"de0536ab.6a9728","group":"4fd30f6d.93146","order":2,"width":"3","height":"1","name":"water-pump 3 spaces","label":"","format":"{{msg.payload}}","layout":"row-spread","x":720,"y":2440,"wires":[]},{"id":"8e7f1fe2.f669d","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":570,"y":3840,"wires":[["7bb1514c.33b45"]]},{"id":"3e5bc4d7.8617cc","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":690,"y":3920,"wires":[["ec67ff03.4e6ec"]]},{"id":"806f3c61.170f5","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":570,"y":3700,"wires":[["716b1050.7d9ff","7b8ccade.bac674"]]},{"id":"7bc72b70.e50004","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":570,"y":3660,"wires":[["40aa0f29.80681","7b8ccade.bac674"]]},{"id":"7808a085.c445","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":570,"y":3620,"wires":[["55f25b97.937a04","7b8ccade.bac674"]]},{"id":"3a9f5873.670598","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3510,"y":1400,"wires":[["fcafb8bd.947fa8"]]},{"id":"12c6aaa1.901f75","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3510,"y":1440,"wires":[["277c858b.5f2faa"]]},{"id":"166ac53.7d2ea3b","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3510,"y":1580,"wires":[["9b1814e2.b961d8"]]},{"id":"caaa6bb2.4a1eb8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3510,"y":1720,"wires":[["d69372a4.723b2"]]},{"id":"e4ca4c5e.29128","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3510,"y":1880,"wires":[["5e2d008d.44e2b"]]},{"id":"4262cad8.c391a4","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3510,"y":1920,"wires":[["bcf76433.3a91e8"]]},{"id":"9ecfe871.2fab78","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":827,"y":4541,"wires":[["cb7601f7.5348d"]]},{"id":"cb0c802f.788d6","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"CP/TANK_STATUS/LPG","qos":"2","broker":"689fc56b.144cec","x":300,"y":3740,"wires":[["6a53ed20.0d6a84"]]},{"id":"2ee4c0f7.20203","type":"ui_text","z":"de0536ab.6a9728","group":"31e63998.e49f26","order":5,"width":"6","height":"1","name":"LPG /lpg/+pred/","label":"Propane","format":"{{msg.payload}}%","layout":"col-center","x":760,"y":3740,"wires":[]},{"id":"6a53ed20.0d6a84","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":570,"y":3740,"wires":[["2ee4c0f7.20203","7b8ccade.bac674"]]},{"id":"e59ac542.75fb08","type":"template","z":"de0536ab.6a9728","name":"2015-2018 Lock Command","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{topic}} {{payload}}","x":1920,"y":1000,"wires":[["ff33bb6c.42be28"]]},{"id":"edec82c4.5dee","type":"template","z":"de0536ab.6a9728","name":"ceiling_fan_template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{topic}} {{payload}}","x":3980,"y":1920,"wires":[["1e901a10.2b1456"]]},{"id":"f92155e2.b50b68","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_20/+pred/","label":"Accent","group":"8567c648.c51bf8","order":7,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"20_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1400,"wires":[["14680a97.4f7d25"]]},{"id":"ad8c1372.d61","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_18/+pred/","label":"TV Accent","group":"29879dab.7af262","order":8,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"18_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1320,"wires":[["14680a97.4f7d25"]]},{"id":"9e734d96.1dcfa","type":"file function","z":"de0536ab.6a9728","name":"ceiling_fan_decode","filename":".node-red/js/ceiling_fan_decode.js","reloadfile":false,"outputs":"2","x":3330,"y":1900,"wires":[["e4ca4c5e.29128"],["4262cad8.c391a4"]]},{"id":"2f748e39.e81d72","type":"file function","z":"de0536ab.6a9728","name":"decode_fan.js","filename":".node-red/js/decode_fan.js","reloadfile":false,"outputs":1,"x":3340,"y":1400,"wires":[["3a9f5873.670598"]]},{"id":"688eabb3.a9d274","type":"file function","z":"de0536ab.6a9728","name":"decode_vent.js","filename":".node-red/js/decode_vent.js","reloadfile":false,"outputs":1,"x":3340,"y":1440,"wires":[["12c6aaa1.901f75"]]},{"id":"a62b71c3.fcc3e","type":"file function","z":"de0536ab.6a9728","name":"decode_vent.js","filename":".node-red/js/decode_vent.js","reloadfile":false,"outputs":1,"x":3340,"y":1580,"wires":[["166ac53.7d2ea3b"]]},{"id":"b76056f3.d47798","type":"file function","z":"de0536ab.6a9728","name":"decode_vent.js","filename":".node-red/js/decode_vent.js","reloadfile":false,"outputs":1,"x":3340,"y":1720,"wires":[["caaa6bb2.4a1eb8"]]},{"id":"85ea9729.bd8688","type":"file function","z":"de0536ab.6a9728","name":"genset_safety","filename":".node-red/js/genset_safety.js","reloadfile":false,"outputs":1,"x":1241.8572006225586,"y":4431.142890930176,"wires":[["4eb82aa1.e05fc4"]]},{"id":"701f3685.bbbd38","type":"file function","z":"de0536ab.6a9728","name":"genset_countdown","filename":".node-red/js/genset_countdown.js","reloadfile":false,"outputs":"2","x":628.5714111328125,"y":4407.714597702026,"wires":[["5514d0db.9c3f3"],["3dd6b991.08eef6","93796841.9239b8"]]},{"id":"3dd6b991.08eef6","type":"file function","z":"de0536ab.6a9728","name":"genset_clear_buffer","filename":".node-red/js/genset_clear_buffer.js","reloadfile":false,"outputs":1,"x":637.5714372907366,"y":4540.428774152482,"wires":[["9ecfe871.2fab78"]]},{"id":"82ba0d9f.648eb","type":"change","z":"2f811349.94c06c","name":"Alert!","rules":[{"t":"set","p":"topic","pt":"msg","to":"Alert!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":330,"y":320,"wires":[["3615177f.af8058"]]},{"id":"f8900a90.013218","type":"file function","z":"2f811349.94c06c","name":"uptime_parse","filename":".node-red/js/uptime_parse.js","reloadfile":false,"outputs":1,"x":710,"y":2980,"wires":[["5e4db807.2b4348"]]},{"id":"30e0f096.64b46","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_0_day_up/","group":"e9523e77.03c04","order":2,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":2680,"wires":[["2241feba.4026b2"]]},{"id":"c9536002.7ea8f","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_0_day_down/","group":"e9523e77.03c04","order":4,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":2720,"wires":[["2241feba.4026b2"]]},{"id":"8496be4.ecc5c4","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_0_label/","order":1,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2960,"y":2640,"wires":[[]]},{"id":"c320e404.b1fde8","type":"ui_template","z":"de0536ab.6a9728","group":"ff64ed84.f36a8","name":"Awning Note /awning-message/","order":1,"width":"6","height":"2","format":"<div>\n<p>\n    Press a button to start the awning movement.\n    Optionally press the same button again to\n    stop awning movement early.\n</p>\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":4090,"y":2640,"wires":[[]]},{"id":"b7e1e6f9.583748","type":"ui_button","z":"de0536ab.6a9728","name":"TV Up","group":"ab88210.09dcbe","order":1,"width":"3","height":"1","passthru":false,"label":"","color":"#fff","bgcolor":"","icon":"fa-arrow-up fa-lg","payload":"u","payloadType":"str","topic":"0","x":1690,"y":380,"wires":[["cbe64d8e.dea6e"]]},{"id":"bb52eb9f.6c5368","type":"ui_button","z":"de0536ab.6a9728","name":"TV Down","group":"ab88210.09dcbe","order":2,"width":"3","height":"1","passthru":false,"label":"","color":"#fff","bgcolor":"","icon":"fa-arrow-down fa-lg","payload":"d","payloadType":"str","topic":"0","x":1680,"y":420,"wires":[["cbe64d8e.dea6e"]]},{"id":"cbe64d8e.dea6e","type":"template","z":"de0536ab.6a9728","name":"lift_template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{topic}} {{payload}}","x":1870,"y":400,"wires":[["6bc61c37.793e74"]]},{"id":"6bc61c37.793e74","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/lift.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"lift.pl /tvlift/+pred/","x":2090,"y":400,"wires":[[],[],[]]},{"id":"85c2aa4c.3f9548","type":"mqtt in","z":"de0536ab.6a9728","name":"/galley-lid-mqtt/","topic":"RVC/DC_DIMMER_COMMAND_2/26","qos":"0","broker":"689fc56b.144cec","x":2780,"y":1440,"wires":[["acc55b08.5d22b8"]]},{"id":"f8f8ea2d.ff5df8","type":"mqtt in","z":"de0536ab.6a9728","name":"/mid-lid-mqtt/","topic":"RVC/DC_DIMMER_COMMAND_2/30","qos":"0","broker":"689fc56b.144cec","x":2770,"y":1580,"wires":[["2704f048.9ed91"]]},{"id":"5fa91245.c72fec","type":"mqtt in","z":"de0536ab.6a9728","name":"/rear-lid-mqtt/","topic":"RVC/DC_DIMMER_COMMAND_2/33","qos":"0","broker":"689fc56b.144cec","x":2770,"y":1720,"wires":[["8670021b.dd697"]]},{"id":"6d3e3b95.71e244","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"CP/PARKBRAKE","qos":"2","broker":"689fc56b.144cec","x":280,"y":3880,"wires":[["8f196b7b.8d9e88"]]},{"id":"8f196b7b.8d9e88","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":570,"y":3880,"wires":[["947e70ed.1e23f"]]},{"id":"947e70ed.1e23f","type":"ui_text","z":"de0536ab.6a9728","group":"31e63998.e49f26","order":9,"width":"3","height":"1","name":"Park Brake /parkbrake/+pred/","label":"Park Brake:","format":"{{msg.payload}}","layout":"col-center","x":810,"y":3880,"wires":[]},{"id":"56ead29b.c49e5c","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/ATS_AC_STATUS_1/#","qos":"2","broker":"689fc56b.144cec","x":230,"y":3360,"wires":[["a5de46ce.ef2d78"]]},{"id":"a5de46ce.ef2d78","type":"json","z":"de0536ab.6a9728","name":"","x":450,"y":3360,"wires":[["3055de1.605aa22","bd32ff66.b734f"]]},{"id":"3055de1.605aa22","type":"switch","z":"de0536ab.6a9728","name":"Leg Switch","property":"payload.leg","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":630,"y":3360,"wires":[["942086a6.5d3f38","8a1ed578.d66b28"],["a20e0de6.ac5a7","1cf1ca6a.a51be6"]]},{"id":"db7286fb.782ae8","type":"ui_text","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","order":7,"width":"3","height":"1","name":"ATS Current Leg 1 /ats/+pred/","label":"Leg 1:","format":"{{msg.payload}} A","layout":"row-spread","x":1270,"y":3300,"wires":[]},{"id":"a5359cfa.df223","type":"ui_text","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","order":9,"width":"3","height":"1","name":"ATS Current Leg 2 /ats/+pred/","label":"Leg 2:","format":"{{msg.payload}} A","layout":"row-spread","x":1270,"y":3380,"wires":[]},{"id":"ff57f102.22502","type":"ui_template","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","name":"120V Power Source /ats/+pred/","order":6,"width":"6","height":"1","format":"<!DOCTYPE html>\n<div style=\"height: 10px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 10px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    120V Power: <b>{{msg.payload}}</b>\n  </span>\n</div>\n<div style=\"height: 8px;\">&nbsp;</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1270,"y":3260,"wires":[[]]},{"id":"9aa7ca8.86ce238","type":"ui_text","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","order":8,"width":"3","height":"1","name":"ATS Voltage Leg 1 /ats/+pred/","label":"","format":"{{msg.payload}} V","layout":"row-left","x":1270,"y":3340,"wires":[]},{"id":"5864675d.dabe98","type":"ui_text","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","order":10,"width":"3","height":"1","name":"ATS Voltage Leg 2 /ats/+pred/","label":"","format":"{{msg.payload}} V","layout":"row-left","x":1270,"y":3420,"wires":[]},{"id":"3f5d90dd.e7ea1","type":"ui_template","z":"de0536ab.6a9728","group":"31e63998.e49f26","name":"Chassis Label /chassislabel/","order":7,"width":"6","height":"1","format":"<!DOCTYPE html>\n<div style=\"height: 10px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 10px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    Chassis: <b>{{msg.payload.source}}</b>\n  </span>\n</div>\n<div style=\"height: 8px;\">&nbsp;</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":3800,"wires":[[]]},{"id":"2e11c093.21f74","type":"comment","z":"de0536ab.6a9728","name":"CoachProxy Template","info":"","x":120,"y":40,"wires":[]},{"id":"9915ff11.1a39e","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"instance","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3130,"y":1400,"wires":[["2f748e39.e81d72"]]},{"id":"3e4eb113.575bae","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"instance","pt":"msg","to":"0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3130,"y":1440,"wires":[["688eabb3.a9d274"]]},{"id":"22a514b.e06f7ec","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"instance","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3130,"y":1580,"wires":[["a62b71c3.fcc3e"]]},{"id":"a2b5b73d.ffdce8","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"instance","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3130,"y":1720,"wires":[["b76056f3.d47798"]]},{"id":"36fc148.dd7edec","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/5","qos":"0","broker":"689fc56b.144cec","x":150,"y":480,"wires":[["5c1580d5.6109a"]]},{"id":"f42c55e.2284ca8","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_5/+pred/","label":"Mid hall","group":"1733d850.9fd7d8","order":7,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"5_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":880,"y":460,"wires":[["14680a97.4f7d25"]]},{"id":"e09b4dd9.8c045","type":"ui_slider","z":"de0536ab.6a9728","name":"/brightness_5/brightness/","label":"","group":"1733d850.9fd7d8","order":8,"width":"3","height":"1","passthru":false,"topic":"5_brightness","min":"1","max":"100","step":"","x":850,"y":500,"wires":[["14680a97.4f7d25"]]},{"id":"84a2eed7.71801","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_92/+pred/","label":"Porch","group":"a2df36fa.e5fd58","order":"9020","width":"3","height":"1","passthru":false,"decouple":"true","topic":"92_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2240,"wires":[["14680a97.4f7d25"]]},{"id":"77775e27.2626c","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_75/+pred/","label":"Door","group":"a2df36fa.e5fd58","order":"9010","width":"3","height":"1","passthru":false,"decouple":"true","topic":"75_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2000,"wires":[["14680a97.4f7d25"]]},{"id":"3102fd86.7d6602","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_73/+pred/","label":"Awning","group":"a2df36fa.e5fd58","order":"9040","width":"3","height":"1","passthru":false,"decouple":"true","topic":"73_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1960,"wires":[["14680a97.4f7d25"]]},{"id":"a99b41e0.33e75","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_91/+pred/","label":"Road","group":"a2df36fa.e5fd58","order":"9030","width":"3","height":"1","passthru":false,"decouple":"true","topic":"91_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2200,"wires":[["14680a97.4f7d25"]]},{"id":"e2ff22f4.eaa67","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/91","qos":"0","broker":"689fc56b.144cec","x":160,"y":2200,"wires":[["844e050.b35d3f8"]]},{"id":"c45e191e.b06158","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/92","qos":"0","broker":"689fc56b.144cec","x":160,"y":2240,"wires":[["79c3601d.1613b"]]},{"id":"2e6c4412.6c6cec","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/75","qos":"0","broker":"689fc56b.144cec","x":160,"y":2000,"wires":[["11d72ba1.315694"]]},{"id":"6b078474.e4fafc","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/73","qos":"0","broker":"689fc56b.144cec","x":160,"y":1960,"wires":[["d3ed4027.ed513"]]},{"id":"d785fc16.8f9db","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_85/+pred/","label":"Under Coach","group":"a2df36fa.e5fd58","order":"9040","width":"3","height":"1","passthru":false,"decouple":"true","topic":"85_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2080,"wires":[["14680a97.4f7d25"]]},{"id":"e03c8cb9.9d18c","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/85","qos":"0","broker":"689fc56b.144cec","x":160,"y":2080,"wires":[["ca9d1b0.2a47ee8"]]},{"id":"9470d347.feff4","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_86/+pred/","label":"Windshield","group":"a2df36fa.e5fd58","order":"9040","width":"3","height":"1","passthru":false,"decouple":"true","topic":"86_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2120,"wires":[["14680a97.4f7d25"]]},{"id":"570d1247.2be25c","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/86","qos":"0","broker":"689fc56b.144cec","x":160,"y":2120,"wires":[["3068a256.90901e"]]},{"id":"29fde7d5.d69108","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/vent_fan_new.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"vent_fan_new.pl","x":4260,"y":1520,"wires":[[],[],[]]},{"id":"2241feba.4026b2","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/window_shade.pl ","addpay":true,"append":"","useSpawn":"","name":"","x":3870,"y":3500,"wires":[[],[],[]]},{"id":"7130fef5.a8939","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1050,"y":3340,"wires":[["9aa7ca8.86ce238"]]},{"id":"57925a0a.6f5564","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1050,"y":3380,"wires":[["a5359cfa.df223"]]},{"id":"81438350.41266","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1050,"y":3300,"wires":[["db7286fb.782ae8"]]},{"id":"bfa5c6d3.2943e8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1050,"y":3420,"wires":[["5864675d.dabe98"]]},{"id":"1b0e524c.b502be","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1050,"y":3260,"wires":[["ff57f102.22502"]]},{"id":"8d364253.add2f","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/THERMOSTAT_AMBIENT_STATUS/#","qos":"0","broker":"689fc56b.144cec","x":2640,"y":140,"wires":[["d823d69c.5ef798"]]},{"id":"d823d69c.5ef798","type":"json","z":"de0536ab.6a9728","name":"","x":2890,"y":140,"wires":[["28f955b1.fcd18a"]]},{"id":"ef0f5174.46ceb","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3350,"y":120,"wires":[["3f8bb07c.883fb"]]},{"id":"ed6705b4.a9ccd8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3350,"y":160,"wires":[["77307b4c.421f74"]]},{"id":"3f8bb07c.883fb","type":"ui_text","z":"de0536ab.6a9728","group":"1541cbc0.49eaa4","order":0,"width":"3","height":"1","name":"Wet Bay Temperature /exttemp/+pred/","label":"Wet Bay","format":"{{msg.payload.ambient_temp}}","layout":"col-center","x":3590.5,"y":119,"wires":[]},{"id":"77307b4c.421f74","type":"ui_text","z":"de0536ab.6a9728","group":"1541cbc0.49eaa4","order":0,"width":"3","height":"1","name":"Generator Bay Temperature /exttemp/+pred/","label":"Generator Bay","format":"{{msg.payload.ambient_temp}}","layout":"col-center","x":3610,"y":160,"wires":[]},{"id":"683f3e41.a1632","type":"ui_chart","z":"de0536ab.6a9728","name":"Tanks Bar Chart","group":"31e63998.e49f26","order":6,"width":0,"height":0,"label":"","chartType":"bar","legend":"false","xformat":"HH:mm:ss","interpolate":"linear","nodata":"","dot":false,"ymin":"0","ymax":"100","removeOlder":1,"removeOlderPoints":"","removeOlderUnit":"3600","cutout":0,"useOneColor":false,"colors":["#1f77b4","#999999","#424242","#941100","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5"],"useOldStyle":false,"outputs":2,"x":980,"y":3560,"wires":[[],[]]},{"id":"35cb3e56.531e42","type":"ui_switch","z":"de0536ab.6a9728","name":"Engine Pre-Heat /preheat_out/+pred/","label":"Engine Pre-Heat","group":"4fd30f6d.93146","order":7,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"131_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":830,"y":2600,"wires":[["14680a97.4f7d25"]]},{"id":"4c2f5424.6ac62c","type":"mqtt in","z":"de0536ab.6a9728","name":"/preheat_in/","topic":"RVC/DC_DIMMER_STATUS_3/131","qos":"0","broker":"689fc56b.144cec","x":110,"y":2600,"wires":[["3cd06ce5.882324"]]},{"id":"92e057d6.752228","type":"comment","z":"de0536ab.6a9728","name":"Window Shades","info":"","x":2960,"y":2600,"wires":[]},{"id":"ee42f061.2cf6b","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_76/+pred/","label":"Door","group":"a2df36fa.e5fd58","order":"9010","width":"3","height":"1","passthru":false,"decouple":"true","topic":"76_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2040,"wires":[["14680a97.4f7d25"]]},{"id":"e6e72d34.a482a","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/76","qos":"0","broker":"689fc56b.144cec","x":160,"y":2040,"wires":[["aea603c3.7808a"]]},{"id":"83589b18.772bb8","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_87/+pred/","label":"Door","group":"a2df36fa.e5fd58","order":"9010","width":"3","height":"1","passthru":false,"decouple":"true","topic":"87_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2160,"wires":[["14680a97.4f7d25"]]},{"id":"567b9668.31a9d8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/87","qos":"0","broker":"689fc56b.144cec","x":160,"y":2160,"wires":[["5bb97d3f.0293f4"]]},{"id":"8beaf8be.075398","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_23/+pred/","label":"Accent","group":"1733d850.9fd7d8","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"23_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1520,"wires":[["14680a97.4f7d25"]]},{"id":"bb5fdecd.e25e1","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/23","qos":"0","broker":"689fc56b.144cec","x":160,"y":1520,"wires":[["d3c5147c.37a718"]]},{"id":"8c994578.cc5da8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/24","qos":"0","broker":"689fc56b.144cec","x":160,"y":1560,"wires":[["7cdc1a35.8500c4"]]},{"id":"2e07d034.5498b","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_24/+pred/","label":"Accent","group":"8567c648.c51bf8","order":8,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"24_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1560,"wires":[["14680a97.4f7d25"]]},{"id":"dc1116fd.4394c8","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_34/+pred/","label":"Accent","group":"1733d850.9fd7d8","order":5,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"34_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1820,"wires":[["14680a97.4f7d25"]]},{"id":"6670e329.6648cc","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/34","qos":"0","broker":"689fc56b.144cec","x":160,"y":1820,"wires":[["bf99d6b2.b74208"]]},{"id":"71dd8598.067d4c","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/35","qos":"0","broker":"689fc56b.144cec","x":160,"y":1860,"wires":[["d459a58f.fe5978"]]},{"id":"8233f12b.bb04c","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_35/+pred/","label":"Accent","group":"8567c648.c51bf8","order":13,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"35_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1860,"wires":[["14680a97.4f7d25"]]},{"id":"b78a9889.11a128","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/36","qos":"0","broker":"689fc56b.144cec","x":160,"y":1900,"wires":[["15d97c68.43a274"]]},{"id":"9f26fd55.9ff5","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_36/+pred/","label":"Accent","group":"8567c648.c51bf8","order":14,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"36_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1900,"wires":[["14680a97.4f7d25"]]},{"id":"595cdee4.8801b","type":"ui_text","z":"de0536ab.6a9728","group":"8567c648.c51bf8","order":15,"width":"3","height":"1","name":"Ceiling Fan Spacer /ceilfan/ceilfan_spacer/","label":"","format":"{{msg.payload}}","layout":"row-center","x":3770,"y":1840,"wires":[]},{"id":"778c9d64.762f54","type":"inject","z":"de0536ab.6a9728","name":"Tank Chart Setup","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":"0.1","x":290,"y":3560,"wires":[["626a089a.124ec8"]]},{"id":"626a089a.124ec8","type":"function","z":"de0536ab.6a9728","name":"Tank Chart Setup","func":"var msgs = [\n    {topic: 'Fresh', payload: 0},\n    {topic: 'Grey', payload: 0},\n    {topic: 'Black', payload: 0},\n];\n\nreturn [msgs];","outputs":1,"noerr":0,"x":530,"y":3560,"wires":[["7b8ccade.bac674"]]},{"id":"f42c1bc3.a0dd88","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"instance","pt":"msg","to":"low","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3110,"y":1880,"wires":[["9e734d96.1dcfa"]]},{"id":"cffad2b3.a91b1","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"instance","pt":"msg","to":"high","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3110,"y":1920,"wires":[["9e734d96.1dcfa"]]},{"id":"5971eac5.f50ae4","type":"comment","z":"de0536ab.6a9728","name":"Bedroom Ceiling Fan : Some of these nodes will be edited during auto-configuration.","info":"","x":2990,"y":1840,"wires":[]},{"id":"5f227393.f2deec","type":"comment","z":"de0536ab.6a9728","name":"Ceiling Vents and Fans : Some of these nodes will be edited during auto-configuration.","info":"","x":3020,"y":1360,"wires":[]},{"id":"658bf0c8.4b496","type":"ui_template","z":"de0536ab.6a9728","group":"4fd30f6d.93146","name":"Aqua-Hot Label /aquahot-label/","order":4,"width":"","height":"","format":"<!DOCTYPE html>\n<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;overflow: hidden;\">\n    Aqua-Hot\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":470,"y":2440,"wires":[[]]},{"id":"1f054c4c.3a9f54","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/ac_load.pl","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"ac_load.pl /elecheat_out_ac/","x":1360,"y":2560,"wires":[[],[],[]]},{"id":"abc823a2.e17cb","type":"comment","z":"2f811349.94c06c","name":"System Tab","info":"","x":720,"y":2860,"wires":[]},{"id":"f5c52882.1a7518","type":"function","z":"3c3d44e8.9e19ac","name":"Save Option","func":"// Save the user's selection for future use\nflow.set(msg.topic, msg.payload); ","outputs":1,"noerr":0,"x":1150,"y":760,"wires":[[]]},{"id":"10f0f89e.eac807","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Heated Floors","group":"d8f9c515.f70708","order":3,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"floorheat","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":780,"y":640,"wires":[["f5c52882.1a7518"]]},{"id":"dc221c72.535bc","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Aqua-Hot","group":"d8f9c515.f70708","order":2,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"aquahot","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":760,"y":580,"wires":[["f5c52882.1a7518"]]},{"id":"5a4b8f2d.d7cfa","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Third Air Conditioner Zone","group":"d8f9c515.f70708","order":8,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"thirdtstat","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":820,"y":980,"wires":[["f5c52882.1a7518"]]},{"id":"513d0daf.587e94","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Ceiling Fan","group":"d8f9c515.f70708","order":4,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"ceilfan","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":770,"y":700,"wires":[["f5c52882.1a7518"]]},{"id":"f289bdf4.0bebf","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"TV Lift","group":"d8f9c515.f70708","order":5,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"tvlift","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":750,"y":780,"wires":[["f5c52882.1a7518"]]},{"id":"57b59fe8.ab47","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Bus Undercoach Light (2018+)","group":"d8f9c515.f70708","order":6,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"busundercoach","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":830,"y":840,"wires":[["f5c52882.1a7518"]]},{"id":"50eb23ec.5dbbcc","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Second Furnace Zone","group":"d8f9c515.f70708","order":9,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"secondfurnace","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":800,"y":1060,"wires":[["f5c52882.1a7518"]]},{"id":"68a958e0.872568","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Heated Floors","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.floorheat = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":640,"wires":[["10f0f89e.eac807"]]},{"id":"d7573bde.536268","type":"function","z":"3c3d44e8.9e19ac","name":"Set Aqua-Hot","func":"// Populate the \"Aqua-Hot\" toggle based on the chosen model.\n\nvar aquahot_standard = ['Allegro_Bus', 'Zephyr'];\nvar msg = { topic: '', payload: '' };\n\nif (flow.get('model')) {\n    if (aquahot_standard.includes(flow.get('model'))) {\n        msg.payload = true;\n    }\n} else {\n    msg = null;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":600,"wires":[["dc221c72.535bc"]]},{"id":"dd6a12c5.4af2","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Aquahot","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.aquahot = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":560,"wires":[["dc221c72.535bc"]]},{"id":"96dd007.988a9","type":"function","z":"3c3d44e8.9e19ac","name":"Set Third Tstat","func":"// Populate the \"Number of Thermostats\" toggle based on the chosen model.\n\nvar third_zone = ['Phaeton', 'Allegro_Bus', 'Zephyr'];\nvar msg = { topic: '', payload: '', enabled: true };\n\nif (flow.get('model')) {\n    if (third_zone.includes(flow.get('model'))) {\n        msg.payload = true;\n    }\n}\n\nif (flow.get('year') < 2018 && flow.get('model').substr(0,8) != 'VanLeigh') {\n    msg.enabled = false;\n    msg.payload = false;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":1000,"wires":[["5a4b8f2d.d7cfa"]]},{"id":"e89c7079.4f15","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Third Tstat","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.thirdtstat = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":960,"wires":[["5a4b8f2d.d7cfa"]]},{"id":"5440156c.0f4b8c","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Ceiling Fan","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.ceilfan = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":680,"wires":[["513d0daf.587e94"]]},{"id":"c3727eff.9918a","type":"function","z":"3c3d44e8.9e19ac","name":"Set Ceiling Fan","func":"// Populate the \"Ceiling Fan\" toggle based on the chosen model.\n\nvar ceilfan_standard = ['Phaeton', 'Allegro_Bus', 'Zephyr'];\nvar msg = { topic: '', payload: '' };\n\nif (flow.get('model')) {\n    if (ceilfan_standard.includes(flow.get('model'))) {\n        msg.payload = true;\n    }\n} else {\n    msg = null;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":500,"y":720,"wires":[["513d0daf.587e94"]]},{"id":"f851e0de.cf2fe","type":"function","z":"3c3d44e8.9e19ac","name":"Set TV Lift","func":"// Populate the \"TV Lift\" toggle based on the chosen model.\n\nvar tvlift = ['37_BH', '40_IH', '44_OH', '45_MP', '45_OPP', '45_PZ'];\nvar msg = { topic: '', payload: '' };\n\nmsg.payload = tvlift.includes(flow.get('floorplan'));\n\nreturn msg;","outputs":1,"noerr":0,"x":510,"y":800,"wires":[["f289bdf4.0bebf"]]},{"id":"82a69973.878f58","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved TV Lift","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.tvlift = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":760,"wires":[["f289bdf4.0bebf"]]},{"id":"4151b078.0c975","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Under Light","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.busundercoach = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":840,"wires":[["57b59fe8.ab47"]]},{"id":"f9e1288.52fbcd8","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Second Furnace","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.secondfurnace = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":1040,"wires":[["50eb23ec.5dbbcc"]]},{"id":"75a77281.4f084c","type":"link in","z":"3c3d44e8.9e19ac","name":"Stored Configs Out","links":["c0467ee6.8e4f4"],"x":95,"y":440,"wires":[["54a8e56d.e3f52c","dd6a12c5.4af2","68a958e0.872568","5440156c.0f4b8c","82a69973.878f58","e89c7079.4f15","bc9e2e4.0bd30d","4151b078.0c975","f9e1288.52fbcd8","54fd5607.f008d8","25c1d822.7619b8","a0d4e33a.1a677","7db7b038.e704","d39bb051.31f68","f6cfad56.65a89"]]},{"id":"9793a9db.be5608","type":"link in","z":"3c3d44e8.9e19ac","name":"Coach Config Changed - Out","links":["c8bc164d.eca9e8"],"x":95,"y":740,"wires":[["d7573bde.536268","96dd007.988a9","d025e936.344e48","f851e0de.cf2fe","c3727eff.9918a","d0d39011.0203","a84a130c.1d6bb","999553c2.80442"]]},{"id":"54a8e56d.e3f52c","type":"delay","z":"3c3d44e8.9e19ac","name":"","pauseType":"delay","timeout":"750","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":290,"y":480,"wires":[["94a5ea9e.fe7328"]]},{"id":"3aac05f3.f3a58a","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Model","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.model","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":420,"wires":[["f653d965.b19d78"]]},{"id":"40ee145e.94997c","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Year","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.year","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":360,"wires":[["e8d22d9.e7b39d"]]},{"id":"bc9e2e4.0bd30d","type":"change","z":"3c3d44e8.9e19ac","name":"Buttons Enabled?","rules":[{"t":"set","p":"enabled","pt":"msg","to":"payload.floorplan != null","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":1560,"wires":[["6d044f2c.488da"]]},{"id":"d025e936.344e48","type":"change","z":"3c3d44e8.9e19ac","name":"Buttons Enabled?","rules":[{"t":"set","p":"enabled","pt":"msg","to":"$flowContext('floorplan') != ''","tot":"jsonata"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":1600,"wires":[["6d044f2c.488da"]]},{"id":"94a5ea9e.fe7328","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Floor Plan","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.floorplan","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":480,"wires":[["5d57367e.5f7d68"]]},{"id":"f653d965.b19d78","type":"ui_dropdown","z":"3c3d44e8.9e19ac","name":"Model Menu","label":"","place":"Coach model","group":"de55bc8e.c280f","order":4,"width":"0","height":"0","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"model","x":770,"y":420,"wires":[["abf37f37.94493"]]},{"id":"e8d22d9.e7b39d","type":"ui_dropdown","z":"3c3d44e8.9e19ac","name":"Year Menu","label":"","place":"Coach year","group":"de55bc8e.c280f","order":3,"width":"0","height":"0","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"year","x":770,"y":360,"wires":[["58a7655c.ae076c"]]},{"id":"6d044f2c.488da","type":"ui_button","z":"3c3d44e8.9e19ac","name":"Save and Install","group":"de32d7b1.5f27b8","order":2,"width":0,"height":0,"passthru":false,"label":"Save and Install","color":"","bgcolor":"","icon":"fa-check","payload":"","payloadType":"str","topic":"save","x":790,"y":1580,"wires":[["3e36b39b.8769dc","39ad94bf.3f34dc","6e7bced4.53589","5224340c.9266ec"]]},{"id":"5d57367e.5f7d68","type":"ui_dropdown","z":"3c3d44e8.9e19ac","name":"Floor Plan Menu","label":"","place":"Coach floor plan","group":"de55bc8e.c280f","order":5,"width":"0","height":"0","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"floorplan","x":780,"y":480,"wires":[["59d32779.2b55d8"]]},{"id":"abf37f37.94493","type":"change","z":"3c3d44e8.9e19ac","name":"Save Model","rules":[{"t":"set","p":"model","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":420,"wires":[["c8bc164d.eca9e8","5ac4ff8c.4dbbc"]]},{"id":"58a7655c.ae076c","type":"change","z":"3c3d44e8.9e19ac","name":"Save Year","rules":[{"t":"set","p":"year","pt":"flow","to":"$number(msg.payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":360,"wires":[["c8bc164d.eca9e8","725401a.e3583"]]},{"id":"3e36b39b.8769dc","type":"function","z":"3c3d44e8.9e19ac","name":"Save to Database","func":"// Save the global config settings to the database\n\nvar msgs = [];  // An array of database query messages\n\nfor (var item of ['year', 'model', 'floorplan', 'aquahot', 'floorheat', 'ceilfan', 'tvlift', 'thirdtstat', 'secondfurnace', 'midheat', 'rearheat', 'busundercoach', 'powerbed', 'shades_interior']) {\n    var newmsg = {};\n    newmsg.topic = 'INSERT OR REPLACE INTO configs (key, value) VALUES(?, ?)';\n    newmsg.payload = [item, String(flow.get(item))];\n    msgs.push(newmsg);\n}\n\nreturn [msgs, {payload: 'Saving changes...'}];","outputs":2,"noerr":0,"x":1070,"y":1560,"wires":[["fab630d7.b7dc9"],["e9776bb7.1130b8"]],"outputLabels":["array of queries","feedback message"]},{"id":"39ad94bf.3f34dc","type":"delay","z":"3c3d44e8.9e19ac","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1040,"y":1600,"wires":[["3ac80c52.d7f5c4","c8a18836.746a78"]]},{"id":"6e7bced4.53589","type":"change","z":"3c3d44e8.9e19ac","name":"Disable Button","rules":[{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":1660,"wires":[["6d044f2c.488da"]]},{"id":"5224340c.9266ec","type":"delay","z":"3c3d44e8.9e19ac","name":"","pauseType":"delay","timeout":"30","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":630,"y":1700,"wires":[["b7b5f518.1c6de8","ea7dcc30.3de4d"]]},{"id":"b7b5f518.1c6de8","type":"change","z":"3c3d44e8.9e19ac","name":"Enable Button","rules":[{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"},{"t":"delete","p":"payload","pt":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1700,"wires":[["6d044f2c.488da"]]},{"id":"59d32779.2b55d8","type":"function","z":"3c3d44e8.9e19ac","name":"Save Floor Plan","func":"// Save the user's selection for future use\nif (msg.payload !== '') {\n    flow.set('floorplan', msg.payload);\n    return msg;\n}","outputs":1,"noerr":0,"x":1000,"y":480,"wires":[["c8bc164d.eca9e8"]]},{"id":"c8bc164d.eca9e8","type":"link out","z":"3c3d44e8.9e19ac","name":"Coach Config Changed - In","links":["9793a9db.be5608","6ec94471.102c8c","c8c58e81.c105a"],"x":1135,"y":480,"wires":[]},{"id":"fab630d7.b7dc9","type":"sqlite","z":"3c3d44e8.9e19ac","mydb":"cacb1b98.3549b8","name":"","x":1340,"y":1540,"wires":[[]]},{"id":"e9776bb7.1130b8","type":"ui_text","z":"3c3d44e8.9e19ac","group":"de32d7b1.5f27b8","order":3,"width":0,"height":0,"name":"Feedback Text","label":"","format":"{{msg.payload}}","layout":"row-center","x":1670,"y":1560,"wires":[]},{"id":"3ac80c52.d7f5c4","type":"exec","z":"3c3d44e8.9e19ac","command":"/coachproxy/configurator/cp_config.pl --habridge","addpay":false,"append":"","useSpawn":"true","timer":"","oldrc":false,"name":"","x":1350,"y":1600,"wires":[[],[],[]]},{"id":"c8a18836.746a78","type":"change","z":"3c3d44e8.9e19ac","name":"Message: Building configuration...","rules":[{"t":"set","p":"payload","pt":"msg","to":"Building configuration...","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1360,"y":1640,"wires":[["e9776bb7.1130b8"]]},{"id":"ea7dcc30.3de4d","type":"change","z":"3c3d44e8.9e19ac","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":810,"y":1740,"wires":[["e9776bb7.1130b8"]]},{"id":"b4008f2e.05b46","type":"change","z":"3c3d44e8.9e19ac","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1420,"y":1460,"wires":[["e9776bb7.1130b8"]]},{"id":"f9af554f.aac328","type":"ui_ui_control","z":"3c3d44e8.9e19ac","name":"Update when tab is displayed","x":190,"y":160,"wires":[["b2d617ff.4100c8","d844ce6f.6a65"]]},{"id":"b2d617ff.4100c8","type":"template","z":"3c3d44e8.9e19ac","name":"Load Configs","field":"topic","fieldType":"msg","format":"handlebars","syntax":"plain","template":"select * from configs;","output":"str","x":440,"y":160,"wires":[["9474bfbe.873c7"]]},{"id":"9474bfbe.873c7","type":"sqlite","z":"3c3d44e8.9e19ac","mydb":"cacb1b98.3549b8","name":"coachproxy.sqlite","x":650,"y":160,"wires":[["2715d204.47bc8e"]]},{"id":"2715d204.47bc8e","type":"function","z":"3c3d44e8.9e19ac","name":"Parse Configs","func":"// msg.payload = msg.payload[0];\n// return msg;\n\nvar payload = {};\nfor (var i = 0; i < (msg.payload).length; i++) {\n    var key = msg.payload[i].key;\n    var val = msg.payload[i].value;\n    flow.set(key, val);\n    if (val !== '') {\n        payload[key] = val;\n    }\n}\n\nmsg.payload = payload;\nreturn msg;","outputs":1,"noerr":0,"x":860,"y":160,"wires":[["c0467ee6.8e4f4"]]},{"id":"c0467ee6.8e4f4","type":"link out","z":"3c3d44e8.9e19ac","name":"Stored Configs In","links":["75a77281.4f084c","a9afea44.76da08"],"x":995,"y":160,"wires":[]},{"id":"c645ac42.66a0c","type":"ui_template","z":"3c3d44e8.9e19ac","group":"de55bc8e.c280f","name":"CoachProxy Logo","order":1,"width":"6","height":"3","format":"<img src=\"CoachProxy_logo.jpg\">","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":490,"y":280,"wires":[[]]},{"id":"651db8c6.d7b4e8","type":"ui_template","z":"3c3d44e8.9e19ac","group":"d8f9c515.f70708","name":"Configuration Message","order":1,"width":"0","height":"0","format":"<div style=\"height: 150px;\">\n<p>\n    Next, confirm the configuration options below are\n    correct for your coach.\n</p>\n<p>\n    <br>\n    Some options are only relevant to specific years\n    (e.g. thermostats) or models (e.g. undercoach lights).\n</p>\n</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":810,"y":540,"wires":[[]]},{"id":"af53e418.67ee68","type":"ui_template","z":"3c3d44e8.9e19ac","group":"de55bc8e.c280f","name":"Welcome Message","order":2,"width":"0","height":"0","format":"<div style=\"height: 130px;\">\n<p>\n    Welcome to CoachProxyOS!\n</p>\n<p>\n    <br>\n    Please select your year, model, and floor plan\n    below to begin. You may need to scroll down\n    in the menu to find your model or floor plan.\n</p>\n</div>\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":490,"y":320,"wires":[[]]},{"id":"36c7993.4114066","type":"ui_template","z":"3c3d44e8.9e19ac","group":"de32d7b1.5f27b8","name":"Save and Install Message","order":1,"width":"0","height":"0","format":"<div style='height: 220px;'>\n<p>\n    When finished, use the \"Save and Install\" button\n    below to save your changes and re-configure\n    CoachProxyOS.\n</p>\n<p>\n    <br>\n    <b>Important</b>: Your web browser will disconnect momentarily while CoachProxyOS reloads. This re-configuration process will take approximately 30 seconds to complete.\n</p>\n</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":810,"y":1540,"wires":[[]]},{"id":"e6ed0095.bea9","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"GLOBAL/VER","qos":"0","broker":"689fc56b.144cec","x":720,"y":2940,"wires":[["349eaf77.fb5c1"]]},{"id":"68765f1c.86336","type":"sqlite","z":"2f811349.94c06c","mydb":"c2b41353.c92fd","name":"CoachProxy","x":890,"y":160,"wires":[["7acf2516.2fd1ec"]]},{"id":"da6cfaaa.1557e8","type":"inject","z":"2f811349.94c06c","name":"At launch","topic":"","payload":"0","payloadType":"num","repeat":"","crontab":"","once":true,"onceDelay":"","x":100,"y":80,"wires":[["eb8fef51.7368c"]]},{"id":"2a76f731.ada078","type":"template","z":"2f811349.94c06c","name":"Load settings2","field":"topic","fieldType":"msg","format":"handlebars","syntax":"plain","template":"select * from settings2;","output":"str","x":700,"y":160,"wires":[["68765f1c.86336"]]},{"id":"7acf2516.2fd1ec","type":"function","z":"2f811349.94c06c","name":"Store settings2","func":"for (var i = 0; i < (msg.payload).length; i++) {\n    var key = msg.payload[i].key;\n    var value = msg.payload[i].value;\n\n    // If a JSON string is passed in, parse it and save the resulting\n    // object into global context. Otherwise, just save the raw value.\n    if (typeof(value) == 'string' && (value.charAt(0) == '[' || value.charAt(0) == '{')) {\n        global.set('settings2.' + key, JSON.parse(value));\n    } else {\n        global.set('settings2.' + key, value);\n    }\n}\n\n// Returning NULL would terminate the flow, but other\n// nodes want to know when settings have been loaded.\nreturn {};","outputs":1,"noerr":0,"x":1080,"y":160,"wires":[["1a04f183.12f89e"]]},{"id":"4cf7dc39.4f54d4","type":"comment","z":"2f811349.94c06c","name":"settings2 database : Link here to save settings or be notified when settings are loaded","info":"","x":340,"y":40,"wires":[]},{"id":"c18067ef.af8b28","type":"function","z":"2f811349.94c06c","name":"Save settings2","func":"// Save the provided key and value to the settings2 DB table, and\n// update the settings2 global context.\nvar key = msg.topic;\nvar value = msg.payload;\n\n// If a JSON string is passed in, parse it and save the resulting\n// object into global context. Otherwise, just save the raw value.\nif (typeof(value) == 'string' && (value.charAt(0) == '[' || value.charAt(0) == '{')) {\n    global.set('settings2.' + key, JSON.parse(value));\n} else {\n    global.set('settings2.' + key, value);\n}\n\nvar newmsg = {};\nnewmsg.topic = 'INSERT OR REPLACE INTO settings2 (key, value) VALUES(?, ?)';\nnewmsg.payload = [key, String(value)];\n\nreturn newmsg;","outputs":1,"noerr":0,"x":700,"y":200,"wires":[["1a928530.b05e5b"]]},{"id":"1a928530.b05e5b","type":"sqlite","z":"2f811349.94c06c","mydb":"c2b41353.c92fd","name":"CoachProxy","x":890,"y":200,"wires":[["1a04f183.12f89e"]]},{"id":"1a04f183.12f89e","type":"link out","z":"2f811349.94c06c","name":"Settings2 has been loaded","links":["8a1f3ae4.1ea3a8","4482228e.ef73bc","23126449.a1f55c"],"x":1215,"y":200,"wires":[]},{"id":"3c54947a.496c9c","type":"link in","z":"2f811349.94c06c","name":"Save key/value to settings2","links":["ac7534c7.cd1918","53444718.65a778","cd3a135a.44941","916d86c0.2f21c8"],"x":535,"y":200,"wires":[["c18067ef.af8b28"]]},{"id":"b5330d27.11c4e","type":"comment","z":"2f811349.94c06c","name":"Send a message to GLOBAL/MESSAGE to display a pop-up alert","info":"","x":270,"y":280,"wires":[]},{"id":"3615177f.af8058","type":"ui_toast","z":"2f811349.94c06c","position":"top right","displayTime":"5","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"","name":"","x":530,"y":320,"wires":[]},{"id":"6457f9cf.7eec18","type":"mqtt in","z":"3c3d44e8.9e19ac","name":"","topic":"GLOBAL/SHUTDOWN","qos":"2","broker":"689fc56b.144cec","x":1400,"y":1500,"wires":[["e9776bb7.1130b8"]]},{"id":"5f3ff21b.9b2b2c","type":"ui_button","z":"de0536ab.6a9728","name":"Bed Up /bedlift_up/","group":"8567c648.c51bf8","order":19,"width":"2","height":"1","passthru":false,"label":"","color":"#fff","bgcolor":"","icon":"fa-arrow-up fa-lg","payload":"u","payloadType":"str","topic":"1","x":1650,"y":660,"wires":[["ceb5d30d.10187"]]},{"id":"17e5625a.0302ee","type":"ui_button","z":"de0536ab.6a9728","name":"Bed Down /bedlift_down/","group":"8567c648.c51bf8","order":20,"width":"2","height":"1","passthru":false,"label":"","color":"#fff","bgcolor":"","icon":"fa-arrow-down fa-lg","payload":"d","payloadType":"str","topic":"1","x":1630,"y":700,"wires":[["ceb5d30d.10187"]]},{"id":"ceb5d30d.10187","type":"template","z":"de0536ab.6a9728","name":"lift_template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{topic}} {{payload}}","x":1870,"y":660,"wires":[["4ac54727.e07088"]]},{"id":"4ac54727.e07088","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/lift.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"lift.pl /bedlift/+pred/","x":2090,"y":660,"wires":[[],[],[]]},{"id":"34380361.5d72bc","type":"ui_text","z":"de0536ab.6a9728","group":"8567c648.c51bf8","order":18,"width":"2","height":"1","name":"Bed Lift Label /bedlift/bedlift_label/","label":"Bed Lift:","format":"","layout":"row-left","x":1600,"y":620,"wires":[]},{"id":"979939d3.30ec88","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/25","qos":"0","broker":"689fc56b.144cec","x":160,"y":1600,"wires":[["e0c943d8.26b88"]]},{"id":"bfef0a38.dcd3e8","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_25/+pred/","label":"Accent","group":"8567c648.c51bf8","order":9,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"25_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1600,"wires":[["14680a97.4f7d25"]]},{"id":"6f855a90.777584","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/26","qos":"0","broker":"689fc56b.144cec","x":160,"y":1640,"wires":[["48bbf1d.6d8521"]]},{"id":"3d5e9a8.7bcc866","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_26/+pred/","label":"Accent","group":"8567c648.c51bf8","order":10,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"26_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1640,"wires":[["14680a97.4f7d25"]]},{"id":"54355471.776d8c","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/27","qos":"0","broker":"689fc56b.144cec","x":160,"y":1680,"wires":[["e6e23a11.6907f8"]]},{"id":"70d2704e.f4fa8","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_27/+pred/","label":"Accent","group":"8567c648.c51bf8","order":11,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"27_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1680,"wires":[["14680a97.4f7d25"]]},{"id":"ae839b15.1ad6e8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/29","qos":"0","broker":"689fc56b.144cec","x":160,"y":1760,"wires":[["5afe2ba1.563494"]]},{"id":"e69e2a71.b8be28","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_29/+pred/","label":"Accent","group":"8567c648.c51bf8","order":12,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"29_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":1760,"wires":[["14680a97.4f7d25"]]},{"id":"b7b187ff.a073c8","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Mid Zone Heat Pump","group":"d8f9c515.f70708","order":10,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"midheat","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":800,"y":1140,"wires":[["f5c52882.1a7518"]]},{"id":"61f1797a.3f0d48","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Rear Zone Heat Pump","group":"d8f9c515.f70708","order":11,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"rearheat","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":800,"y":1220,"wires":[["f5c52882.1a7518"]]},{"id":"54fd5607.f008d8","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Mid Heat Pump","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.midheat = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":1120,"wires":[["b7b187ff.a073c8"]]},{"id":"25c1d822.7619b8","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Rear Heat Pump","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.rearheat = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":460,"y":1200,"wires":[["61f1797a.3f0d48"]]},{"id":"fd7b4f18.9278","type":"ui_template","z":"3c3d44e8.9e19ac","group":"d8f9c515.f70708","name":"Config HVAC Header","order":7,"width":"6","height":"1","format":"<div style=\"width: 100%; height: 10px; border-bottom: 1px solid black; text-align: center\">\n  <span style=\"background-color: #ffffff; padding: 0 10px;\">\n    2018+ Thermostat Controls\n  </span>\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":800,"y":940,"wires":[[]]},{"id":"d0d39011.0203","type":"function","z":"3c3d44e8.9e19ac","name":"Set Second Furnace","func":"// Populate the \"Number of Furnaces\" toggle based on the chosen model.\n\nvar second_furn = ['Phaeton', 'Allegro_Bus', 'Zephyr'];\nvar msg = { topic: '', payload: '', enabled: true };\n\nif (flow.get('model')) {\n    if (second_furn.includes(flow.get('model'))) {\n        msg.payload = true;\n    }\n}\n\nif (flow.get('year') < 2018 && flow.get('model').substr(0,8) != 'VanLeigh') {\n    msg.enabled = false;\n    msg.payload = false;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1080,"wires":[["50eb23ec.5dbbcc"]]},{"id":"a84a130c.1d6bb","type":"function","z":"3c3d44e8.9e19ac","name":"Set Mid Heat Pump","func":"var mid_hp = ['Phaeton', 'Allegro_Bus', 'Zephyr'];\nvar msg = { topic: '', payload: '', enabled: true };\n\nif (flow.get('model')) {\n    if (mid_hp.includes(flow.get('model'))) {\n        msg.payload = true;\n    }\n}\n\nif (flow.get('year') < 2018 && flow.get('model').substr(0,8) != 'VanLeigh') {\n    msg.enabled = false;\n    msg.payload = false;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":1160,"wires":[["b7b187ff.a073c8"]]},{"id":"999553c2.80442","type":"function","z":"3c3d44e8.9e19ac","name":"Set Rear Heat Pump","func":"var rear_hp = ['Phaeton', 'Allegro_Bus', 'Zephyr'];\nvar msg = { topic: '', payload: '', enabled: true };\n\nif (flow.get('model')) {\n    if (rear_hp.includes(flow.get('model'))) {\n        msg.payload = true;\n    }\n}\n\nif (flow.get('year') < 2018 && flow.get('model').substr(0,8) != 'VanLeigh') {\n    msg.enabled = false;\n    msg.payload = false;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":1240,"wires":[["61f1797a.3f0d48"]]},{"id":"2156c421.f1e17c","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_0_night_up/","group":"e9523e77.03c04","order":3,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":2760,"wires":[["2241feba.4026b2"]]},{"id":"27bfc13f.d0559e","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_0_night_down/","group":"e9523e77.03c04","order":5,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":2800,"wires":[["2241feba.4026b2"]]},{"id":"3e1ab072.a9517","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_1_day_up/","group":"e9523e77.03c04","order":8,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":2900,"wires":[["2241feba.4026b2"]]},{"id":"c0da33b3.3dc21","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_1_day_down/","group":"e9523e77.03c04","order":10,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":2940,"wires":[["2241feba.4026b2"]]},{"id":"ffbda602.faf778","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_1_label/","order":7,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2960,"y":2860,"wires":[[]]},{"id":"9c2de546.f8b108","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_1_night_up/","group":"e9523e77.03c04","order":9,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":2980,"wires":[["2241feba.4026b2"]]},{"id":"fc57513f.91efd","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_1_night_down/","group":"e9523e77.03c04","order":11,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3020,"wires":[["2241feba.4026b2"]]},{"id":"50bebc62.37b174","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_2_day_up/","group":"e9523e77.03c04","order":13,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":3120,"wires":[["2241feba.4026b2"]]},{"id":"ec007881.e786f8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_2_day_down/","group":"e9523e77.03c04","order":15,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3160,"wires":[["2241feba.4026b2"]]},{"id":"268ccf35.3e1e9","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_2_label/","order":12,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2960,"y":3080,"wires":[[]]},{"id":"cf2a38d.eff03c8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_2_night_up/","group":"e9523e77.03c04","order":14,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":3200,"wires":[["2241feba.4026b2"]]},{"id":"20802816.dc22f8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_2_night_down/","group":"e9523e77.03c04","order":16,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3240,"wires":[["2241feba.4026b2"]]},{"id":"73b5257.8c649dc","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_3_day_up/","group":"e9523e77.03c04","order":18,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":3340,"wires":[["2241feba.4026b2"]]},{"id":"1830fa7f.fef6c6","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_3_day_down/","group":"e9523e77.03c04","order":20,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3380,"wires":[["2241feba.4026b2"]]},{"id":"29c28e6e.6890f2","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_3_label/","order":17,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2960,"y":3300,"wires":[[]]},{"id":"8c5bff7b.c6cb3","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_3_night_up/","group":"e9523e77.03c04","order":19,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":3420,"wires":[["2241feba.4026b2"]]},{"id":"a8ed181b.3f8aa8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_3_night_down/","group":"e9523e77.03c04","order":21,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3460,"wires":[["2241feba.4026b2"]]},{"id":"ea9ba55.2ff4c58","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_4_day_up/","group":"e9523e77.03c04","order":23,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":3560,"wires":[["2241feba.4026b2"]]},{"id":"7b62944.ddfa26c","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_4_day_down/","group":"e9523e77.03c04","order":25,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3600,"wires":[["2241feba.4026b2"]]},{"id":"da60a3a7.2407d","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_4_label/","order":22,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2960,"y":3520,"wires":[[]]},{"id":"ec0d1263.cbdfa","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_4_night_up/","group":"e9523e77.03c04","order":24,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":3640,"wires":[["2241feba.4026b2"]]},{"id":"55cf38c7.ef54d8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_4_night_down/","group":"e9523e77.03c04","order":26,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3680,"wires":[["2241feba.4026b2"]]},{"id":"20e0a133.24ce1e","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_5_day_up/","group":"e9523e77.03c04","order":28,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":3780,"wires":[["2241feba.4026b2"]]},{"id":"38cf289c.8848b8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_5_day_down/","group":"e9523e77.03c04","order":30,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3820,"wires":[["2241feba.4026b2"]]},{"id":"ef7d02e.a1b36","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_5_label/","order":27,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2960,"y":3740,"wires":[[]]},{"id":"e1f82daf.9fa3d","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_5_night_up/","group":"e9523e77.03c04","order":29,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":3860,"wires":[["2241feba.4026b2"]]},{"id":"578a5b71.b41834","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_5_night_down/","group":"e9523e77.03c04","order":31,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":3900,"wires":[["2241feba.4026b2"]]},{"id":"12c9454a.64082b","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_6_day_up/","group":"e9523e77.03c04","order":33,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":4000,"wires":[["2241feba.4026b2"]]},{"id":"e95ca98.9f56458","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_6_day_down/","group":"e9523e77.03c04","order":35,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":4040,"wires":[["2241feba.4026b2"]]},{"id":"7395dae0.1f2074","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_6_label/","order":32,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2960,"y":3960,"wires":[[]]},{"id":"b01f0d9a.8e278","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_6_night_up/","group":"e9523e77.03c04","order":34,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":4080,"wires":[["2241feba.4026b2"]]},{"id":"e3724442.0e7388","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_6_night_down/","group":"e9523e77.03c04","order":36,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":4120,"wires":[["2241feba.4026b2"]]},{"id":"5839ac17.515ed4","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_7_day_up/","group":"e9523e77.03c04","order":38,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":4220,"wires":[["2241feba.4026b2"]]},{"id":"4efe47ec.1ce5c8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_7_day_down/","group":"e9523e77.03c04","order":40,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":4260,"wires":[["2241feba.4026b2"]]},{"id":"b974355f.ae3768","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_7_label/","order":37,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2960,"y":4180,"wires":[[]]},{"id":"9edbffd.c57f8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_7_night_up/","group":"e9523e77.03c04","order":39,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":2970,"y":4300,"wires":[["2241feba.4026b2"]]},{"id":"262bfd2e.3e3382","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_7_night_down/","group":"e9523e77.03c04","order":41,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":2980,"y":4340,"wires":[["2241feba.4026b2"]]},{"id":"b01dbd40.07b24","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_8_day_up/","group":"e9523e77.03c04","order":43,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":2680,"wires":[["2241feba.4026b2"]]},{"id":"8f7ab233.09f77","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_8_day_down/","group":"e9523e77.03c04","order":45,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":2720,"wires":[["2241feba.4026b2"]]},{"id":"7400f097.5bbf2","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_8_label/","order":42,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3320,"y":2640,"wires":[[]]},{"id":"776c3918.b49ff8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_8_night_up/","group":"e9523e77.03c04","order":44,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":2760,"wires":[["2241feba.4026b2"]]},{"id":"20332047.9f9da","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_8_night_down/","group":"e9523e77.03c04","order":46,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":2800,"wires":[["2241feba.4026b2"]]},{"id":"30b9c6d0.9d2e9a","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_9_day_up/","group":"e9523e77.03c04","order":48,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":2900,"wires":[["2241feba.4026b2"]]},{"id":"3392fa46.fc9606","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_9_day_down/","group":"e9523e77.03c04","order":50,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":2940,"wires":[["2241feba.4026b2"]]},{"id":"679d46ca.055a68","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_9_label/","order":47,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3320,"y":2860,"wires":[[]]},{"id":"f1c1f54b.ab05b8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_9_night_up/","group":"e9523e77.03c04","order":49,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":2980,"wires":[["2241feba.4026b2"]]},{"id":"94983a05.f4ece8","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_9_night_down/","group":"e9523e77.03c04","order":51,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3020,"wires":[["2241feba.4026b2"]]},{"id":"789eaa3c.161144","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_10_day_up/","group":"e9523e77.03c04","order":53,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":3120,"wires":[["2241feba.4026b2"]]},{"id":"80feaeda.6f934","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_10_day_down/","group":"e9523e77.03c04","order":55,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3160,"wires":[["2241feba.4026b2"]]},{"id":"a00c0eb1.38e07","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_10_label/","order":52,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3330,"y":3080,"wires":[[]]},{"id":"85a9c14b.31392","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_10_night_up/","group":"e9523e77.03c04","order":54,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3200,"wires":[["2241feba.4026b2"]]},{"id":"1094e06b.51e5e","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_10_night_down/","group":"e9523e77.03c04","order":56,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3350,"y":3240,"wires":[["2241feba.4026b2"]]},{"id":"e905538.4becbb","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_11_day_up/","group":"e9523e77.03c04","order":58,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":3340,"wires":[["2241feba.4026b2"]]},{"id":"c7d6425.e73f8c","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_11_day_down/","group":"e9523e77.03c04","order":60,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3380,"wires":[["2241feba.4026b2"]]},{"id":"ccf6659c.69b588","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_11_label/","order":57,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3330,"y":3300,"wires":[[]]},{"id":"7674556e.87f4ec","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_11_night_up/","group":"e9523e77.03c04","order":59,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3420,"wires":[["2241feba.4026b2"]]},{"id":"3a5b2d02.782622","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_11_night_down/","group":"e9523e77.03c04","order":61,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3350,"y":3460,"wires":[["2241feba.4026b2"]]},{"id":"b6b946b1.3d5a18","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_12_day_up/","group":"e9523e77.03c04","order":43,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":3560,"wires":[["2241feba.4026b2"]]},{"id":"3c9424e3.316cfc","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_12_day_down/","group":"e9523e77.03c04","order":45,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3600,"wires":[["2241feba.4026b2"]]},{"id":"973f783a.8d7f68","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_12_label/","order":42,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3330,"y":3520,"wires":[[]]},{"id":"4f0f33c9.f9668c","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_12_night_up/","group":"e9523e77.03c04","order":44,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3640,"wires":[["2241feba.4026b2"]]},{"id":"c7455a3f.23b628","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_12_night_down/","group":"e9523e77.03c04","order":46,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3350,"y":3680,"wires":[["2241feba.4026b2"]]},{"id":"253cf95b.c86c76","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_13_day_up/","group":"e9523e77.03c04","order":48,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":3780,"wires":[["2241feba.4026b2"]]},{"id":"d4c0706d.9e84","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_13_day_down/","group":"e9523e77.03c04","order":50,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3820,"wires":[["2241feba.4026b2"]]},{"id":"d12c7641.cfe2f8","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_13_label/","order":47,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3330,"y":3740,"wires":[[]]},{"id":"50d1402.bd14bc","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_13_night_up/","group":"e9523e77.03c04","order":49,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":3860,"wires":[["2241feba.4026b2"]]},{"id":"217069eb.815306","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_13_night_down/","group":"e9523e77.03c04","order":51,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3350,"y":3900,"wires":[["2241feba.4026b2"]]},{"id":"4f5fe4d6.f5b62c","type":"ui_button","z":"de0536ab.6a9728","name":"/awning_0_retract/","group":"ff64ed84.f36a8","order":5,"width":"3","height":"1","passthru":false,"label":"Retract","color":"","bgcolor":"","icon":"fa-caret-left fa-2x","payload":"u","payloadType":"str","topic":"0 d","x":4050,"y":2720,"wires":[["2241feba.4026b2","34da38c8.2af328"]]},{"id":"7aff222a.2630fc","type":"ui_button","z":"de0536ab.6a9728","name":"/awning_0_extend/","group":"ff64ed84.f36a8","order":6,"width":"3","height":"1","passthru":false,"label":"Extend","color":"","bgcolor":"","icon":"fa-caret-right fa-2x","payload":"d","payloadType":"str","topic":"0 d","x":4050,"y":2760,"wires":[["2241feba.4026b2","34da38c8.2af328"]]},{"id":"a45fe724.5a1638","type":"ui_template","z":"de0536ab.6a9728","group":"ff64ed84.f36a8","name":"/awning_0_label/","order":4,"width":"6","height":"1","format":"<div style=\"height: 16px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: center\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    LABEL\n  </span>\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":4050,"y":2680,"wires":[[]]},{"id":"7762a954.0ca398","type":"comment","z":"de0536ab.6a9728","name":"Awnings","info":"","x":4020,"y":2600,"wires":[]},{"id":"c090b627.9a92e8","type":"ui_button","z":"de0536ab.6a9728","name":"/awning_1_retract/","group":"ff64ed84.f36a8","order":8,"width":"3","height":"1","passthru":false,"label":"Retract","color":"","bgcolor":"","icon":"fa-caret-left fa-2x","payload":"u","payloadType":"str","topic":"0 d","x":4050,"y":2860,"wires":[["2241feba.4026b2","34da38c8.2af328"]]},{"id":"4a386ffc.4a1e1","type":"ui_button","z":"de0536ab.6a9728","name":"/awning_1_extend/","group":"ff64ed84.f36a8","order":9,"width":"3","height":"1","passthru":false,"label":"Extend","color":"","bgcolor":"","icon":"fa-caret-right fa-2x","payload":"d","payloadType":"str","topic":"0 d","x":4050,"y":2900,"wires":[["2241feba.4026b2","34da38c8.2af328"]]},{"id":"30e18d75.614242","type":"ui_template","z":"de0536ab.6a9728","group":"ff64ed84.f36a8","name":"/awning_1_label/","order":7,"width":"6","height":"1","format":"<div style=\"height: 16px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: center\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    LABEL\n  </span>\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":4050,"y":2820,"wires":[[]]},{"id":"f42c2f1d.f7b5b","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_14_day_up/","group":"e9523e77.03c04","order":48,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3330,"y":4000,"wires":[["2241feba.4026b2"]]},{"id":"f053a869.4c7d08","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_14_day_down/","group":"e9523e77.03c04","order":50,"width":"3","height":"1","passthru":false,"label":"","color":"#eeeeee","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":4040,"wires":[["2241feba.4026b2"]]},{"id":"8d8af514.5d55c8","type":"ui_template","z":"de0536ab.6a9728","group":"e9523e77.03c04","name":"/shade_14_label/","order":47,"width":"6","height":"1","format":"TBD","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":3330,"y":3960,"wires":[[]]},{"id":"496d486a.1eea68","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_14_night_up/","group":"e9523e77.03c04","order":49,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-up fa-3x","payload":"","payloadType":"str","topic":"","x":3340,"y":4080,"wires":[["2241feba.4026b2"]]},{"id":"75642b63.9284c4","type":"ui_button","z":"de0536ab.6a9728","name":"/shade_14_night_down/","group":"e9523e77.03c04","order":51,"width":"3","height":"1","passthru":false,"label":"","color":"#333333","bgcolor":"","icon":"fa-caret-down fa-3x","payload":"","payloadType":"str","topic":"","x":3350,"y":4120,"wires":[["2241feba.4026b2"]]},{"id":"a0d4e33a.1a677","type":"delay","z":"3c3d44e8.9e19ac","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":290,"y":420,"wires":[["3aac05f3.f3a58a"]]},{"id":"c1513e2a.01e7c","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"","label":"Power Smart Bed","group":"d8f9c515.f70708","order":6,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"powerbed","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":790,"y":880,"wires":[["f5c52882.1a7518"]]},{"id":"7db7b038.e704","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Power Bed","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.powerbed = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":880,"wires":[["c1513e2a.01e7c"]]},{"id":"9929784c.0626e8","type":"ui_button","z":"de0536ab.6a9728","name":"Bed TV Up /bed_tvlift_up/","group":"8567c648.c51bf8","order":22,"width":"2","height":"1","passthru":false,"label":"","color":"#fff","bgcolor":"","icon":"fa-arrow-up fa-lg","payload":"u","payloadType":"str","topic":"2","x":1630,"y":520,"wires":[["d5a88b14.374d68"]]},{"id":"c687a644.6bb108","type":"ui_button","z":"de0536ab.6a9728","name":"Bed TV Down /bed_tvlift_down/","group":"8567c648.c51bf8","order":23,"width":"2","height":"1","passthru":false,"label":"","color":"#fff","bgcolor":"","icon":"fa-arrow-down fa-lg","payload":"d","payloadType":"str","topic":"2","x":1610,"y":560,"wires":[["d5a88b14.374d68"]]},{"id":"d5a88b14.374d68","type":"template","z":"de0536ab.6a9728","name":"lift_template","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{topic}} {{payload}}","x":1870,"y":540,"wires":[["d20d6f82.72897"]]},{"id":"d20d6f82.72897","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/lift.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"lift.pl /bed_tvlift/+pred/","x":2100,"y":540,"wires":[[],[],[]]},{"id":"8670a704.241038","type":"ui_text","z":"de0536ab.6a9728","group":"8567c648.c51bf8","order":21,"width":"2","height":"1","name":"Bed TV Lift Label /bed_tvlift/bed_tvlift_label/","label":"TV Lift:","format":"","layout":"row-left","x":1570,"y":480,"wires":[]},{"id":"3ae0dadd.ff8fa6","type":"ui_switch","z":"de0536ab.6a9728","name":"/awning-enabler/","label":"Enable Awning Controls:","group":"ff64ed84.f36a8","order":2,"width":"6","height":"1","passthru":false,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":3770,"y":2640,"wires":[["c26be6fe.351ed8","907154d2.63b7a8"]]},{"id":"c26be6fe.351ed8","type":"trigger","z":"de0536ab.6a9728","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"61","extend":true,"units":"s","reset":"false","bytopic":"all","name":"","x":3810,"y":2700,"wires":[["907154d2.63b7a8","3ae0dadd.ff8fa6"]]},{"id":"907154d2.63b7a8","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":3770,"y":2760,"wires":[["4f5fe4d6.f5b62c","7aff222a.2630fc","c090b627.9a92e8","4a386ffc.4a1e1"]]},{"id":"c704a12a.756fb","type":"inject","z":"de0536ab.6a9728","name":"","topic":"","payload":"false","payloadType":"bool","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":3570,"y":2700,"wires":[["907154d2.63b7a8","3ae0dadd.ff8fa6"]]},{"id":"34da38c8.2af328","type":"link out","z":"de0536ab.6a9728","name":"Awning button pressed","links":["d0f47846.843c18"],"x":4275,"y":2800,"wires":[]},{"id":"d0f47846.843c18","type":"link in","z":"de0536ab.6a9728","name":"Reset awning timer","links":["34da38c8.2af328"],"x":3675,"y":2700,"wires":[["c26be6fe.351ed8","bf68e97f.573bb8"]]},{"id":"beeabe0.754444","type":"ui_switch","z":"de0536ab.6a9728","name":"/light_94/+pred/","label":"Porch","group":"a2df36fa.e5fd58","order":"9020","width":"3","height":"1","passthru":false,"decouple":"true","topic":"94_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2280,"wires":[["14680a97.4f7d25"]]},{"id":"39a16fc6.3e023","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/94","qos":"0","broker":"689fc56b.144cec","x":160,"y":2280,"wires":[["e2303370.4f8c4"]]},{"id":"6efeb4b9.f3d45c","type":"ui_text","z":"2f811349.94c06c","group":"541b9b96.9a6354","order":3,"width":0,"height":0,"name":"Feedback Text","label":"","format":"{{msg.payload}}","layout":"row-center","x":720,"y":3500,"wires":[]},{"id":"5e3d6c13.66fc44","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"GLOBAL/SHUTDOWN","qos":"2","broker":"689fc56b.144cec","x":460,"y":3500,"wires":[["6efeb4b9.f3d45c"]]},{"id":"8e52af7d.948c9","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"status.power.house_battery_volts","pt":"global","to":"payload['dc voltage']","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":2920,"wires":[["fcd1e85c.1e0dc8"]]},{"id":"538e1308.6fe2dc","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":450,"y":2920,"wires":[["8e52af7d.948c9"]]},{"id":"4ebfe727.77ab58","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_SOURCE_STATUS_SPYDER/1","qos":"2","broker":"689fc56b.144cec","x":190,"y":2920,"wires":[["538e1308.6fe2dc"]]},{"id":"9de4e102.0c527","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"status.power.inverter_status","pt":"global","to":"payload['status definition']","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":3100,"wires":[["fcd1e85c.1e0dc8"]]},{"id":"a76eb6e8.c443c8","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"status.power.charger_state","pt":"global","to":"payload['operating state definition']","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":3020,"wires":[["fcd1e85c.1e0dc8"]]},{"id":"c6647ffa.16067","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"status.power.inverter_dc_amps","pt":"global","to":"payload['dc amperage']","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3060,"wires":[["fcd1e85c.1e0dc8"]]},{"id":"fae9b337.cbab7","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"status.power.chassis_battery_volts","pt":"global","to":"payload['dc voltage']","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":730,"y":2960,"wires":[["fcd1e85c.1e0dc8"]]},{"id":"6ad7b6ad.49f078","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"status.power.battery_merge","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":710,"y":3140,"wires":[["fcd1e85c.1e0dc8"]]},{"id":"ad9eb27b.94611","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":450,"y":3100,"wires":[["9de4e102.0c527"]]},{"id":"b765fce0.a1d17","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":450,"y":3020,"wires":[["a76eb6e8.c443c8"]]},{"id":"73a8ead3.33a944","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":450,"y":3060,"wires":[["c6647ffa.16067"]]},{"id":"8a0c999.d2dad68","type":"ui_template","z":"de0536ab.6a9728","group":"fdbf2c15.ae20a","name":"/battery-advanced/+pred/","order":2,"width":"6","height":"5","format":"<div>\n<table style=\"width: 100%;\">\n<tr><!-- Row 1 -->\n    <td style=\"text-align: center;\">\n        Inverter / Charger<br>\n        <b>{{msg.payload.inverter_state}}<br>\n        {{msg.payload.charger_state}}</b></td>\n</tr>\n\n<tr><!-- Row Separator -->\n    <td style=\"text-align: center; color: {{msg.payload.house_flow_color}};\">\n        <i class=\"fa {{msg.payload.house_flow}} animated\"></i>\n    </td>\n</tr>\n<tr><!-- Row Separator -->\n    <td style=\"text-align: center; color: {{msg.payload.house_flow_color}};\">\n        {{msg.payload.inverter_amps}} A\n    </td>\n</tr>\n\n<tr><!-- Row 2 -->\n    <td style=\"text-align: center;\">\n        House Battery<br>\n        <b>{{msg.payload.house_volts}} Volts</b>\n    </td>\n    <td>\n        <i class=\"fa fa-lg {{msg.payload.house_icon}} fa-rotate-270\" style=\"color: {{msg.payload.house_color}}\"></i>\n    </td>\n</tr>\n\n<tr><!-- Row Separator -->\n    <td style=\"text-align: center; color: {{msg.payload.chassis_flow_color}};\">\n        <i class=\"fa {{msg.payload.chassis_flow}} animated\"></i>\n    </td>\n</tr>\n\n<tr><!-- Row 3 -->\n    <td style=\"text-align: center;\">\n        Chassis Battery<br><b>{{msg.payload.chassis_volts}} Volts</b>\n    </td>\n    <td>\n        <i class=\"fa fa-lg {{msg.payload.chassis_icon}} fa-rotate-270\" style=\"color: {{msg.payload.chassis_color}}\"></i>\n    </td>\n</tr>\n</table>\n</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":1510,"y":3060,"wires":[[]]},{"id":"6b1ea020.c25f3","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":450,"y":2960,"wires":[["fae9b337.cbab7"]]},{"id":"6281d003.1c8f2","type":"trigger","z":"de0536ab.6a9728","op1":"true","op2":"false","op1type":"bool","op2type":"bool","duration":"5","extend":true,"units":"s","reset":"","bytopic":"all","name":"","x":440,"y":3140,"wires":[["6ad7b6ad.49f078"]]},{"id":"939a8534.7848f8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/INVERTER_STATUS/1","qos":"2","broker":"689fc56b.144cec","x":230,"y":3100,"wires":[["ad9eb27b.94611"]]},{"id":"525ae347.3142cc","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/CHARGER_STATUS/1","qos":"2","broker":"689fc56b.144cec","x":220,"y":3020,"wires":[["b765fce0.a1d17"]]},{"id":"f9740471.6e91d8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/INVERTER_DC_STATUS/1","qos":"2","broker":"689fc56b.144cec","x":210,"y":3060,"wires":[["73a8ead3.33a944"]]},{"id":"69cc5986.5c09d8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_SOURCE_STATUS_SPYDER/2","qos":"2","broker":"689fc56b.144cec","x":190,"y":2960,"wires":[["6b1ea020.c25f3"]]},{"id":"7d221bdb.b6fab4","type":"mqtt in","z":"de0536ab.6a9728","name":"/Battery Merge/","topic":"RVC/DC_DIMMER_STATUS_3/143","qos":"2","broker":"689fc56b.144cec","x":260,"y":3140,"wires":[["6281d003.1c8f2"]]},{"id":"d8dc6398.8b7af","type":"ui_template","z":"de0536ab.6a9728","group":"1733d850.9fd7d8","name":"Custom CSS","order":0,"width":0,"height":0,"format":"<link rel=\"stylesheet\" href=\"css/font-awesome-animation.min.css\">\n<style type=\"text/css\">button { touch-action: manipulation; }</style>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"global","x":670,"y":40,"wires":[[]]},{"id":"748f21a3.6d873","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":160,"wires":[["c086d391.d0b81"]]},{"id":"37af9338.c15edc","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/1","qos":"0","broker":"689fc56b.144cec","x":150,"y":160,"wires":[["748f21a3.6d873"]]},{"id":"eb8fef51.7368c","type":"change","z":"2f811349.94c06c","name":"Light List","rules":[{"t":"set","p":"lights","pt":"msg","to":"[]","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":80,"wires":[["c7fc8f99.18699"]]},{"id":"36ae87d5.e67ca8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":240,"wires":[["e86a99e.2237b68"]]},{"id":"869049f0.d07758","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_DIMMER_STATUS_3/2","qos":"0","broker":"689fc56b.144cec","x":150,"y":240,"wires":[["36ae87d5.e67ca8"]]},{"id":"c495e938.efe368","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":320,"wires":[["13fe8bbc.e92ed4"]]},{"id":"f2defd61.c41a3","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":400,"wires":[["ee9bd3e7.d9632"]]},{"id":"5c1580d5.6109a","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":480,"wires":[["eeff4027.45cea"]]},{"id":"b42e5836.16b788","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":560,"wires":[["3d99008.762e"]]},{"id":"859deedb.c6e62","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":640,"wires":[["57f85d76.65ff24"]]},{"id":"6d85a6b8.fe8ba8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":720,"wires":[["c5c00923.fe1c98"]]},{"id":"60179f10.bf2f2","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":800,"wires":[["14b9170d.ed5bc9"]]},{"id":"880bb90b.ab0128","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":880,"wires":[["119e5582.bca7ca"]]},{"id":"8d60dc2.8be9d2","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":960,"wires":[["818b2509.d73ef8"]]},{"id":"984501.8acafb","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1040,"wires":[["ded2f29d.b0c18"]]},{"id":"c086d391.d0b81","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":160,"wires":[["7adf5385.a5d64c"],["71ed39a.2df8cc8"]],"outputLabels":["on/off value","brightness value"]},{"id":"e86a99e.2237b68","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":240,"wires":[["18310acc.c93755"],["467738b3.6b65a8"]],"outputLabels":["on/off value","brightness value"]},{"id":"13fe8bbc.e92ed4","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":320,"wires":[["2b4072ea.e19ece"],["f5378130.0cc47"]],"outputLabels":["on/off value","brightness value"]},{"id":"ee9bd3e7.d9632","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":400,"wires":[["1eeb4982.1abf66"],["96162afb.ff1918"]],"outputLabels":["on/off value","brightness value"]},{"id":"eeff4027.45cea","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":480,"wires":[["f42c55e.2284ca8"],["e09b4dd9.8c045"]],"outputLabels":["on/off value","brightness value"]},{"id":"3d99008.762e","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":560,"wires":[["ed3338ca.4f7948"],["43b63903.ef8ee8"]],"outputLabels":["on/off value","brightness value"]},{"id":"57f85d76.65ff24","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":640,"wires":[["a731e8e6.1e8298"],["2f1cc273.15d11e"]],"outputLabels":["on/off value","brightness value"]},{"id":"c5c00923.fe1c98","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":720,"wires":[["cea46d4e.4092f"],["7d506587.4c33ac"]],"outputLabels":["on/off value","brightness value"]},{"id":"14b9170d.ed5bc9","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":800,"wires":[["64dc0f34.61749"],["b10f5751.555318"]],"outputLabels":["on/off value","brightness value"]},{"id":"119e5582.bca7ca","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":880,"wires":[["4836552c.966f3c"],["f069f03f.2c60d"]],"outputLabels":["on/off value","brightness value"]},{"id":"818b2509.d73ef8","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":960,"wires":[["7a08deb6.43662"],["a7d1b796.878248"]],"outputLabels":["on/off value","brightness value"]},{"id":"ded2f29d.b0c18","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1040,"wires":[["36188c04.7cf3e4"],["16cef559.aff5db"]],"outputLabels":["on/off value","brightness value"]},{"id":"14680a97.4f7d25","type":"file function","z":"de0536ab.6a9728","name":"command_dc_dimmer.js","filename":".node-red/js/command_dc_dimmer.js","reloadfile":false,"outputs":1,"x":1170,"y":1560,"wires":[["ffb5e8ee.91e9a8"]]},{"id":"ee167049.6bc3c","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1120,"wires":[["a532e0be.f49be"]]},{"id":"a532e0be.f49be","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1120,"wires":[["ba6f168.e669ce8"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"43853011.ff858","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1160,"wires":[["94c19ee5.57b86"]]},{"id":"94c19ee5.57b86","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1160,"wires":[["127f467.4a078ba"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"f108924c.a7a5e","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1200,"wires":[["735cda2d.b86bd4"]]},{"id":"735cda2d.b86bd4","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1200,"wires":[["bb745798.143ba8"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"d6da34a9.45a1b8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1240,"wires":[["5c677ff4.671f8"]]},{"id":"5c677ff4.671f8","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1240,"wires":[["8cb5466e.40bbe8"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"2bb4db42.e7f5c4","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1280,"wires":[["5cfa8656.f53778"]]},{"id":"5cfa8656.f53778","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1280,"wires":[["85b5a0fd.7002e"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"e3791328.8b72","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1320,"wires":[["6a3c25ac.15a22c"]]},{"id":"6a3c25ac.15a22c","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1320,"wires":[["ad8c1372.d61"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"faa862e7.df795","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1360,"wires":[["dba07296.8d5ae"]]},{"id":"dba07296.8d5ae","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1360,"wires":[["71b443be.f075fc"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"bbd9d335.e7ce1","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1400,"wires":[["992ba9f3.0b44d8"]]},{"id":"992ba9f3.0b44d8","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1400,"wires":[["f92155e2.b50b68"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"a42e130e.14c31","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1440,"wires":[["d451b3d2.d3dd5"]]},{"id":"d451b3d2.d3dd5","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1440,"wires":[["2257d52.fc5fc2a"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"177cf4ce.ef5b3b","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1480,"wires":[["fabc2073.2751d"]]},{"id":"fabc2073.2751d","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1480,"wires":[["3f924498.d4437c"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"d3c5147c.37a718","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1520,"wires":[["b599d33a.0c4da"]]},{"id":"b599d33a.0c4da","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1520,"wires":[["8beaf8be.075398"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"7cdc1a35.8500c4","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1560,"wires":[["70169f73.364ee"]]},{"id":"70169f73.364ee","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1560,"wires":[["2e07d034.5498b"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"e0c943d8.26b88","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1600,"wires":[["6a7bb1f5.ddce6"]]},{"id":"6a7bb1f5.ddce6","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1600,"wires":[["bfef0a38.dcd3e8"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"48bbf1d.6d8521","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1640,"wires":[["eace0708.91af28"]]},{"id":"eace0708.91af28","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1640,"wires":[["3d5e9a8.7bcc866"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"e6e23a11.6907f8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1680,"wires":[["26153a55.4bed86"]]},{"id":"26153a55.4bed86","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1680,"wires":[["70d2704e.f4fa8"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"a0db3ec0.b7e2a","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1720,"wires":[["2a7dc95a.3c9f36"]]},{"id":"2a7dc95a.3c9f36","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1720,"wires":[["7f0a0e40.2a70b"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"5afe2ba1.563494","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1760,"wires":[["bc5ce39a.02158"]]},{"id":"bc5ce39a.02158","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1760,"wires":[["e69e2a71.b8be28"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"bf99d6b2.b74208","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1820,"wires":[["ac292360.2c065"]]},{"id":"ac292360.2c065","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1820,"wires":[["dc1116fd.4394c8"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"d459a58f.fe5978","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1860,"wires":[["f22c7714.c76f18"]]},{"id":"f22c7714.c76f18","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1860,"wires":[["8233f12b.bb04c"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"15d97c68.43a274","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1900,"wires":[["fb1a4439.e35f18"]]},{"id":"fb1a4439.e35f18","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1900,"wires":[["9f26fd55.9ff5"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"d3ed4027.ed513","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":1960,"wires":[["121b9da0.bc3b92"]]},{"id":"121b9da0.bc3b92","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":1960,"wires":[["3102fd86.7d6602"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"11d72ba1.315694","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2000,"wires":[["5ee258ba.fefc68"]]},{"id":"5ee258ba.fefc68","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2000,"wires":[["77775e27.2626c"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"aea603c3.7808a","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2040,"wires":[["7594c70c.2c3428"]]},{"id":"7594c70c.2c3428","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2040,"wires":[["ee42f061.2cf6b"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"ca9d1b0.2a47ee8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2080,"wires":[["162102df.2230bd"]]},{"id":"162102df.2230bd","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2080,"wires":[["d785fc16.8f9db"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"3068a256.90901e","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2120,"wires":[["f4fe9ba5.795168"]]},{"id":"f4fe9ba5.795168","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2120,"wires":[["9470d347.feff4"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"5bb97d3f.0293f4","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2160,"wires":[["74205bb7.5bb4d4"]]},{"id":"74205bb7.5bb4d4","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2160,"wires":[["83589b18.772bb8"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"844e050.b35d3f8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2200,"wires":[["7fc05007.c9eb4"]]},{"id":"7fc05007.c9eb4","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2200,"wires":[["a99b41e0.33e75"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"79c3601d.1613b","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2240,"wires":[["23eba04c.ad3af"]]},{"id":"23eba04c.ad3af","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2240,"wires":[["84a2eed7.71801"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"e2303370.4f8c4","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2280,"wires":[["6930c352.6d30ac"]]},{"id":"6930c352.6d30ac","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2280,"wires":[["beeabe0.754444"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"5f936da9.c81cb4","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2320,"wires":[["bc665f15.cf6ef"]]},{"id":"bc665f15.cf6ef","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2320,"wires":[["b50ee7ba.993a78"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"d8666077.4ddfd","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":370,"y":2360,"wires":[["85c41dc4.025d"]]},{"id":"85c41dc4.025d","type":"file function","z":"de0536ab.6a9728","name":"decode_dc_dimmer_light.js","filename":".node-red/js/decode_dc_dimmer_light.js","reloadfile":false,"outputs":2,"x":580,"y":2360,"wires":[["d5d064be.c33588"],[]],"outputLabels":["on/off value","brightness value"]},{"id":"79bdb248.c6045c","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":270,"y":2480,"wires":[["83423c2a.fb403"]]},{"id":"e790bc37.eb4a7","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":270,"y":2520,"wires":[["57d228e7.853798"]]},{"id":"a9228e6e.767be","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":270,"y":2560,"wires":[["c1af1edf.24591"]]},{"id":"3cd06ce5.882324","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":270,"y":2600,"wires":[["e513a0b6.5b316"]]},{"id":"8af48c3e.8153f","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2950,"y":1400,"wires":[["9915ff11.1a39e"]]},{"id":"3a38d6c.0ac972a","type":"mqtt in","z":"de0536ab.6a9728","name":"/mid-fan-mqtt/","topic":"RVC/DC_DIMMER_STATUS_3/25","qos":"0","broker":"689fc56b.144cec","x":2780,"y":1540,"wires":[["ef35e900.057aa8"]]},{"id":"80c1903.aeadd7","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3510,"y":1540,"wires":[["d2923412.b03748"]]},{"id":"f53097fd.48dbe8","type":"file function","z":"de0536ab.6a9728","name":"decode_fan.js","filename":".node-red/js/decode_fan.js","reloadfile":false,"outputs":1,"x":3340,"y":1540,"wires":[["80c1903.aeadd7"]]},{"id":"65ff6f32.213f6","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"instance","pt":"msg","to":"1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3130,"y":1540,"wires":[["f53097fd.48dbe8"]]},{"id":"ef35e900.057aa8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2950,"y":1540,"wires":[["65ff6f32.213f6"]]},{"id":"c6c51c98.58f6f","type":"mqtt in","z":"de0536ab.6a9728","name":"/rear-fan-mqtt/","topic":"RVC/DC_DIMMER_STATUS_3/25","qos":"0","broker":"689fc56b.144cec","x":2780,"y":1680,"wires":[["7cb96507.90bb7c"]]},{"id":"50b2aef3.33ea","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3510,"y":1680,"wires":[["1faf4356.96e32d"]]},{"id":"58a86d9e.668144","type":"file function","z":"de0536ab.6a9728","name":"decode_fan.js","filename":".node-red/js/decode_fan.js","reloadfile":false,"outputs":1,"x":3340,"y":1680,"wires":[["50b2aef3.33ea"]]},{"id":"a797cd5f.727c8","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"instance","pt":"msg","to":"2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3130,"y":1680,"wires":[["58a86d9e.668144"]]},{"id":"7cb96507.90bb7c","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2950,"y":1680,"wires":[["a797cd5f.727c8"]]},{"id":"446ced3f.3fe4e4","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2930,"y":1880,"wires":[["f42c1bc3.a0dd88"]]},{"id":"cfa8cbef.2b1688","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2930,"y":1920,"wires":[["cffad2b3.a91b1"]]},{"id":"206c4d58.2ff052","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":830,"y":2760,"wires":[["145788e6.ffddd7"]]},{"id":"17559df2.0b83a2","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"status.power.house_battery_volts","pt":"global","to":"payload['dc voltage']","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"payload['dc voltage']","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":2760,"wires":[["206c4d58.2ff052"]]},{"id":"e5ca35a6.0232f8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_SOURCE_STATUS_1/1","qos":"2","broker":"689fc56b.144cec","x":210,"y":2760,"wires":[["6e2e0d39.f58a24"]]},{"id":"6e2e0d39.f58a24","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":450,"y":2760,"wires":[["17559df2.0b83a2"]]},{"id":"409c320.d7730d","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":830,"y":2800,"wires":[["3eb848b7.cb0cb8"]]},{"id":"71f76c38.2f3694","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/DC_SOURCE_STATUS_1/2","qos":"2","broker":"689fc56b.144cec","x":210,"y":2800,"wires":[["8e09a3f8.6062d"]]},{"id":"8e09a3f8.6062d","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":450,"y":2800,"wires":[["c3cce278.a0d7e"]]},{"id":"c3cce278.a0d7e","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"status.power.chassis_battery_volts","pt":"global","to":"payload['dc voltage']","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"payload['dc voltage']","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":2800,"wires":[["409c320.d7730d"]]},{"id":"51c48838.b21a38","type":"comment","z":"de0536ab.6a9728","name":"Advanced power display (2018+)","info":"","x":210,"y":2880,"wires":[]},{"id":"39e9db58.8a0624","type":"comment","z":"de0536ab.6a9728","name":"Basic power display (2015-2017)","info":"","x":210,"y":2720,"wires":[]},{"id":"36ef16be.4df47a","type":"comment","z":"de0536ab.6a9728","name":"120V ATS Power Display (2018+)","info":"","x":210,"y":3260,"wires":[]},{"id":"230a7858.f659f8","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 1 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"1. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"1","x":1800,"y":2140,"wires":[["448ba0a6.d15fc"]]},{"id":"99366f1a.0cdf9","type":"ui_dropdown","z":"de0536ab.6a9728","name":"Choose Preset","label":"","place":"Preset Number:","group":"167edf8b.e385b","order":2,"width":"6","height":"1","passthru":false,"options":[{"label":"","value":1,"type":"num"},{"label":"","value":2,"type":"num"},{"label":"","value":3,"type":"num"},{"label":"","value":4,"type":"num"},{"label":"","value":5,"type":"num"},{"label":"","value":6,"type":"num"},{"label":"","value":"7","type":"str"},{"label":"","value":"8","type":"str"},{"label":"","value":"9","type":"str"},{"label":"","value":"10","type":"str"}],"payload":"","topic":"item","x":1780,"y":1720,"wires":[["7a162004.ed0f6","4841a959.75acd8"]]},{"id":"d0d2a0d6.0d02b","type":"ui_text_input","z":"de0536ab.6a9728","name":"","label":"Preset name:","group":"167edf8b.e385b","order":3,"width":"6","height":"1","passthru":true,"mode":"text","delay":300,"topic":"name","x":1770,"y":1760,"wires":[["7a162004.ed0f6"]]},{"id":"53d91c35.281554","type":"ui_switch","z":"de0536ab.6a9728","name":"Lights","label":"Lights","group":"167edf8b.e385b","order":5,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"opt_lights","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":1750,"y":1840,"wires":[["7a162004.ed0f6"]]},{"id":"24e61f50.b6de5","type":"ui_text","z":"de0536ab.6a9728","group":"167edf8b.e385b","order":4,"width":0,"height":0,"name":"","label":"Choose items to save:","format":"{{msg.payload}}","layout":"row-spread","x":1800,"y":1800,"wires":[]},{"id":"d5611544.e6fa38","type":"ui_switch","z":"de0536ab.6a9728","name":"Vents / Fans","label":"Vents/Fans","group":"167edf8b.e385b","order":7,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"opt_vents","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":1770,"y":1960,"wires":[["7a162004.ed0f6"]]},{"id":"a0bd20a2.d3e79","type":"ui_button","z":"de0536ab.6a9728","name":"","group":"167edf8b.e385b","order":10,"width":"5","height":"1","passthru":false,"label":"Save Preset","color":"","bgcolor":"","icon":"fa-check","payload":"save","payloadType":"str","topic":"","x":1770,"y":2000,"wires":[["d07dd17c.d6265"]]},{"id":"8aa5cfb.e3fd53","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 2 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"2. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"2","x":1800,"y":2180,"wires":[["448ba0a6.d15fc"]]},{"id":"a9027602.81ba28","type":"ui_switch","z":"de0536ab.6a9728","name":"Thermostats /tstat/","label":"T'stats","group":"167edf8b.e385b","order":6,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"opt_tstats","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":1790,"y":1880,"wires":[["7a162004.ed0f6"]]},{"id":"d127f8e1.4dddc8","type":"ui_switch","z":"de0536ab.6a9728","name":"Floor Heat /floorheat/","label":"Floor Heat","group":"167edf8b.e385b","order":8,"width":"3","height":"1","passthru":true,"decouple":"false","topic":"opt_floors","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":1800,"y":1920,"wires":[["7a162004.ed0f6"]]},{"id":"7a162004.ed0f6","type":"function","z":"de0536ab.6a9728","name":"Store form values","func":"global.set('form.preset.' + msg.topic, msg.payload);\n\nreturn null;","outputs":1,"noerr":0,"x":2050,"y":1820,"wires":[[]]},{"id":"6eba018b.a85fd","type":"ui_ui_control","z":"de0536ab.6a9728","name":"Tab Selected","x":1310,"y":1820,"wires":[["a0e44568.eff908","de5fb020.24c7d","ef130c2b.b2dc4","7b33512c.a0cc1"]]},{"id":"a0e44568.eff908","type":"change","z":"de0536ab.6a9728","name":"payload: true","rules":[{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1550,"y":1860,"wires":[["53d91c35.281554","a9027602.81ba28"]]},{"id":"de5fb020.24c7d","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1540,"y":1720,"wires":[["99366f1a.0cdf9"]]},{"id":"ef130c2b.b2dc4","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1540,"y":1760,"wires":[["d0d2a0d6.0d02b"]]},{"id":"e256da8d.ee1fb8","type":"sqlite","z":"de0536ab.6a9728","mydb":"cacb1b98.3549b8","name":"","x":2260,"y":2000,"wires":[[]]},{"id":"4a6b888f.1245d8","type":"link in","z":"de0536ab.6a9728","name":"update presets UI","links":["2f5b6039.18cf4","da398f37.3ca9"],"x":1415,"y":2320,"wires":[["2b0c1707.3715f8","3ece5eca.4acb82","83ec9198.c494a","6cba77a3.c51208","e2c782be.c0cfd","4332f634.6f6188","bc8fbbcb.168d88","ab9fa50b.fc5f98","8086d6cf.74aea8","436582ff.dd6b7c"]]},{"id":"2b0c1707.3715f8","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[3].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2220,"wires":[["7106a821.510778"]]},{"id":"7106a821.510778","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 3 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"3. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"3","x":1800,"y":2220,"wires":[["448ba0a6.d15fc"]]},{"id":"3ece5eca.4acb82","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[2].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2180,"wires":[["8aa5cfb.e3fd53"]]},{"id":"83ec9198.c494a","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[1].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2140,"wires":[["230a7858.f659f8"]]},{"id":"6cba77a3.c51208","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[4].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2260,"wires":[["5fc51b61.c750b4"]]},{"id":"5fc51b61.c750b4","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 4 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"4. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"4","x":1800,"y":2260,"wires":[["448ba0a6.d15fc"]]},{"id":"2f5b6039.18cf4","type":"link out","z":"de0536ab.6a9728","name":"Preset updated","links":["4a6b888f.1245d8"],"x":2135,"y":2040,"wires":[]},{"id":"92cd77c5.139c38","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/dc_dimmer.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"dc_dimmer.pl","x":2260,"y":2220,"wires":[[],[],[]]},{"id":"e2c782be.c0cfd","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[5].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2300,"wires":[["b82c1390.95919"]]},{"id":"b82c1390.95919","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 5 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"5. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"5","x":1800,"y":2300,"wires":[["448ba0a6.d15fc"]]},{"id":"4332f634.6f6188","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[6].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2340,"wires":[["41605d75.bc2a34"]]},{"id":"41605d75.bc2a34","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 6 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"6. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"6","x":1800,"y":2340,"wires":[["448ba0a6.d15fc"]]},{"id":"a57f714e.b636f","type":"ui_template","z":"de0536ab.6a9728","group":"167edf8b.e385b","name":"Presets Instructions","order":1,"width":"6","height":"4","format":"<div layout=\"column\" layout-align=\"space-between\">\n<p>\nSelect a preset number, enter a name, choose which devices\nto remember, and select \"Save Preset\".\n</p>\n<p>Later, use the numbered preset buttons to restore your\nlights and/or thermostats to the saved values.\n</p>\n<p>\nNote: Thermostat preset support (if available in your coach) is\ncurrently experimental.\n</p>\n</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":1800,"y":1680,"wires":[[]]},{"id":"4841a959.75acd8","type":"function","z":"de0536ab.6a9728","name":"Update preset name field","func":"var preset = global.get('presets')[msg.payload];\nvar name = preset ? preset.name : '';\nreturn { payload: name };","outputs":1,"noerr":0,"x":2030,"y":1720,"wires":[["d0d2a0d6.0d02b"]]},{"id":"7b33512c.a0cc1","type":"change","z":"de0536ab.6a9728","name":"enabled: false","rules":[{"t":"set","p":"payload","pt":"msg","to":"false","tot":"bool"},{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1540,"y":1940,"wires":[["d127f8e1.4dddc8","d5611544.e6fa38"]]},{"id":"d2d337c3.70d8e8","type":"template","z":"2f811349.94c06c","name":"Load presets","field":"topic","fieldType":"msg","format":"handlebars","syntax":"plain","template":"select * from presets;","output":"str","x":690,"y":80,"wires":[["6d6e3789.ae9d08"]]},{"id":"6d6e3789.ae9d08","type":"sqlite","z":"2f811349.94c06c","mydb":"c2b41353.c92fd","name":"CoachProxy","x":890,"y":80,"wires":[["2cdce927.969066"]]},{"id":"2cdce927.969066","type":"function","z":"2f811349.94c06c","name":"Store presets","func":"var presets = [];\nfor (let i = 1; i <= 10; i++) {\n    presets[i] = { name: '' };\n}\n\nfor (let i = 0; i < (msg.payload).length; i++) {\n    let number = msg.payload[i].number;\n    let data = JSON.parse(msg.payload[i].data);\n    presets[number] = data;\n}\n\nglobal.set('presets', presets);\n\n// Returning NULL would terminate the flow, but other\n// nodes want to know when settings have been loaded.\nreturn {};","outputs":1,"noerr":0,"x":1080,"y":80,"wires":[["da398f37.3ca9"]]},{"id":"da398f37.3ca9","type":"link out","z":"2f811349.94c06c","name":"presets have been loaded","links":["56509485.b3fb0c","4a6b888f.1245d8"],"x":1215,"y":80,"wires":[]},{"id":"e422be25.ab242","type":"ui_button","z":"de0536ab.6a9728","name":"Delete Preset","group":"167edf8b.e385b","order":11,"width":"1","height":"1","passthru":false,"label":"","color":"","bgcolor":"#8D0000","icon":"fa-trash","payload":"delete","payloadType":"str","topic":"","x":1780,"y":2040,"wires":[["3bcfba9b.764a06"]]},{"id":"12ee225a.d72ace","type":"change","z":"de0536ab.6a9728","name":"Payload 210+cmd","rules":[{"t":"set","p":"payload","pt":"msg","to":"'210 ' & (payload = 'on' ? '2' : '3')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1110,"y":2560,"wires":[["1f054c4c.3a9f54"]]},{"id":"e74cbf2.61e504","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/THERMOSTAT_STATUS_1/1","qos":"0","broker":"689fc56b.144cec","x":2690,"y":2260,"wires":[["e3732fb0.6121e"]]},{"id":"d63f2795.7541b8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/THERMOSTAT_AMBIENT_STATUS/1","qos":"0","broker":"689fc56b.144cec","x":2660,"y":2220,"wires":[["2957db89.526564"]]},{"id":"5bd15507.d9d98c","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3390,"y":2200,"wires":[["6698df5f.0f267"]]},{"id":"1662d738.0363a9","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3390,"y":2240,"wires":[["ff6cd08c.6a53b"]]},{"id":"dfc0b325.066ee","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3390,"y":2280,"wires":[["1206a318.d3b95d","7a635f8f.0b6c4"]]},{"id":"6698df5f.0f267","type":"ui_template","z":"de0536ab.6a9728","group":"4166c8e2.b67978","name":"Floor Rear Label","order":5,"width":"6","height":"1","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    {{msg.zone}}: <b>{{msg.payload}} F</b>\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":3560,"y":2200,"wires":[["fc7f9067.d4bdf"]]},{"id":"ff6cd08c.6a53b","type":"ui_switch","z":"de0536ab.6a9728","name":"Floor Rear Power","label":"Power","group":"4166c8e2.b67978","order":6,"width":"2","height":"1","passthru":false,"decouple":"true","topic":"1","style":"","onvalue":"1","onvalueType":"num","onicon":"","oncolor":"","offvalue":"0","offvalueType":"num","officon":"","offcolor":"","x":3570,"y":2240,"wires":[["e22a485f.4ce1e8"]]},{"id":"1206a318.d3b95d","type":"ui_dropdown","z":"de0536ab.6a9728","name":"Floor Rear Temp /floorheat-indirect/","label":"Heat to:","place":"","group":"4166c8e2.b67978","order":7,"width":"3","height":"1","passthru":false,"options":[{"label":"104 [-5-]","value":"104","type":"str"},{"label":"","value":"103","type":"str"},{"label":"","value":"102","type":"str"},{"label":"","value":"101","type":"str"},{"label":"","value":"100","type":"str"},{"label":"","value":"99","type":"str"},{"label":"","value":"98","type":"str"},{"label":"","value":"97","type":"str"},{"label":"","value":"96","type":"str"},{"label":"95 [-4-]","value":"95","type":"str"},{"label":"","value":"93","type":"str"},{"label":"","value":"92","type":"str"},{"label":"","value":"91","type":"str"},{"label":"","value":"90","type":"str"},{"label":"","value":"89","type":"str"},{"label":"","value":"88","type":"str"},{"label":"","value":"87","type":"str"},{"label":"86 [-3-]","value":"86","type":"str"},{"label":"","value":"85","type":"str"},{"label":"","value":"84","type":"str"},{"label":"","value":"83","type":"str"},{"label":"","value":"82","type":"str"},{"label":"","value":"81","type":"str"},{"label":"","value":"80","type":"str"},{"label":"","value":"79","type":"str"},{"label":"","value":"78","type":"str"},{"label":"77 [-2-]","value":"77","type":"str"},{"label":"","value":"76","type":"str"},{"label":"","value":"75","type":"str"},{"label":"","value":"74","type":"str"},{"label":"","value":"73","type":"str"},{"label":"","value":"72","type":"str"},{"label":"","value":"71","type":"str"},{"label":"","value":"70","type":"str"},{"label":"","value":"69","type":"str"},{"label":"68 [-1-]","value":"68","type":"str"}],"payload":"","topic":"1","x":3620,"y":2280,"wires":[["fc7f9067.d4bdf"]]},{"id":"2957db89.526564","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2910,"y":2220,"wires":[["666710a1.beda3"]]},{"id":"e3732fb0.6121e","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2910,"y":2260,"wires":[["e000899c.431488","2dbd210c.6a334e"]]},{"id":"fabca461.35ae38","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/THERMOSTAT_STATUS_1/0","qos":"0","broker":"689fc56b.144cec","x":2690,"y":2100,"wires":[["ea2c5edc.6c0c8"]]},{"id":"2789ae7d.64c932","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/THERMOSTAT_AMBIENT_STATUS/0","qos":"0","broker":"689fc56b.144cec","x":2660,"y":2060,"wires":[["a38eaefd.d4063"]]},{"id":"a38eaefd.d4063","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2910,"y":2060,"wires":[["7993b480.1cb13c"]]},{"id":"ea2c5edc.6c0c8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2910,"y":2100,"wires":[["487604af.bce91c","2dbd210c.6a334e"]]},{"id":"9ba67ba4.6db858","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3390,"y":2040,"wires":[["d3a0d278.d0e81"]]},{"id":"fd034719.15b1b8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3390,"y":2080,"wires":[["cb5f6014.5188d"]]},{"id":"12f1a6e9.9660c9","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","x":3390,"y":2120,"wires":[["93eaa24.78e956","415e76be.d5e4a8"]]},{"id":"d3a0d278.d0e81","type":"ui_template","z":"de0536ab.6a9728","group":"4166c8e2.b67978","name":"Floor Front Label","order":1,"width":"6","height":"1","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: left\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    {{msg.zone}}: <b>{{msg.payload}} F</b>\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":3570,"y":2040,"wires":[["e22a485f.4ce1e8"]]},{"id":"cb5f6014.5188d","type":"ui_switch","z":"de0536ab.6a9728","name":"Floor Front Power","label":"Power","group":"4166c8e2.b67978","order":2,"width":"2","height":"1","passthru":false,"decouple":"true","topic":"0","style":"","onvalue":"1","onvalueType":"num","onicon":"","oncolor":"","offvalue":"0","offvalueType":"num","officon":"","offcolor":"","x":3570,"y":2080,"wires":[["e22a485f.4ce1e8"]]},{"id":"93eaa24.78e956","type":"ui_dropdown","z":"de0536ab.6a9728","name":"Floor Front Temp /floorheat-indirect/","label":"Heat to:","place":"","group":"4166c8e2.b67978","order":3,"width":"3","height":"1","passthru":false,"options":[{"label":"104 [-5-]","value":"104","type":"str"},{"label":"","value":"103","type":"str"},{"label":"","value":"102","type":"str"},{"label":"","value":"101","type":"str"},{"label":"","value":"100","type":"str"},{"label":"","value":"99","type":"str"},{"label":"","value":"98","type":"str"},{"label":"","value":"97","type":"str"},{"label":"","value":"96","type":"str"},{"label":"95 [-4-]","value":"95","type":"str"},{"label":"","value":"93","type":"str"},{"label":"","value":"92","type":"str"},{"label":"","value":"91","type":"str"},{"label":"","value":"90","type":"str"},{"label":"","value":"89","type":"str"},{"label":"","value":"88","type":"str"},{"label":"","value":"87","type":"str"},{"label":"86 [-3-]","value":"86","type":"str"},{"label":"","value":"85","type":"str"},{"label":"","value":"84","type":"str"},{"label":"","value":"83","type":"str"},{"label":"","value":"82","type":"str"},{"label":"","value":"81","type":"str"},{"label":"","value":"80","type":"str"},{"label":"","value":"79","type":"str"},{"label":"","value":"78","type":"str"},{"label":"77 [-2-]","value":"77","type":"str"},{"label":"","value":"76","type":"str"},{"label":"","value":"75","type":"str"},{"label":"","value":"74","type":"str"},{"label":"","value":"73","type":"str"},{"label":"","value":"72","type":"str"},{"label":"","value":"71","type":"str"},{"label":"","value":"70","type":"str"},{"label":"","value":"69","type":"str"},{"label":"68 [-1-]","value":"68","type":"str"}],"payload":"","topic":"0","x":3630,"y":2120,"wires":[["fc7f9067.d4bdf"]]},{"id":"4f661f1a.c0021","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/floor_heat.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"floor_heat.pl /floorheat/+pred/","x":4250,"y":2160,"wires":[[],[],[]]},{"id":"7993b480.1cb13c","type":"file function","z":"de0536ab.6a9728","name":"decode_floor_ambient_status.js","filename":".node-red/js/decode_floor_ambient_status.js","reloadfile":false,"outputs":1,"x":3130,"y":2060,"wires":[["9ba67ba4.6db858"]]},{"id":"666710a1.beda3","type":"file function","z":"de0536ab.6a9728","name":"decode_floor_ambient_status.js","filename":".node-red/js/decode_floor_ambient_status.js","reloadfile":false,"outputs":1,"x":3130,"y":2220,"wires":[["5bd15507.d9d98c"]]},{"id":"487604af.bce91c","type":"file function","z":"de0536ab.6a9728","name":"decode_floor_status.js","filename":".node-red/js/decode_floor_status.js","reloadfile":false,"outputs":2,"x":3100,"y":2100,"wires":[["fd034719.15b1b8"],["12f1a6e9.9660c9"]]},{"id":"e000899c.431488","type":"file function","z":"de0536ab.6a9728","name":"decode_floor_status.js","filename":".node-red/js/decode_floor_status.js","reloadfile":false,"outputs":2,"x":3100,"y":2260,"wires":[["1662d738.0363a9"],["dfc0b325.066ee"]]},{"id":"2dbd210c.6a334e","type":"file function","z":"de0536ab.6a9728","name":"floor_heat_manager.js /floorheat-indirect/","filename":".node-red/js/floor_heat_manager.js","reloadfile":false,"outputs":1,"x":3160,"y":2160,"wires":[["4f661f1a.c0021"]]},{"id":"e22a485f.4ce1e8","type":"file function","z":"de0536ab.6a9728","name":"function_floor_power.js","filename":".node-red/js/function_floor_power.js","reloadfile":false,"outputs":1,"x":3930,"y":2100,"wires":[["4f661f1a.c0021"]]},{"id":"fc7f9067.d4bdf","type":"file function","z":"de0536ab.6a9728","name":"function_floor_setpoint.js","filename":".node-red/js/function_floor_setpoint.js","reloadfile":false,"outputs":1,"x":3930,"y":2220,"wires":[["4f661f1a.c0021"]]},{"id":"415e76be.d5e4a8","type":"ui_dropdown","z":"de0536ab.6a9728","name":"Floor Front Temp /floorheat-direct/","label":"Heat to:","place":"","group":"4166c8e2.b67978","order":4,"width":"3","height":"1","passthru":false,"options":[{"label":"104 [-5-]","value":"104","type":"str"},{"label":"","value":"103","type":"str"},{"label":"","value":"102","type":"str"},{"label":"","value":"101","type":"str"},{"label":"","value":"100","type":"str"},{"label":"","value":"99","type":"str"},{"label":"","value":"98","type":"str"},{"label":"","value":"97","type":"str"},{"label":" 96 [-4-]","value":"96","type":"str"},{"label":"","value":"95","type":"str"},{"label":"","value":"93","type":"str"},{"label":"","value":"92","type":"str"},{"label":"","value":"91","type":"str"},{"label":"","value":"90","type":"str"},{"label":"","value":"89","type":"str"},{"label":" 88 [-3-]","value":"88","type":"str"},{"label":"","value":"87","type":"str"},{"label":"","value":"86","type":"str"},{"label":"","value":"85","type":"str"},{"label":"","value":"84","type":"str"},{"label":"","value":"83","type":"str"},{"label":"","value":"82","type":"str"},{"label":"","value":"81","type":"str"},{"label":" 80 [-2-]","value":"80","type":"str"},{"label":"","value":"79","type":"str"},{"label":"","value":"78","type":"str"},{"label":"","value":"77","type":"str"},{"label":"","value":"76","type":"str"},{"label":"","value":"75","type":"str"},{"label":"","value":"74","type":"str"},{"label":"","value":"73","type":"str"},{"label":" 72 [-1-]","value":"72","type":"str"},{"label":"","value":"71","type":"str"},{"label":"","value":"70","type":"str"},{"label":"","value":"69","type":"str"},{"label":"","value":"68","type":"str"},{"label":"","value":"67","type":"str"},{"label":"","value":"66","type":"str"},{"label":"","value":"65","type":"str"},{"label":"","value":"64","type":"str"},{"label":"","value":"63","type":"str"},{"label":"","value":"62","type":"str"},{"label":"","value":"61","type":"str"},{"label":"","value":"60","type":"str"},{"label":"","value":"59","type":"str"},{"label":"","value":"58","type":"str"},{"label":"","value":"57","type":"str"},{"label":"","value":"56","type":"str"},{"label":"","value":"55","type":"str"},{"label":"","value":"54","type":"str"},{"label":"","value":"53","type":"str"},{"label":"","value":"52","type":"str"},{"label":"","value":"51","type":"str"},{"label":"","value":"50","type":"str"},{"label":"","value":"49","type":"str"},{"label":"","value":"48","type":"str"},{"label":"","value":"47","type":"str"},{"label":"","value":"46","type":"str"},{"label":"","value":"45","type":"str"},{"label":"","value":"44","type":"str"},{"label":"","value":"43","type":"str"},{"label":"","value":"42","type":"str"},{"label":"","value":"41","type":"str"},{"label":"","value":"40","type":"str"}],"payload":"","topic":"0","x":3620,"y":2140,"wires":[["fc7f9067.d4bdf"]]},{"id":"7a635f8f.0b6c4","type":"ui_dropdown","z":"de0536ab.6a9728","name":"Floor Rear Temp /floorheat-direct/","label":"Heat to:","place":"","group":"4166c8e2.b67978","order":8,"width":"3","height":"1","passthru":false,"options":[{"label":" 104 [-5-]","value":"104","type":"str"},{"label":"","value":"103","type":"str"},{"label":"","value":"102","type":"str"},{"label":"","value":"101","type":"str"},{"label":"","value":"100","type":"str"},{"label":"","value":"99","type":"str"},{"label":"","value":"98","type":"str"},{"label":"","value":"97","type":"str"},{"label":" 96 [-4-]","value":"96","type":"str"},{"label":"","value":"95","type":"str"},{"label":"","value":"93","type":"str"},{"label":"","value":"92","type":"str"},{"label":"","value":"91","type":"str"},{"label":"","value":"90","type":"str"},{"label":"","value":"89","type":"str"},{"label":" 88 [-3-]","value":"88","type":"str"},{"label":"","value":"87","type":"str"},{"label":"","value":"86","type":"str"},{"label":"","value":"85","type":"str"},{"label":"","value":"84","type":"str"},{"label":"","value":"83","type":"str"},{"label":"","value":"82","type":"str"},{"label":"","value":"81","type":"str"},{"label":" 80 [-2-]","value":"80","type":"str"},{"label":"","value":"79","type":"str"},{"label":"","value":"78","type":"str"},{"label":"","value":"77","type":"str"},{"label":"","value":"76","type":"str"},{"label":"","value":"75","type":"str"},{"label":"","value":"74","type":"str"},{"label":"","value":"73","type":"str"},{"label":" 72 [-1-]","value":"72","type":"str"},{"label":"","value":"71","type":"str"},{"label":"","value":"70","type":"str"},{"label":"","value":"69","type":"str"},{"label":"","value":"68","type":"str"},{"label":"","value":"67","type":"str"},{"label":"","value":"66","type":"str"},{"label":"","value":"65","type":"str"},{"label":"","value":"64","type":"str"},{"label":"","value":"63","type":"str"},{"label":"","value":"62","type":"str"},{"label":"","value":"61","type":"str"},{"label":"","value":"60","type":"str"},{"label":"","value":"59","type":"str"},{"label":"","value":"58","type":"str"},{"label":"","value":"57","type":"str"},{"label":"","value":"56","type":"str"},{"label":"","value":"55","type":"str"},{"label":"","value":"54","type":"str"},{"label":"","value":"53","type":"str"},{"label":"","value":"52","type":"str"},{"label":"","value":"51","type":"str"},{"label":"","value":"50","type":"str"},{"label":"","value":"49","type":"str"},{"label":"","value":"48","type":"str"},{"label":"","value":"47","type":"str"},{"label":"","value":"46","type":"str"},{"label":"","value":"45","type":"str"},{"label":"","value":"44","type":"str"},{"label":"","value":"43","type":"str"},{"label":"","value":"42","type":"str"},{"label":"","value":"41","type":"str"},{"label":"","value":"40","type":"str"}],"payload":"","topic":"1","x":3620,"y":2300,"wires":[["fc7f9067.d4bdf"]]},{"id":"abf7b521.e90b68","type":"template","z":"de0536ab.6a9728","name":"fan_template /ventfan-mid/+pred/","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{payload}} {{topic}}","x":4000,"y":1540,"wires":[["29fde7d5.d69108"]]},{"id":"72bd8146.df489","type":"template","z":"de0536ab.6a9728","name":"fan_template /ventfan-galley/+pred/","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{payload}} {{topic}}","x":4000,"y":1400,"wires":[["29fde7d5.d69108"]]},{"id":"26f19e00.5098a2","type":"template","z":"de0536ab.6a9728","name":"fan_template /ventfan-rear/+pred/","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{payload}} {{topic}}","x":4000,"y":1680,"wires":[["29fde7d5.d69108"]]},{"id":"4c8e6a2.04d7794","type":"template","z":"de0536ab.6a9728","name":"lid_template /ventfan-galley/+pred/","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{payload}} {{topic}}","x":4000,"y":1440,"wires":[["f7e30f2a.c243b"]]},{"id":"9daf737f.8e83","type":"template","z":"de0536ab.6a9728","name":"lid_template /ventfan-mid/+pred/","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{payload}} {{topic}}","x":4000,"y":1580,"wires":[["f7e30f2a.c243b"]]},{"id":"da362c86.c9b56","type":"template","z":"de0536ab.6a9728","name":"lid_template /ventfan-rear/+pred/","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"{{payload}} {{topic}}","x":4000,"y":1720,"wires":[["f7e30f2a.c243b"]]},{"id":"81cd158d.2705f8","type":"ui_text","z":"de0536ab.6a9728","group":"167edf8b.e385b","order":9,"width":"3","height":"1","name":"/preset-feature-spacer/","label":"","format":"{{msg.payload}}","layout":"row-center","x":2100,"y":1960,"wires":[]},{"id":"b7009fda.40157","type":"ui_switch","z":"de0536ab.6a9728","name":"Tank Heater /tankheat_out/","label":"Tank Heat","group":"4fd30f6d.93146","order":8,"width":"3","height":"1","passthru":false,"decouple":"true","topic":"0_state","onvalue":"on","onvalueType":"str","onicon":"","oncolor":"","offvalue":"off","offvalueType":"str","officon":"","offcolor":"","x":860,"y":2640,"wires":[["14680a97.4f7d25"]]},{"id":"ce1c27f1.d551a8","type":"mqtt in","z":"de0536ab.6a9728","name":"/tankheat_in/","topic":"RVC/DC_DIMMER_STATUS_3/0","qos":"0","broker":"689fc56b.144cec","x":110,"y":2640,"wires":[["e1198ef.0c2757"]]},{"id":"e1198ef.0c2757","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":270,"y":2640,"wires":[["4bcfed26.f1f694"]]},{"id":"6ccd6075.0f662","type":"ui_template","z":"2f811349.94c06c","group":"541b9b96.9a6354","name":"Voice Discovery Notes","order":1,"width":"6","height":"3","format":"<div style='margin-bottom: 1em;'>\nIf Alexa Discovery is not finding any devices, you can\nrestart the CoachProxyOS voice software with the button below,\nthen immediately try discovery again via Alexa.\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":460,"y":3560,"wires":[[]]},{"id":"6ecd43a5.978ccc","type":"ui_button","z":"2f811349.94c06c","name":"","group":"541b9b96.9a6354","order":2,"width":"6","height":"1","passthru":false,"label":"Restart Voice Integration","color":"","bgcolor":"","icon":"fa-refresh","payload":"Restarting Voice Software...","payloadType":"str","topic":"","x":470,"y":3600,"wires":[["61c90cc8.309304","26b69454.3f02bc","6efeb4b9.f3d45c"]]},{"id":"61c90cc8.309304","type":"exec","z":"2f811349.94c06c","command":"/coachproxy/ha-bridge/re-init","addpay":false,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"","x":770,"y":3600,"wires":[[],[],[]]},{"id":"26b69454.3f02bc","type":"delay","z":"2f811349.94c06c","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":700,"y":3560,"wires":[["9086d3b0.624a4"]]},{"id":"9086d3b0.624a4","type":"change","z":"2f811349.94c06c","name":"blank","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":3560,"wires":[["6efeb4b9.f3d45c"]]},{"id":"e8ed82bd.d24f7","type":"ui_button","z":"de0536ab.6a9728","name":"Front Cool /tstat0/","group":"f2e98653.59c9e8","order":2,"width":"2","height":"1","passthru":false,"label":"{{msg.label}}","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"cool","payloadType":"str","topic":"tstat_front","x":4170,"y":60,"wires":[["b0aba5ff.c9cea8"]]},{"id":"1de9eccb.e719b3","type":"ui_button","z":"de0536ab.6a9728","name":"Front HPump /tstat0/heatpump0/","group":"f2e98653.59c9e8","order":5,"width":"2","height":"1","passthru":false,"label":"{{msg.label}}","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"heat","payloadType":"str","topic":"tstat_front","x":4220,"y":100,"wires":[["b0aba5ff.c9cea8"]]},{"id":"ec758a32.f6c7f8","type":"ui_button","z":"de0536ab.6a9728","name":"Front Off /tstat0/","group":"f2e98653.59c9e8","order":11,"width":"2","height":"1","passthru":false,"label":"OFF","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"off","payloadType":"str","topic":"tstat_front","x":4170,"y":180,"wires":[["b0aba5ff.c9cea8"]]},{"id":"41b57361.11255c","type":"ui_dropdown","z":"de0536ab.6a9728","name":"Front Setpoint /tstat0/","label":"","place":"","group":"f2e98653.59c9e8","order":9,"width":"2","height":"1","passthru":false,"options":[{"label":"86 F","value":"86","type":"str"},{"label":"85 F","value":"85","type":"str"},{"label":"84 F","value":"84","type":"str"},{"label":"83 F","value":"83","type":"str"},{"label":"82 F","value":"82","type":"str"},{"label":"81 F","value":"81","type":"str"},{"label":"80 F","value":"80","type":"str"},{"label":"79 F","value":"79","type":"str"},{"label":"78 F","value":"78","type":"str"},{"label":"77 F","value":"77","type":"str"},{"label":"76 F","value":"76","type":"str"},{"label":"75 F","value":"75","type":"str"},{"label":"74 F","value":"74","type":"str"},{"label":"73 F","value":"73","type":"str"},{"label":"72 F","value":"72","type":"str"},{"label":"71 F","value":"71","type":"str"},{"label":"70 F","value":"70","type":"str"},{"label":"69 F","value":"69","type":"str"},{"label":"68 F","value":"68","type":"str"},{"label":"67 F","value":"67","type":"str"},{"label":"66 F","value":"66","type":"str"},{"label":"65 F","value":"65","type":"str"},{"label":"64 F","value":"64","type":"str"},{"label":"63 F","value":"63","type":"str"},{"label":"62 F","value":"62","type":"str"},{"label":"61 F","value":"61","type":"str"},{"label":"60 F","value":"60","type":"str"},{"label":"59 F","value":"59","type":"str"},{"label":"58 F","value":"58","type":"str"},{"label":"57 F","value":"57","type":"str"},{"label":"56 F","value":"56","type":"str"},{"label":"55 F","value":"55","type":"str"},{"label":"54 F","value":"54","type":"str"},{"label":"53 F","value":"53","type":"str"},{"label":"52 F","value":"52","type":"str"},{"label":"51 F","value":"51","type":"str"},{"label":"50 F","value":"50","type":"str"}],"payload":"","topic":"tstat_front","x":4180,"y":220,"wires":[["b0aba5ff.c9cea8"]]},{"id":"cd289ac2.034228","type":"ui_button","z":"de0536ab.6a9728","name":"Front Fan High /tstat0/","group":"f2e98653.59c9e8","order":7,"width":"2","height":"1","passthru":false,"label":"HIGH","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"high","payloadType":"str","topic":"tstat_front","x":4180,"y":340,"wires":[["b0aba5ff.c9cea8"]]},{"id":"4a9ed38c.bc59cc","type":"ui_button","z":"de0536ab.6a9728","name":"Front Fan Low /tstat0/","group":"f2e98653.59c9e8","order":10,"width":"2","height":"1","passthru":false,"label":"LOW","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"low","payloadType":"str","topic":"tstat_front","x":4180,"y":380,"wires":[["b0aba5ff.c9cea8"]]},{"id":"ea61b8db.c502f8","type":"ui_button","z":"de0536ab.6a9728","name":"Front Fan Auto /tstat0/","group":"f2e98653.59c9e8","order":13,"width":"2","height":"1","passthru":false,"label":"AUTO","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"auto","payloadType":"str","topic":"tstat_front","x":4180,"y":420,"wires":[["b0aba5ff.c9cea8"]]},{"id":"f67dc6ad.0f7da8","type":"switch","z":"de0536ab.6a9728","name":"Thermostat Instances","property":"payload.instance","propertyType":"msg","rules":[{"t":"eq","v":"$number($globalContext('settings2.tstat_first_zone'))","vt":"jsonata"},{"t":"eq","v":"$number($globalContext('settings2.tstat_first_zone'))+1","vt":"jsonata"},{"t":"eq","v":"$number($globalContext('settings2.tstat_first_zone'))+2","vt":"jsonata"},{"t":"eq","v":"$number($globalContext('settings2.tstat_first_zone'))+3","vt":"jsonata"},{"t":"eq","v":"$number($globalContext('settings2.tstat_first_zone'))+4","vt":"jsonata"}],"checkall":"true","repair":false,"outputs":5,"x":3380,"y":640,"wires":[["79294794.754918"],["ef49ff7d.4df61"],["a0ea6c6d.7454a"],["714bc92.66fc338"],["480203e0.b0ffac"]],"outputLabels":["front tstat","mid tstat","rear tstat","front furnace","rear furnace"]},{"id":"5ca1634.a702c9c","type":"ui_button","z":"de0536ab.6a9728","name":"Front Furn /furn0/","group":"f2e98653.59c9e8","order":8,"width":"2","height":"1","passthru":false,"label":"FURN","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"heat","payloadType":"str","topic":"tstat_front_furn","x":4170,"y":140,"wires":[["b0aba5ff.c9cea8"]]},{"id":"57eca149.5e237","type":"ui_button","z":"de0536ab.6a9728","name":"Front Temp Up /tstat0/","group":"f2e98653.59c9e8","order":6,"width":"2","height":"1","passthru":false,"label":"","color":"#DF6459","bgcolor":"white","icon":"fa-caret-up fa-3x","payload":"up","payloadType":"str","topic":"tstat_front","x":4180,"y":260,"wires":[["b0aba5ff.c9cea8"]]},{"id":"f0affb45.221a78","type":"ui_button","z":"de0536ab.6a9728","name":"Front Temp Down /tstat0/","group":"f2e98653.59c9e8","order":12,"width":"2","height":"1","passthru":false,"label":"","color":"#3D89BE","bgcolor":"white","icon":"fa-caret-down fa-3x","payload":"down","payloadType":"str","topic":"tstat_front","x":4190,"y":300,"wires":[["b0aba5ff.c9cea8"]]},{"id":"4068ffcf.1783b","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/thermostats.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"thermostats.pl /tstat/+pred/","x":4860,"y":600,"wires":[[],[],[]]},{"id":"9d062e5b.e5df1","type":"ui_button","z":"de0536ab.6a9728","name":"Mid Cool /tstat1/","group":"f2e98653.59c9e8","order":15,"width":"2","height":"1","passthru":false,"label":"{{msg.label}}","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"cool","payloadType":"str","topic":"tstat_mid","x":4170,"y":480,"wires":[["b0aba5ff.c9cea8"]]},{"id":"7dc4ff41.d6bb8","type":"ui_button","z":"de0536ab.6a9728","name":"Mid HPump /tstat1/heatpump1/","group":"f2e98653.59c9e8","order":18,"width":"2","height":"1","passthru":false,"label":"{{msg.label}}","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"heat","payloadType":"str","topic":"tstat_mid","x":4210,"y":520,"wires":[["b0aba5ff.c9cea8"]]},{"id":"4ba71557.7fc14c","type":"ui_button","z":"de0536ab.6a9728","name":"Mid Fan High /tstat1/","group":"f2e98653.59c9e8","order":21,"width":"2","height":"1","passthru":false,"label":"HIGH","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"high","payloadType":"str","topic":"tstat_mid","x":4180,"y":760,"wires":[["b0aba5ff.c9cea8"]]},{"id":"53cf6acc.056884","type":"ui_button","z":"de0536ab.6a9728","name":"Mid Temp Up /tstat1/","group":"f2e98653.59c9e8","order":20,"width":"2","height":"1","passthru":false,"label":"","color":"#DF6459","bgcolor":"white","icon":"fa-caret-up fa-3x","payload":"up","payloadType":"str","topic":"tstat_mid","x":4180,"y":680,"wires":[["b0aba5ff.c9cea8"]]},{"id":"278f1e80.a74c62","type":"ui_button","z":"de0536ab.6a9728","name":"Mid Fan Low /tstat1/","group":"f2e98653.59c9e8","order":24,"width":"2","height":"1","passthru":false,"label":"LOW","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"low","payloadType":"str","topic":"tstat_mid","x":4180,"y":800,"wires":[["b0aba5ff.c9cea8"]]},{"id":"69d93c3b.c90c04","type":"ui_button","z":"de0536ab.6a9728","name":"Mid Off /tstat1/","group":"f2e98653.59c9e8","order":25,"width":"2","height":"1","passthru":false,"label":"OFF","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"off","payloadType":"str","topic":"tstat_mid","x":4160,"y":600,"wires":[["b0aba5ff.c9cea8"]]},{"id":"3443a0f4.f7076","type":"ui_button","z":"de0536ab.6a9728","name":"Mid Temp Down /tstat1/","group":"f2e98653.59c9e8","order":26,"width":"2","height":"1","passthru":false,"label":"","color":"#3D89BE","bgcolor":"white","icon":"fa-caret-down fa-3x","payload":"down","payloadType":"str","topic":"tstat_mid","x":4190,"y":720,"wires":[["b0aba5ff.c9cea8"]]},{"id":"2c9912e2.daa8be","type":"ui_button","z":"de0536ab.6a9728","name":"Mid Fan Auto /tstat1/","group":"f2e98653.59c9e8","order":27,"width":"2","height":"1","passthru":false,"label":"AUTO","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"auto","payloadType":"str","topic":"tstat_mid","x":4180,"y":840,"wires":[["b0aba5ff.c9cea8"]]},{"id":"b204c556.0af178","type":"ui_dropdown","z":"de0536ab.6a9728","name":"Mid Setpoint /tstat1/","label":"","place":"","group":"f2e98653.59c9e8","order":23,"width":"2","height":"1","passthru":false,"options":[{"label":"86 F","value":"86","type":"str"},{"label":"85 F","value":"85","type":"str"},{"label":"84 F","value":"84","type":"str"},{"label":"83 F","value":"83","type":"str"},{"label":"82 F","value":"82","type":"str"},{"label":"81 F","value":"81","type":"str"},{"label":"80 F","value":"80","type":"str"},{"label":"79 F","value":"79","type":"str"},{"label":"78 F","value":"78","type":"str"},{"label":"77 F","value":"77","type":"str"},{"label":"76 F","value":"76","type":"str"},{"label":"75 F","value":"75","type":"str"},{"label":"74 F","value":"74","type":"str"},{"label":"73 F","value":"73","type":"str"},{"label":"72 F","value":"72","type":"str"},{"label":"71 F","value":"71","type":"str"},{"label":"70 F","value":"70","type":"str"},{"label":"69 F","value":"69","type":"str"},{"label":"68 F","value":"68","type":"str"},{"label":"67 F","value":"67","type":"str"},{"label":"66 F","value":"66","type":"str"},{"label":"65 F","value":"65","type":"str"},{"label":"64 F","value":"64","type":"str"},{"label":"63 F","value":"63","type":"str"},{"label":"62 F","value":"62","type":"str"},{"label":"61 F","value":"61","type":"str"},{"label":"60 F","value":"60","type":"str"},{"label":"59 F","value":"59","type":"str"},{"label":"58 F","value":"58","type":"str"},{"label":"57 F","value":"57","type":"str"},{"label":"56 F","value":"56","type":"str"},{"label":"55 F","value":"55","type":"str"},{"label":"54 F","value":"54","type":"str"},{"label":"53 F","value":"53","type":"str"},{"label":"52 F","value":"52","type":"str"},{"label":"51 F","value":"51","type":"str"},{"label":"50 F","value":"50","type":"str"}],"payload":"","topic":"tstat_mid","x":4180,"y":640,"wires":[["b0aba5ff.c9cea8"]]},{"id":"fbbfeeca.492c4","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Cool /tstat2/","group":"f2e98653.59c9e8","order":29,"width":"2","height":"1","passthru":false,"label":"{{msg.label}}","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"cool","payloadType":"str","topic":"tstat_rear","x":4170,"y":900,"wires":[["b0aba5ff.c9cea8"]]},{"id":"147160bc.806e1f","type":"ui_button","z":"de0536ab.6a9728","name":"Rear HPump /tstat2/heatpump2/","group":"f2e98653.59c9e8","order":32,"width":"2","height":"1","passthru":false,"label":"{{msg.label}}","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"heat","payloadType":"str","topic":"tstat_rear","x":4220,"y":940,"wires":[["b0aba5ff.c9cea8"]]},{"id":"b7e0e8b0.a44158","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Furn /tstat2/furn1/","group":"f2e98653.59c9e8","order":36,"width":"2","height":"1","passthru":false,"label":"FURN","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"heat","payloadType":"str","topic":"tstat_rear_furn","x":4190,"y":980,"wires":[["b0aba5ff.c9cea8"]]},{"id":"760801ab.bda88","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Fan High /tstat2/","group":"f2e98653.59c9e8","order":35,"width":"2","height":"1","passthru":false,"label":"HIGH","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"high","payloadType":"str","topic":"tstat_rear","x":4180,"y":1180,"wires":[["b0aba5ff.c9cea8"]]},{"id":"c423fc0b.d2c7f","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Temp Up /tstat2/","group":"f2e98653.59c9e8","order":34,"width":"2","height":"1","passthru":false,"label":"","color":"#DF6459","bgcolor":"white","icon":"fa-caret-up fa-3x","payload":"up","payloadType":"str","topic":"tstat_rear","x":4180,"y":1100,"wires":[["b0aba5ff.c9cea8"]]},{"id":"6139d7a6.c3ac68","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Fan Low /tstat2/","group":"f2e98653.59c9e8","order":39,"width":"2","height":"1","passthru":false,"label":"LOW","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"low","payloadType":"str","topic":"tstat_rear","x":4180,"y":1220,"wires":[["b0aba5ff.c9cea8"]]},{"id":"36b68b28.232da4","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Off /tstat2/","group":"f2e98653.59c9e8","order":40,"width":"2","height":"1","passthru":false,"label":"OFF","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"off","payloadType":"str","topic":"tstat_rear","x":4160,"y":1020,"wires":[["b0aba5ff.c9cea8"]]},{"id":"b3cef5c8.cf3608","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Temp Down /tstat2/","group":"f2e98653.59c9e8","order":41,"width":"2","height":"1","passthru":false,"label":"","color":"#3D89BE","bgcolor":"white","icon":"fa-caret-down fa-3x","payload":"down","payloadType":"str","topic":"tstat_rear","x":4190,"y":1140,"wires":[["b0aba5ff.c9cea8"]]},{"id":"4ebf4d98.402484","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Fan Auto /tstat2/","group":"f2e98653.59c9e8","order":42,"width":"2","height":"1","passthru":false,"label":"AUTO","color":"{{msg.foreground}}","bgcolor":"{{msg.background}}","icon":"","payload":"auto","payloadType":"str","topic":"tstat_rear","x":4180,"y":1260,"wires":[["b0aba5ff.c9cea8"]]},{"id":"63a8a13e.4f26f","type":"ui_dropdown","z":"de0536ab.6a9728","name":"Rear Setpoint /tstat2/","label":"","place":"","group":"f2e98653.59c9e8","order":38,"width":"2","height":"1","passthru":false,"options":[{"label":"86 F","value":"86","type":"str"},{"label":"85 F","value":"85","type":"str"},{"label":"84 F","value":"84","type":"str"},{"label":"83 F","value":"83","type":"str"},{"label":"82 F","value":"82","type":"str"},{"label":"81 F","value":"81","type":"str"},{"label":"80 F","value":"80","type":"str"},{"label":"79 F","value":"79","type":"str"},{"label":"78 F","value":"78","type":"str"},{"label":"77 F","value":"77","type":"str"},{"label":"76 F","value":"76","type":"str"},{"label":"75 F","value":"75","type":"str"},{"label":"74 F","value":"74","type":"str"},{"label":"73 F","value":"73","type":"str"},{"label":"72 F","value":"72","type":"str"},{"label":"71 F","value":"71","type":"str"},{"label":"70 F","value":"70","type":"str"},{"label":"69 F","value":"69","type":"str"},{"label":"68 F","value":"68","type":"str"},{"label":"67 F","value":"67","type":"str"},{"label":"66 F","value":"66","type":"str"},{"label":"65 F","value":"65","type":"str"},{"label":"64 F","value":"64","type":"str"},{"label":"63 F","value":"63","type":"str"},{"label":"62 F","value":"62","type":"str"},{"label":"61 F","value":"61","type":"str"},{"label":"60 F","value":"60","type":"str"},{"label":"59 F","value":"59","type":"str"},{"label":"58 F","value":"58","type":"str"},{"label":"57 F","value":"57","type":"str"},{"label":"56 F","value":"56","type":"str"},{"label":"55 F","value":"55","type":"str"},{"label":"54 F","value":"54","type":"str"},{"label":"53 F","value":"53","type":"str"},{"label":"52 F","value":"52","type":"str"},{"label":"51 F","value":"51","type":"str"},{"label":"50 F","value":"50","type":"str"}],"payload":"","topic":"tstat_rear","x":4180,"y":1060,"wires":[["b0aba5ff.c9cea8"]]},{"id":"179f7675.f9791a","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"obj","pretty":false,"x":3170,"y":640,"wires":[["f67dc6ad.0f7da8"]]},{"id":"ac8f7db1.c4924","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/THERMOSTAT_STATUS_1/#","qos":"0","broker":"689fc56b.144cec","x":2930,"y":640,"wires":[["179f7675.f9791a"]]},{"id":"eb557ca0.9f","type":"ui_button","z":"de0536ab.6a9728","name":"Mid Furn Spacer /tstat1/midfurn-spacer/","group":"f2e98653.59c9e8","order":22,"width":"2","height":"1","passthru":false,"label":"FURN","color":"#f8f8f8","bgcolor":"#f8f8f8","icon":"","payload":"heat","payloadType":"str","topic":"tstat_mid_furn","x":4240,"y":560,"wires":[[]]},{"id":"393486fe.a413ea","type":"ui_text","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","order":3,"width":"2","height":"1","name":"Front Tstat Spacer /tstat0/","label":"","format":"{{msg.payload}}","layout":"col-center","x":4570,"y":60,"wires":[]},{"id":"82455b5.83694a8","type":"ui_text","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","order":4,"width":"2","height":"1","name":"Front Fan Label /tstat0/","label":"Fan:","format":"{{msg.payload}}","layout":"row-center","x":4810,"y":60,"wires":[]},{"id":"9ade5358.0252d","type":"ui_text","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","order":16,"width":"2","height":"1","name":"Mid Tstat Spacer /tstat1/","label":"","format":"{{msg.payload}}","layout":"col-center","x":4570,"y":480,"wires":[]},{"id":"4ae1f5b0.ec921c","type":"ui_text","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","order":17,"width":"2","height":"1","name":"Mid Fan Label /tstat1/","label":"Fan:","format":"{{msg.payload}}","layout":"row-center","x":4800,"y":480,"wires":[]},{"id":"eee4e87d.c76838","type":"ui_text","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","order":30,"width":"2","height":"1","name":"Rear Tstat Spacer /tstat2/","label":"","format":"{{msg.payload}}","layout":"col-center","x":4550,"y":900,"wires":[]},{"id":"597b344.2061acc","type":"ui_text","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","order":31,"width":"2","height":"1","name":"Rear Fan Label /tstat2/","label":"Fan:","format":"{{msg.payload}}","layout":"row-center","x":4780,"y":900,"wires":[]},{"id":"402e2357.79ed7c","type":"file function","z":"de0536ab.6a9728","name":"thermostat_ambient_decode","filename":".node-red/js/thermostat_ambient_decode.js","reloadfile":false,"outputs":"3","x":3100,"y":1220,"wires":[["cbee941b.7c5cf8"],["948e6db2.73cf4"],["90829fa0.3410a"]]},{"id":"8664f188.3421c","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"obj","pretty":false,"x":2870,"y":1220,"wires":[["402e2357.79ed7c"]]},{"id":"cbee941b.7c5cf8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3330,"y":1180,"wires":[["11ae486a.c9d5e8"]]},{"id":"948e6db2.73cf4","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3330,"y":1220,"wires":[["3013af29.c9507"]]},{"id":"90829fa0.3410a","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3330,"y":1260,"wires":[["6552168a.7a7018"]]},{"id":"b5c10763.e62dc8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/THERMOSTAT_AMBIENT_STATUS/#","qos":"0","broker":"689fc56b.144cec","x":2600,"y":1220,"wires":[["8664f188.3421c"]]},{"id":"11ae486a.c9d5e8","type":"ui_template","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","name":"Thermostat Label - Front /tstat0/","order":1,"width":"6","height":"1","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: center\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    {{msg.payload.zone_name}}: <b>{{msg.payload.ambient_temp.toFixed(1)}}</b>&deg; {{msg.payload.unit}}\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":3580,"y":1180,"wires":[[]]},{"id":"3013af29.c9507","type":"ui_template","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","name":"Thermostat Label - Mid /tstat1/","order":14,"width":"6","height":"1","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: center\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    {{msg.payload.zone_name}}: <b>{{msg.payload.ambient_temp.toFixed(1)}}</b>&deg; {{msg.payload.unit}}\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":3570,"y":1220,"wires":[[]]},{"id":"6552168a.7a7018","type":"ui_template","z":"de0536ab.6a9728","group":"f2e98653.59c9e8","name":"Thermostat Label - Rear /tstat2/","order":28,"width":"6","height":"1","format":"<div style=\"height: 8px;\">&nbsp;</div>\n<div style=\"width: 100%; height: 8px; border-bottom: 1px solid black; text-align: center\">\n  <span style=\"font-size: 16px; background-color: #FEFEFE; padding: 0 10px; margin-left: 10px;\">\n    {{msg.payload.zone_name}}: <b>{{msg.payload.ambient_temp.toFixed(1)}}</b>&deg; {{msg.payload.unit}}\n  </span>\n</div>\n<div style=\"height: 11px;\">&nbsp;</div>","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":3570,"y":1260,"wires":[[]]},{"id":"235b44ed.12549c","type":"json","z":"de0536ab.6a9728","name":"","x":2870,"y":900,"wires":[["e54ed07b.d04c6"]]},{"id":"fbcf357b.90b8e8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/AC_LOAD_STATUS/208","qos":"2","broker":"689fc56b.144cec","x":2640,"y":900,"wires":[["235b44ed.12549c"]]},{"id":"e54ed07b.d04c6","type":"change","z":"de0536ab.6a9728","name":"Zone 0 AC","rules":[{"t":"set","p":"zone","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"device","pt":"msg","to":"ac","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3050,"y":900,"wires":[["d37aa79c.232118"]],"inputLabels":["mqtt topic name"],"outputLabels":["numeric instance topic"]},{"id":"d37aa79c.232118","type":"function","z":"de0536ab.6a9728","name":"ac hp AC Load Decoder /tstat/+pred/","func":"// Update global context with status on whether any air\n// conditioners or heat pumps are currently running.\n\n// Sometimes zone 0 is the front, sometimes it's zone 2 (if heated floors are 0 and 1)\nconst firstzone = parseInt(global.get('settings2').tstat_first_zone) || 0;\n\nconst zone      = msg.zone;\nconst device    = msg.device;\nconst instance  = zone + firstzone;\nconst acload    = msg.payload['operating status'] > 0 ? true : false;\n\nglobal.set('status.tstat[' + instance + '][\"' + device + '_on\"]', acload);","outputs":1,"noerr":0,"x":3330,"y":1000,"wires":[[]]},{"id":"c0eb4bed.fd62f8","type":"change","z":"de0536ab.6a9728","name":"Zone 1 AC","rules":[{"t":"set","p":"zone","pt":"msg","to":"1","tot":"num"},{"t":"set","p":"device","pt":"msg","to":"ac","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3050,"y":940,"wires":[["d37aa79c.232118"]],"inputLabels":["mqtt topic name"],"outputLabels":["numeric instance topic"]},{"id":"daac0592.a11428","type":"change","z":"de0536ab.6a9728","name":"Zone 2 AC","rules":[{"t":"set","p":"zone","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"device","pt":"msg","to":"ac","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3050,"y":980,"wires":[["d37aa79c.232118"]],"inputLabels":["mqtt topic name"],"outputLabels":["numeric instance topic"]},{"id":"30175e55.702312","type":"json","z":"de0536ab.6a9728","name":"","x":2870,"y":940,"wires":[["c0eb4bed.fd62f8"]]},{"id":"3c335dad.d4b312","type":"json","z":"de0536ab.6a9728","name":"","x":2870,"y":980,"wires":[["daac0592.a11428"]]},{"id":"b16e397a.e30af8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/AC_LOAD_STATUS/213","qos":"2","broker":"689fc56b.144cec","x":2640,"y":940,"wires":[["30175e55.702312"]]},{"id":"4badbf8e.958df","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/AC_LOAD_STATUS/215","qos":"2","broker":"689fc56b.144cec","x":2640,"y":980,"wires":[["3c335dad.d4b312"]]},{"id":"99afd4b2.9e4968","type":"json","z":"de0536ab.6a9728","name":"","x":2870,"y":1020,"wires":[["cd10d924.378868"]]},{"id":"c6bd6e8f.fe3bb","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/AC_LOAD_STATUS/209","qos":"2","broker":"689fc56b.144cec","x":2640,"y":1020,"wires":[["99afd4b2.9e4968"]]},{"id":"cd10d924.378868","type":"change","z":"de0536ab.6a9728","name":"Zone 0 HP","rules":[{"t":"set","p":"zone","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"device","pt":"msg","to":"hp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3050,"y":1020,"wires":[["d37aa79c.232118"]],"inputLabels":["mqtt topic name"],"outputLabels":["numeric instance topic"]},{"id":"6cc34acf.712db4","type":"change","z":"de0536ab.6a9728","name":"Zone 1 HP","rules":[{"t":"set","p":"zone","pt":"msg","to":"1","tot":"num"},{"t":"set","p":"device","pt":"msg","to":"hp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3050,"y":1060,"wires":[["d37aa79c.232118"]],"inputLabels":["mqtt topic name"],"outputLabels":["numeric instance topic"]},{"id":"90f59862.bbc158","type":"change","z":"de0536ab.6a9728","name":"Zone 2 HP","rules":[{"t":"set","p":"zone","pt":"msg","to":"2","tot":"num"},{"t":"set","p":"device","pt":"msg","to":"hp","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3050,"y":1100,"wires":[["d37aa79c.232118"]],"inputLabels":["mqtt topic name"],"outputLabels":["numeric instance topic"]},{"id":"b1c0589c.3c27b8","type":"json","z":"de0536ab.6a9728","name":"","x":2870,"y":1060,"wires":[["6cc34acf.712db4"]]},{"id":"d113e7e0.7b5b68","type":"json","z":"de0536ab.6a9728","name":"","x":2870,"y":1100,"wires":[["90f59862.bbc158"]]},{"id":"9a2af9f6.58c2a8","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/AC_LOAD_STATUS/214","qos":"2","broker":"689fc56b.144cec","x":2640,"y":1060,"wires":[["b1c0589c.3c27b8"]]},{"id":"48dd0e08.7f8e4","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/AC_LOAD_STATUS/216","qos":"2","broker":"689fc56b.144cec","x":2640,"y":1100,"wires":[["d113e7e0.7b5b68"]]},{"id":"bae39ad0.6d24f8","type":"ui_button","z":"de0536ab.6a9728","name":"Rear Furn Spacer /tstat2/furn1-spacer/","group":"f2e98653.59c9e8","order":37,"width":"2","height":"1","passthru":false,"label":"FURN","color":"#f8f8f8","bgcolor":"#f8f8f8","icon":"","payload":"heat","payloadType":"str","topic":"tstat_rear_furn","x":4600,"y":980,"wires":[[]]},{"id":"982016d4.a5d648","type":"ui_button","z":"de0536ab.6a9728","name":"Mid HPump Spacer /tstat1/heatpump1-spacer/","group":"f2e98653.59c9e8","order":19,"width":"2","height":"1","passthru":false,"label":"H.PUMP","color":"#f8f8f8","bgcolor":"#f8f8f8","icon":"","payload":"heat","payloadType":"str","topic":"tstat_mid","x":4640,"y":520,"wires":[[]]},{"id":"28fe3015.525c7","type":"ui_button","z":"de0536ab.6a9728","name":"Rear HPump Spacer /tstat2/heatpump2-spacer/","group":"f2e98653.59c9e8","order":33,"width":"2","height":"1","passthru":false,"label":"H.PUMP","color":"#f8f8f8","bgcolor":"#f8f8f8","icon":"","payload":"heat","payloadType":"str","topic":"tstat_rear","x":4620,"y":940,"wires":[[]]},{"id":"79294794.754918","type":"file function","z":"de0536ab.6a9728","name":"thermostat_status_decode.js","filename":".node-red/js/thermostat_status_decode.js","reloadfile":false,"outputs":7,"x":3700,"y":380,"wires":[["3936b10.3fb4d5"],["64a682cb.62e82c"],["5586ba5f.b7f404"],["b5dfdc50.26d85"],["bb5ce5e1.3e28a8"],["9c4a74e5.846db8"],["6484f887.c06f58"]]},{"id":"ef49ff7d.4df61","type":"file function","z":"de0536ab.6a9728","name":"thermostat_status_decode.js","filename":".node-red/js/thermostat_status_decode.js","reloadfile":false,"outputs":7,"x":3700,"y":640,"wires":[["eee10e2c.711b5"],["f5a83eff.a5727"],["a1609b74.b1ebd8"],["6ee02109.c4e4c"],["4b654640.102ea8"],["27b1399c.417246"],["f5ac0732.faf1d8"]]},{"id":"a0ea6c6d.7454a","type":"file function","z":"de0536ab.6a9728","name":"thermostat_status_decode.js","filename":".node-red/js/thermostat_status_decode.js","reloadfile":false,"outputs":7,"x":3700,"y":840,"wires":[["dae6a754.d25058"],["1cb2a52e.e8c1db"],["e7b2fb09.f1b8d8"],["dbf16801.c20078"],["596d45be.61b75c"],["3a333ae4.ff3b26"],["bd83aedf.806ed"]]},{"id":"714bc92.66fc338","type":"file function","z":"de0536ab.6a9728","name":"furnace_status_decode.js","filename":".node-red/js/furnace_status_decode.js","reloadfile":false,"outputs":2,"x":3690,"y":460,"wires":[["1ea6b8f4.081ea7"],["5586ba5f.b7f404"]]},{"id":"480203e0.b0ffac","type":"file function","z":"de0536ab.6a9728","name":"furnace_status_decode.js","filename":".node-red/js/furnace_status_decode.js","reloadfile":false,"outputs":2,"x":3690,"y":920,"wires":[["6c02a1a6.4e7de"],["e7b2fb09.f1b8d8"]]},{"id":"b0aba5ff.c9cea8","type":"file function","z":"de0536ab.6a9728","name":"thermostat_command.js","filename":".node-red/js/thermostat_command.js","reloadfile":false,"outputs":1,"x":4590,"y":600,"wires":[["4068ffcf.1783b"]]},{"id":"79384503.aa066c","type":"switch","z":"de0536ab.6a9728","name":"Lock Type","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"--","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1690,"y":980,"wires":[["cf00240d.584018"],["e59ac542.75fb08"]],"outputLabels":["2019+","2015-2018"]},{"id":"cf00240d.584018","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/dc_dimmer_pair.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"dc_dimmer_pair.pl /locks/+pred/","x":1930,"y":960,"wires":[[],[],[]]},{"id":"63e0c9ac.4e0648","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"NETWORK/#","qos":"0","broker":"689fc56b.144cec","x":110,"y":420,"wires":[["16a85e28.6534b2"]]},{"id":"c16102db.42112","type":"ui_template","z":"2f811349.94c06c","group":"89741f7.6ae75e","name":"WiFi Network Info","order":1,"width":"6","height":"6","format":"<div layout=\"column\" layout-align=\"space-between\">\n    <div>{{msg.message}}</div>&nbsp;\n    <div>&nbsp;</div>\n    <div style=\"text-align: center; font-weight: bold\">Your WiFi Network</div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>Network:</span>{{msg.data.WPA.SSID}}</div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>IP Address:</span><a href='http://{{msg.data.WPA.IP}}'>{{msg.data.WPA.IP}}</a></div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>HW Address:</span>{{msg.data.WPA.MAC}}</div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>Connection Status:</span>{{msg.data.WPA.STATE}}</div>&nbsp;\n    <div layout=\"row\" layout-align=\"space-between\"><span>Connection Quality:</span>{{msg.data.WPA.QUALITY}}%</div>&nbsp;\n    <p>&nbsp;</p>\n</div>\n","storeOutMessages":false,"fwdInMessages":false,"templateScope":"local","x":890,"y":420,"wires":[[]]},{"id":"c474b0ce.25e0e","type":"rbe","z":"2f811349.94c06c","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":510,"y":420,"wires":[["13a7f1dc.6e20ee"]]},{"id":"16a85e28.6534b2","type":"file function","z":"2f811349.94c06c","name":"network_info.js","filename":".node-red/js/network_info.js","reloadfile":false,"outputs":1,"x":320,"y":420,"wires":[["c474b0ce.25e0e"]]},{"id":"fcd1e85c.1e0dc8","type":"file function","z":"de0536ab.6a9728","name":"power_flow_function","filename":".node-red/js/power_flow_function.js","reloadfile":false,"outputs":1,"x":1100,"y":3060,"wires":[["d08350e4.1f60f"]]},{"id":"6ee02109.c4e4c","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":640,"wires":[["b204c556.0af178"]]},{"id":"b5dfdc50.26d85","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":220,"wires":[["41b57361.11255c"]]},{"id":"dbf16801.c20078","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":1060,"wires":[["63a8a13e.4f26f"]]},{"id":"d07dd17c.d6265","type":"file function","z":"de0536ab.6a9728","name":"preset_save.js","filename":".node-red/js/preset_save.js","reloadfile":false,"outputs":2,"x":1980,"y":2000,"wires":[["e256da8d.ee1fb8"],["2f5b6039.18cf4"]]},{"id":"c7fc8f99.18699","type":"file function","z":"2f811349.94c06c","name":"initialize_global_context.js","filename":".node-red/js/initialize_global_context.js","reloadfile":true,"outputs":1,"x":470,"y":80,"wires":[["d2d337c3.70d8e8","2a76f731.ada078","3186df4e.899b5"]]},{"id":"448ba0a6.d15fc","type":"file function","z":"de0536ab.6a9728","name":"preset_restore.js","filename":".node-red/js/preset_restore.js","reloadfile":false,"outputs":4,"x":2040,"y":2320,"wires":[["92cd77c5.139c38"],["1d6db93d.184197"],[],[]],"outputLabels":["lights","tstats","floors","vents"]},{"id":"1d6db93d.184197","type":"exec","z":"de0536ab.6a9728","command":"/coachproxy/rv-c/thermostats.pl ","addpay":true,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"thermostats.pl /tstat/","x":2280,"y":2280,"wires":[[],[],[]]},{"id":"bc8fbbcb.168d88","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[7].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2380,"wires":[["92c3f666.b08498"]]},{"id":"92c3f666.b08498","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 7 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"7. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"7","x":1800,"y":2380,"wires":[["448ba0a6.d15fc"]]},{"id":"ab9fa50b.fc5f98","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[8].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2420,"wires":[["4c639aeb.334664"]]},{"id":"4c639aeb.334664","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 8 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"8. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"8","x":1800,"y":2420,"wires":[["448ba0a6.d15fc"]]},{"id":"8086d6cf.74aea8","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[9].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2460,"wires":[["bc7322e1.6f9e"]]},{"id":"bc7322e1.6f9e","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 9 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"9. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"9","x":1800,"y":2460,"wires":[["448ba0a6.d15fc"]]},{"id":"436582ff.dd6b7c","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"presets[10].name","tot":"global"},{"t":"set","p":"enabled","pt":"msg","to":"payload != ''","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1580,"y":2500,"wires":[["ac74aea7.186d9"]]},{"id":"ac74aea7.186d9","type":"ui_button","z":"de0536ab.6a9728","name":"Preset 10 Button","group":"2ebc985e.745fd8","order":2,"width":"0","height":"0","passthru":false,"label":"10. {{msg.payload}}","color":"","bgcolor":"","icon":"","payload":"activate","payloadType":"str","topic":"10","x":1810,"y":2500,"wires":[["448ba0a6.d15fc"]]},{"id":"61fca91e.79e918","type":"json","z":"2f811349.94c06c","name":"","property":"payload","action":"","pretty":false,"x":790,"y":3440,"wires":[["ff63d14.28fc63"]]},{"id":"e796ae54.5607b","type":"file in","z":"2f811349.94c06c","name":"ha-bridge/device.db","filename":"/coachproxy/ha-bridge/device.db","format":"utf8","chunk":false,"sendError":false,"x":580,"y":3440,"wires":[["61fca91e.79e918"]]},{"id":"ff63d14.28fc63","type":"function","z":"2f811349.94c06c","name":"Create Voice Command List","func":"var template = '<div layout=\"column\" layout-align=\"space-between\">';\ntemplate += '<p>Voice Integration supports ' + (msg.payload).length + ' voice command devices for your coach, listed below.</p>\\n';\ntemplate += '<p>Each device responds to \"turn on\" and \"turn off\" voice commands. Devices listed with a plus sign (<b>+</b>) in front of them also respond to \"dim\" commands.</p>\\n';\ntemplate += '<p>Some example commands include: \"Alexa, turn on task light\", or \"Alexa, dim main ceiling light to 50 percent\".</p>\\n';\ntemplate += '<hr>\\n';\n\ntemplate += '<p>';\nfor (let i = 0; i < (msg.payload).length; i++) {\n    let name = msg.payload[i].name.trim();\n    let dim = msg.payload[i].dimUrl;\n    let bullet = dim ? '+' : '-';\n    template += bullet + ' ' + name + '<br>\\n';\n}\ntemplate += '</p>';\n\ntemplate += '</div>';\nmsg.template = template;\n\nreturn msg;","outputs":1,"noerr":0,"x":1020,"y":3440,"wires":[["20c7cb92.2d91f4"]]},{"id":"20c7cb92.2d91f4","type":"ui_template","z":"2f811349.94c06c","group":"6c056dd3.cf5af4","name":"Voice Command List","order":1,"width":"6","height":"25","format":"","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1300,"y":3440,"wires":[[]]},{"id":"906ac97f.25e608","type":"inject","z":"2f811349.94c06c","name":"inject at start","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":330,"y":3440,"wires":[["e796ae54.5607b"]]},{"id":"84fd2069.1bf8c","type":"comment","z":"2f811349.94c06c","name":"Voice Integration Settings","info":"","x":350,"y":3400,"wires":[]},{"id":"7b8ccade.bac674","type":"change","z":"de0536ab.6a9728","name":"Set Chart Label","rules":[{"t":"set","p":"topic","pt":"msg","to":"$replace(msg.topic, /.*\\//, '')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":3560,"wires":[["683f3e41.a1632"]]},{"id":"66ae5b34.58ede4","type":"mqtt in","z":"60515b24.49bab4","name":"","topic":"RVC/TANK_STATUS/#","qos":"2","broker":"689fc56b.144cec","x":140,"y":80,"wires":[["71e5aada.1c85c4"]]},{"id":"71e5aada.1c85c4","type":"json","z":"60515b24.49bab4","name":"","property":"payload","action":"","pretty":false,"x":410,"y":80,"wires":[["445c9e5f.29fae"]]},{"id":"2a4ee07a.dfe57","type":"mqtt out","z":"60515b24.49bab4","name":"CP/TANK_STATUS/TankName","topic":"","qos":"","retain":"","broker":"689fc56b.144cec","x":890,"y":80,"wires":[]},{"id":"bc7ccbcf.f2dc98","type":"comment","z":"60515b24.49bab4","name":"Determine parking brake and ignition status and republish it","info":"","x":260,"y":160,"wires":[]},{"id":"57142f82.f589d","type":"mqtt in","z":"60515b24.49bab4","name":"","topic":"RVC/CHASSIS_MOBILITY_STATUS","qos":"2","broker":"689fc56b.144cec","x":180,"y":200,"wires":[["b1daccb5.b2dfe"]]},{"id":"b1daccb5.b2dfe","type":"json","z":"60515b24.49bab4","name":"","property":"payload","action":"","pretty":false,"x":410,"y":200,"wires":[["4a5455d1.0985ec"]]},{"id":"bd2084b8.1f0908","type":"mqtt out","z":"60515b24.49bab4","name":"CP/IGNITION or CP/PARKBRAKE","topic":"","qos":"","retain":"","broker":"689fc56b.144cec","x":900,"y":200,"wires":[]},{"id":"bc7f0361.4e1b6","type":"comment","z":"60515b24.49bab4","name":"Calculate holding tank percent full and republish it","info":"","x":230,"y":40,"wires":[]},{"id":"a01aab42.ea3d78","type":"mqtt in","z":"de0536ab.6a9728","name":"","topic":"RVC/GENERIC_INDICATOR_COMMAND/255","qos":"2","broker":"689fc56b.144cec","x":1190,"y":80,"wires":[["ce7dc21.f80c54"]]},{"id":"ce7dc21.f80c54","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":1450,"y":80,"wires":[["213fd5ec.3e16ba"]]},{"id":"236c8b1f.ffe774","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.brightness > 0 ? 100 : 0","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1820,"y":60,"wires":[["56c1086b.cc21f8"]]},{"id":"80e2fd5f.52985","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.brightness","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1820,"y":100,"wires":[["545516cc.214aa8"]]},{"id":"a8234617.b2a018","type":"template","z":"de0536ab.6a9728","name":"Add group id","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"126 {{payload}}","output":"str","x":2190,"y":80,"wires":[["c68795b9.0ec1c8"]]},{"id":"acc55b08.5d22b8","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2950,"y":1440,"wires":[["3e4eb113.575bae"]]},{"id":"2704f048.9ed91","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2950,"y":1580,"wires":[["22a514b.e06f7ec"]]},{"id":"8670021b.dd697","type":"json","z":"de0536ab.6a9728","name":"","property":"payload","action":"","pretty":false,"x":2950,"y":1720,"wires":[["a2b5b73d.ffdce8"]]},{"id":"d08350e4.1f60f","type":"throttle","z":"de0536ab.6a9728","name":"","throttleType":"time","timeLimit":"2","timeLimitType":"seconds","countLimit":0,"blockSize":0,"locked":false,"x":1300,"y":3060,"wires":[["8a0c999.d2dad68"]]},{"id":"942086a6.5d3f38","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$round(payload.\"rms current\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":3300,"wires":[["81438350.41266"]]},{"id":"a20e0de6.ac5a7","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$round(payload.\"rms current\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":3380,"wires":[["57925a0a.6f5564"]]},{"id":"8a1ed578.d66b28","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$round(payload.\"rms voltage\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":3340,"wires":[["7130fef5.a8939"]]},{"id":"1cf1ca6a.a51be6","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$round(payload.\"rms voltage\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":3420,"wires":[["bfa5c6d3.2943e8"]]},{"id":"cafd36b8.59c878","type":"mqtt in","z":"60515b24.49bab4","name":"","topic":"RVC/GENERATOR_STATUS_1","qos":"2","broker":"689fc56b.144cec","x":160,"y":320,"wires":[["ef47ac72.a72f7"]]},{"id":"ef47ac72.a72f7","type":"json","z":"60515b24.49bab4","name":"","property":"payload","action":"","pretty":false,"x":410,"y":320,"wires":[["cc67be16.6b1a6"]]},{"id":"d723afe5.5b2be","type":"mqtt out","z":"60515b24.49bab4","name":"","topic":"CP/GENERATOR","qos":"","retain":"","broker":"689fc56b.144cec","x":910,"y":320,"wires":[]},{"id":"2d2d522b.656e1e","type":"comment","z":"60515b24.49bab4","name":"Republish generator status in simple form","info":"","x":200,"y":280,"wires":[]},{"id":"f5fc301f.ef658","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"type","pt":"msg","to":"generator","tot":"str"},{"t":"set","p":"pkttime","pt":"msg","to":"$substringAfter(payload, ',')","tot":"jsonata"},{"t":"set","p":"payload","pt":"msg","to":"$substringBefore(payload, ',')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":520,"y":3920,"wires":[["3e5bc4d7.8617cc"]]},{"id":"4bcfed26.f1f694","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"brightness","pt":"msg","to":"payload['operating status (brightness)']","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"brightness > 0 ? 'on' : 'off'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":2640,"wires":[["2562e80.55fee18"]]},{"id":"e513a0b6.5b316","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"brightness","pt":"msg","to":"payload['operating status (brightness)']","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"brightness > 0 ? 'on' : 'off'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":2600,"wires":[["8664a34d.d61e9"]]},{"id":"c1af1edf.24591","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"brightness","pt":"msg","to":"payload['operating status (brightness)']","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"brightness > 0 ? 'on' : 'off'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":2560,"wires":[["bb9eb964.5f6558"]]},{"id":"57d228e7.853798","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"brightness","pt":"msg","to":"payload['operating status (brightness)']","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"brightness > 0 ? 'on' : 'off'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":2520,"wires":[["9b544bff.1ded98"]]},{"id":"83423c2a.fb403","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"brightness","pt":"msg","to":"payload['operating status (brightness)']","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"brightness > 0 ? 'on' : 'off'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":440,"y":2480,"wires":[["92c7747e.0619b8"]]},{"id":"213fd5ec.3e16ba","type":"switch","z":"de0536ab.6a9728","name":"Pass Group 126","property":"payload.group","propertyType":"msg","rules":[{"t":"eq","v":"01111110","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":1620,"y":80,"wires":[["236c8b1f.ffe774","80e2fd5f.52985"]]},{"id":"4a5455d1.0985ec","type":"file function","z":"60515b24.49bab4","name":"decode_chassis_mobility","filename":".node-red/js/decode_chassis_mobility.js","reloadfile":false,"outputs":1,"x":610,"y":200,"wires":[["bd2084b8.1f0908"]]},{"id":"445c9e5f.29fae","type":"file function","z":"60515b24.49bab4","name":"decode_tank","filename":".node-red/js/decode_tank.js","reloadfile":false,"outputs":1,"x":570,"y":80,"wires":[["2a4ee07a.dfe57"]]},{"id":"bd32ff66.b734f","type":"file function","z":"de0536ab.6a9728","name":"ats_source_decode","filename":".node-red/js/ats_source_decode.js","reloadfile":false,"outputs":1,"x":650,"y":3260,"wires":[["1b0e524c.b502be"]]},{"id":"cba47265.c93b1","type":"split","z":"de0536ab.6a9728","name":"","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":1020,"y":3660,"wires":[[]]},{"id":"3bcfba9b.764a06","type":"file function","z":"de0536ab.6a9728","name":"preset_delete.js","filename":".node-red/js/preset_delete.js","reloadfile":false,"outputs":2,"x":1980,"y":2040,"wires":[["e256da8d.ee1fb8"],["ef130c2b.b2dc4","2f5b6039.18cf4"]]},{"id":"28f955b1.fcd18a","type":"file function","z":"de0536ab.6a9728","name":"thermostat_ambient_decode_ext","filename":".node-red/js/thermostat_ambient_decode_ext.js","reloadfile":false,"outputs":2,"x":3120,"y":140,"wires":[["ef0f5174.46ceb"],["ed6705b4.a9ccd8"]]},{"id":"84f68b2f.fbe498","type":"http request","z":"2f811349.94c06c","name":"ngrok tunnel info","method":"GET","ret":"txt","url":"http://localhost:4040/api/tunnels/coachproxy","tls":"","x":690,"y":2380,"wires":[["7940f92.4f63008"]]},{"id":"397d7f2b.ac71a","type":"inject","z":"2f811349.94c06c","name":"","topic":"","payload":"true","payloadType":"bool","repeat":"1","crontab":"","once":true,"onceDelay":"1","x":490,"y":2380,"wires":[["84f68b2f.fbe498"]]},{"id":"f6426c97.9d4a4","type":"json","z":"2f811349.94c06c","name":"","property":"payload","action":"","pretty":false,"x":1050,"y":2360,"wires":[["39f5f35e.43611c"]]},{"id":"7940f92.4f63008","type":"switch","z":"2f811349.94c06c","name":"Status Code","property":"statusCode","propertyType":"msg","rules":[{"t":"eq","v":"200","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":890,"y":2380,"wires":[["f6426c97.9d4a4"],["90df1cc2.812f3"]]},{"id":"90df1cc2.812f3","type":"change","z":"2f811349.94c06c","name":"Offline","rules":[{"t":"set","p":"payload","pt":"msg","to":"Offline","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1190,"y":2400,"wires":[["2481cdc6.86d772"]]},{"id":"39f5f35e.43611c","type":"change","z":"2f811349.94c06c","name":"Link URL","rules":[{"t":"set","p":"payload","pt":"msg","to":"\"<a target='_tunnel' href='\" & payload.public_url & \"/ui'>\" & payload.public_url & \"/ui</a>\"","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1200,"y":2360,"wires":[["2481cdc6.86d772"]]},{"id":"c7e0a8dd.cc4708","type":"ui_text","z":"2f811349.94c06c","group":"7b37b867.538e78","order":1,"width":0,"height":0,"name":"","label":"Remote Access URL:","format":"{{msg.payload}}","layout":"col-center","x":1540,"y":2400,"wires":[]},{"id":"7551e717.143568","type":"comment","z":"2f811349.94c06c","name":"Remote Access Settings","info":"","x":610,"y":2320,"wires":[]},{"id":"668399a8.fe9aa8","type":"ui_switch","z":"2f811349.94c06c","name":"","label":"Enable Remote Access","group":"7b37b867.538e78","order":3,"width":0,"height":0,"passthru":false,"decouple":"false","topic":"remote_access","style":"","onvalue":"true","onvalueType":"str","onicon":"","oncolor":"","offvalue":"false","offvalueType":"str","officon":"","offcolor":"","x":890,"y":2480,"wires":[["ac7534c7.cd1918","a5425b6d.7b15e8"]]},{"id":"a5425b6d.7b15e8","type":"exec","z":"2f811349.94c06c","command":"/coachproxy/bin/apply_remote_access_settings.sh","addpay":false,"append":"","useSpawn":"","timer":"","oldrc":false,"name":"apply_remote_access_settings.sh","x":1440,"y":2580,"wires":[["405118af.dc97d8"],[],["70be94f3.6ccffc"]]},{"id":"e9034855.9cd368","type":"ui_text_input","z":"2f811349.94c06c","name":"ngrok Authtoken","label":"Enter your ngrok Authtoken","group":"7b37b867.538e78","order":4,"width":"0","height":"0","passthru":false,"mode":"text","delay":"300","topic":"ngrok_auth","x":910,"y":2520,"wires":[["858bff09.75906"]]},{"id":"aad413cd.7f79c","type":"ui_text_input","z":"2f811349.94c06c","name":"Remote Username","label":"Choose a Remote Access username","group":"7b37b867.538e78","order":5,"width":"0","height":"0","passthru":false,"mode":"text","delay":"300","topic":"remote_username","x":910,"y":2560,"wires":[["858bff09.75906"]]},{"id":"bc2a6400.3e08e","type":"ui_text_input","z":"2f811349.94c06c","name":"Remote Password","label":"Choose a Remote Access password","group":"7b37b867.538e78","order":6,"width":"0","height":"0","passthru":false,"mode":"text","delay":"300","topic":"remote_password","x":910,"y":2600,"wires":[["858bff09.75906"]]},{"id":"601c90ee.65ba8","type":"ui_button","z":"2f811349.94c06c","name":"","group":"7b37b867.538e78","order":9,"width":"4","height":"1","passthru":false,"label":"Save","color":"","bgcolor":"","icon":"fa-check","payload":"save","payloadType":"str","topic":"","x":950,"y":2680,"wires":[["3e470ffe.3340d","a5425b6d.7b15e8"]]},{"id":"60277978.c3a158","type":"ui_button","z":"2f811349.94c06c","name":"","group":"7b37b867.538e78","order":10,"width":"2","height":"1","passthru":false,"label":"Undo","color":"","bgcolor":"#8D4040","icon":"fa-undo","payload":"delete","payloadType":"str","topic":"","x":410,"y":2680,"wires":[["a0560637.950048","bbe7d44c.313d68","693be3b.3e2fa1c","f675d15b.b6f33"]]},{"id":"afeeed5f.fa1aa","type":"ui_template","z":"2f811349.94c06c","group":"7b37b867.538e78","name":"Remote Access Settings","order":2,"width":"6","height":"3","format":"<div layout=\"column\" layout-align=\"space-between\">\n<p>\nBefore using Remote Access, please read the\n<a target='_blank' href='http://coachproxy.com/remote-access-setup-new'>instructions\non how to set up and configure it.</a>\n</p>\n<p>\nEnter your ngrok Authtoken below, and choose a username and\npassword for your Remote Access service.\n</p>\n</div>\n","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":890,"y":2440,"wires":[[]]},{"id":"ac7534c7.cd1918","type":"link out","z":"2f811349.94c06c","name":"Remote access settings changed","links":["3c54947a.496c9c"],"x":1315,"y":2480,"wires":[]},{"id":"4482228e.ef73bc","type":"link in","z":"2f811349.94c06c","name":"Set remote access fields","links":["1a04f183.12f89e"],"x":375,"y":2540,"wires":[["4574535b.c0ee9c","a0560637.950048","bbe7d44c.313d68","693be3b.3e2fa1c","f675d15b.b6f33"]]},{"id":"4574535b.c0ee9c","type":"change","z":"2f811349.94c06c","name":"settings2.remote_access","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.remote_access')","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":610,"y":2480,"wires":[["668399a8.fe9aa8"]]},{"id":"858bff09.75906","type":"file function","z":"2f811349.94c06c","name":"form_field_save.js","filename":".node-red/js/form_field_save.js","reloadfile":false,"outputs":1,"x":1150,"y":2580,"wires":[[]]},{"id":"3e470ffe.3340d","type":"function","z":"2f811349.94c06c","name":"Save Remote Settings","func":"const topics = ['ngrok_auth', 'remote_username', 'remote_password', 'remote_subdomain'];\nvar msgs = [];\n\ntopics.forEach(function(topic) {\n  const value = global.get('form')[topic] || '';\n  const newmsg = { topic: topic, payload: value };\n  msgs.push(newmsg);\n});\n\nreturn [ msgs ];\n","outputs":1,"noerr":0,"x":1160,"y":2680,"wires":[["ac7534c7.cd1918"]]},{"id":"a0560637.950048","type":"change","z":"2f811349.94c06c","name":"settings2.ngrok_auth","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.ngrok_auth')","tot":"jsonata"},{"t":"set","p":"form.ngrok_auth","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":2520,"wires":[["e9034855.9cd368"]]},{"id":"bbe7d44c.313d68","type":"change","z":"2f811349.94c06c","name":"settings2.remote_username","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.remote_username')","tot":"jsonata"},{"t":"set","p":"form.remote_username","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":2560,"wires":[["aad413cd.7f79c"]]},{"id":"693be3b.3e2fa1c","type":"change","z":"2f811349.94c06c","name":"settings2.remote_password","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"},{"t":"set","p":"form.remote_password","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":2600,"wires":[["bc2a6400.3e08e"]]},{"id":"f1fc8299.1f702","type":"catch","z":"2f811349.94c06c","name":"Catch ECONNREFUSED","scope":["84f68b2f.fbe498"],"x":690,"y":2360,"wires":[[]]},{"id":"aa5fcaba.b6bb58","type":"ui_text_input","z":"2f811349.94c06c","name":"Remote Subdomain","label":"Custom subdomain (paid plan)","group":"7b37b867.538e78","order":7,"width":"0","height":"0","passthru":false,"mode":"text","delay":"300","topic":"remote_subdomain","x":900,"y":2640,"wires":[["858bff09.75906"]]},{"id":"f675d15b.b6f33","type":"change","z":"2f811349.94c06c","name":"settings2.remote_subdomain","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.remote_subdomain')","tot":"jsonata"},{"t":"set","p":"form.remote_subdomain","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":2640,"wires":[["aa5fcaba.b6bb58"]]},{"id":"cc144a2.ca218b8","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"CP/MESSAGE/REMOTEACCESS","qos":"0","broker":"689fc56b.144cec","x":390,"y":2720,"wires":[["7375ad14.0f15b4","64aaca36.d78db4"]]},{"id":"7375ad14.0f15b4","type":"trigger","z":"2f811349.94c06c","op1":"","op2":" ","op1type":"nul","op2type":"str","duration":"15","extend":true,"units":"s","reset":"","bytopic":"all","name":"15 Second Reset","x":650,"y":2700,"wires":[["64aaca36.d78db4"]]},{"id":"64aaca36.d78db4","type":"ui_text","z":"2f811349.94c06c","group":"7b37b867.538e78","order":8,"width":0,"height":0,"name":"Remote Access Feedback","label":"","format":"{{msg.payload}}","layout":"col-center","x":900,"y":2720,"wires":[]},{"id":"405118af.dc97d8","type":"switch","z":"2f811349.94c06c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ERR_NGROK_108","vt":"str"},{"t":"cont","v":"ERR_NGROK_313","vt":"str"},{"t":"cont","v":"ERR_NGROK_320","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":1670,"y":2580,"wires":[["7b1fe4d2.c59d1c","c76759dc.a14f98"],["518db6eb.9b5e78","c76759dc.a14f98"],["e997fdf0.ad1e9","c76759dc.a14f98"]]},{"id":"518db6eb.9b5e78","type":"change","z":"2f811349.94c06c","name":"ERR: Requires paid account","rules":[{"t":"set","p":"payload","pt":"msg","to":"ERROR: Custom subdomains require a paid ngrok account.","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1880,"y":2580,"wires":[["fba84e87.690b"]]},{"id":"e997fdf0.ad1e9","type":"change","z":"2f811349.94c06c","name":"ERR: Subdomain not reserved","rules":[{"t":"set","p":"payload","pt":"msg","to":"ERROR: Custom subdomain not available. Reserve at <a target='blank' href=\"https://dashboard.ngrok.com/reserved\">dashboard.ngrok.com/reserved</a>","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1890,"y":2620,"wires":[["fba84e87.690b"]]},{"id":"fba84e87.690b","type":"mqtt out","z":"2f811349.94c06c","name":"","topic":"CP/MESSAGE/REMOTEACCESS","qos":"","retain":"","broker":"689fc56b.144cec","x":2200,"y":2580,"wires":[]},{"id":"7b1fe4d2.c59d1c","type":"change","z":"2f811349.94c06c","name":"ERR: Authtoken in use","rules":[{"t":"set","p":"payload","pt":"msg","to":"ERROR: A tunnel is already in use with this Authtoken.","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1860,"y":2540,"wires":[["fba84e87.690b"]]},{"id":"503dd5a1.c4418c","type":"link in","z":"2f811349.94c06c","name":"Load settings2 from sqlite","links":["59ed82e6.455e9c"],"x":535,"y":160,"wires":[["2a76f731.ada078"]]},{"id":"59ed82e6.455e9c","type":"link out","z":"2f811349.94c06c","name":"Remote access settings applied","links":["503dd5a1.c4418c"],"x":1795,"y":2660,"wires":[]},{"id":"70be94f3.6ccffc","type":"delay","z":"2f811349.94c06c","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1680,"y":2660,"wires":[["59ed82e6.455e9c"]]},{"id":"c76759dc.a14f98","type":"change","z":"2f811349.94c06c","name":"Disable RA","rules":[{"t":"set","p":"payload","pt":"msg","to":"false","tot":"str"},{"t":"set","p":"topic","pt":"msg","to":"remote_access","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1830,"y":2480,"wires":[["ac7534c7.cd1918"]]},{"id":"3c7e5d18.131962","type":"ui_switch","z":"3c3d44e8.9e19ac","name":"Interior Shades","label":"Move Window Shades to \"Interior\" Page","group":"3b0dc7e1.eb63d8","order":11,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"shades_interior","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":780,"y":1360,"wires":[["f5c52882.1a7518"]]},{"id":"d39bb051.31f68","type":"change","z":"3c3d44e8.9e19ac","name":"Set Saved Interior Shades","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.shades_interior = 'true'","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":1360,"wires":[["3c7e5d18.131962"]]},{"id":"d844ce6f.6a65","type":"file in","z":"3c3d44e8.9e19ac","name":"features.json","filename":"/coachproxy/configurator/features.json","format":"utf8","chunk":false,"sendError":false,"x":430,"y":200,"wires":[["18f08627.470afa"]]},{"id":"18f08627.470afa","type":"json","z":"3c3d44e8.9e19ac","name":"","property":"payload","action":"","pretty":false,"x":590,"y":200,"wires":[["36ee8595.24348a"]]},{"id":"36ee8595.24348a","type":"change","z":"3c3d44e8.9e19ac","name":"","rules":[{"t":"set","p":"features","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":200,"wires":[["93e5cb12.2c3548"]]},{"id":"93e5cb12.2c3548","type":"function","z":"3c3d44e8.9e19ac","name":"Year Option List","func":"// Populate the \"Year\" menu with appropriate options based\n// on the features.json file.\n\nlet years = global.get('features');\nyears = Object.keys(years).filter(year => year[0] == 2).reverse();\n\nconst yearmsg = { options: years, payload: null, topic: null };\nconst blankmsg = { options: [], payload: null, topic: null }\n\nreturn [yearmsg, blankmsg];","outputs":2,"noerr":0,"x":980,"y":200,"wires":[["e8d22d9.e7b39d"],["f653d965.b19d78","5d57367e.5f7d68"]]},{"id":"9835b07a.e523","type":"ui_ui_control","z":"3c3d44e8.9e19ac","name":"Update when tab is displayed","x":1150,"y":1460,"wires":[["b4008f2e.05b46"]]},{"id":"725401a.e3583","type":"function","z":"3c3d44e8.9e19ac","name":"Model Option List","func":"// Populate the \"Floor Plan\" menu with appropriate options based\n// on the user's choice of year and model.\n\nconst years = global.get('features');\n\n// User's choice of year\nconst year = flow.get('year');\n\nif (year && years[year]) {\n  const models = Object.keys(years[year]).filter(model => model != '_comment');\n\n  const modelmsg = { options: models, payload: null, topic: null };\n  const blankmsg = { options: [], payload: null, topic: null }\n\n  return [modelmsg, blankmsg];\n}\n","outputs":2,"noerr":0,"x":1210,"y":360,"wires":[["f653d965.b19d78"],["5d57367e.5f7d68"]]},{"id":"5ac4ff8c.4dbbc","type":"function","z":"3c3d44e8.9e19ac","name":"Floor Plan Option List","func":"// Populate the \"Floor Plan\" menu with appropriate options based\n// on the user's choice of year and model.\n\nconst years = global.get('features');\n\n// User's choice of year and model\nconst year = flow.get('year');\nconst model = flow.get('model');\n\nif (year && model && years[year][model]) {\n  const floors = Object.keys(years[year][model]).filter(floor => floor != 'Default');\n\n  const floormsg = { options: floors, payload: null, topic: null };\n\n  return [floormsg];\n}\n","outputs":1,"noerr":0,"x":1220,"y":420,"wires":[["5d57367e.5f7d68"]]},{"id":"f6cfad56.65a89","type":"delay","z":"3c3d44e8.9e19ac","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":290,"y":360,"wires":[["40ee145e.94997c"]]},{"id":"92c7747e.0619b8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":610,"y":2480,"wires":[["b4d29a75.ce46e8"]]},{"id":"9b544bff.1ded98","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":610,"y":2520,"wires":[["57bbb38f.3acf8c"]]},{"id":"bb9eb964.5f6558","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":610,"y":2560,"wires":[["2420242b.69ec4c"]]},{"id":"8664a34d.d61e9","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":610,"y":2600,"wires":[["35cb3e56.531e42"]]},{"id":"2562e80.55fee18","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":610,"y":2640,"wires":[["b7009fda.40157"]]},{"id":"3936b10.3fb4d5","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":60,"wires":[["e8ed82bd.d24f7"]]},{"id":"64a682cb.62e82c","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":100,"wires":[["1de9eccb.e719b3"]]},{"id":"1ea6b8f4.081ea7","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":140,"wires":[["5ca1634.a702c9c"]]},{"id":"5586ba5f.b7f404","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":180,"wires":[["ec758a32.f6c7f8"]]},{"id":"bb5ce5e1.3e28a8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":340,"wires":[["cd289ac2.034228"]]},{"id":"9c4a74e5.846db8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":380,"wires":[["4a9ed38c.bc59cc"]]},{"id":"6484f887.c06f58","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":420,"wires":[["ea61b8db.c502f8"]]},{"id":"eee10e2c.711b5","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":480,"wires":[["9d062e5b.e5df1"]]},{"id":"f5a83eff.a5727","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":520,"wires":[["7dc4ff41.d6bb8"]]},{"id":"a1609b74.b1ebd8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":600,"wires":[["69d93c3b.c90c04"]]},{"id":"4b654640.102ea8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":720,"wires":[["4ba71557.7fc14c"]]},{"id":"27b1399c.417246","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":760,"wires":[["278f1e80.a74c62"]]},{"id":"f5ac0732.faf1d8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":800,"wires":[["2c9912e2.daa8be"]]},{"id":"bd83aedf.806ed","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":1260,"wires":[["4ebf4d98.402484"]]},{"id":"3a333ae4.ff3b26","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":1220,"wires":[["6139d7a6.c3ac68"]]},{"id":"596d45be.61b75c","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":1180,"wires":[["760801ab.bda88"]]},{"id":"e7b2fb09.f1b8d8","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":1020,"wires":[["36b68b28.232da4"]]},{"id":"6c02a1a6.4e7de","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":980,"wires":[["b7e0e8b0.a44158"]]},{"id":"1cb2a52e.e8c1db","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":940,"wires":[["147160bc.806e1f"]]},{"id":"dae6a754.d25058","type":"rbe","z":"de0536ab.6a9728","name":"","func":"rbe","gap":"0.4","start":"","inout":"out","x":3970,"y":900,"wires":[["fbbfeeca.492c4"]]},{"id":"2481cdc6.86d772","type":"rbe","z":"2f811349.94c06c","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1350,"y":2400,"wires":[["c7e0a8dd.cc4708"]]},{"id":"13a7f1dc.6e20ee","type":"throttle","z":"2f811349.94c06c","name":"","throttleType":"time","timeLimit":"1","timeLimitType":"seconds","countLimit":0,"blockSize":0,"locked":false,"x":680,"y":420,"wires":[["c16102db.42112"]]},{"id":"bdb0f315.6ff84","type":"ui_dropdown","z":"2f811349.94c06c","name":"Item Type","label":"","place":"Select item","group":"dbba06fe.896a28","order":2,"width":"3","height":"1","passthru":true,"options":[{"label":"","value":"","type":"str"}],"payload":"","topic":"notif_type","x":2180,"y":780,"wires":[["edf2d8d9.c4f4c8","1df6ffb5.487a8"]]},{"id":"514dc1ff.63da6","type":"ui_dropdown","z":"2f811349.94c06c","name":"Test Type","label":"","place":"Select option","group":"dbba06fe.896a28","order":3,"width":"3","height":"1","passthru":true,"options":[{"label":"","value":"is above","type":"str"},{"label":"","value":"is below","type":"str"}],"payload":"","topic":"notif_test","x":2180,"y":900,"wires":[["edf2d8d9.c4f4c8"]]},{"id":"da859c6d.172c3","type":"ui_text_input","z":"2f811349.94c06c","name":"Value","label":"Value","group":"dbba06fe.896a28","order":4,"width":"2","height":"1","passthru":true,"mode":"text","delay":300,"topic":"notif_value","x":2170,"y":820,"wires":[["edf2d8d9.c4f4c8"]]},{"id":"cebf70f.3af299","type":"ui_button","z":"2f811349.94c06c","name":"Add","group":"dbba06fe.896a28","order":6,"width":"2","height":"1","passthru":false,"label":"Add","color":"","bgcolor":"","icon":"fa-plus","payload":"","payloadType":"str","topic":"","x":2170,"y":940,"wires":[["d37b59d2.d72778"]]},{"id":"8dc01cb7.ce79a","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":5,"width":"2","height":"1","name":"Unit","label":"","format":"{{msg.payload}}","layout":"row-left","x":2170,"y":860,"wires":[]},{"id":"edf2d8d9.c4f4c8","type":"file function","z":"2f811349.94c06c","name":"form_field_save.js","filename":".node-red/js/form_field_save.js","reloadfile":false,"outputs":1,"x":2390,"y":820,"wires":[[]]},{"id":"cd3a135a.44941","type":"link out","z":"2f811349.94c06c","name":"Notification list changed","links":["3c54947a.496c9c"],"x":2815,"y":940,"wires":[]},{"id":"f5bb860.176b578","type":"ui_ui_control","z":"2f811349.94c06c","name":"Tab Selected","x":1650,"y":800,"wires":[["d2a1f421.adda28","e98f6c69.010e4","27d8ea1f.f65846"]]},{"id":"d2a1f421.adda28","type":"change","z":"2f811349.94c06c","name":"Blank","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1970,"y":800,"wires":[["bdb0f315.6ff84","514dc1ff.63da6","da859c6d.172c3"]]},{"id":"e98f6c69.010e4","type":"function","z":"2f811349.94c06c","name":"Notification List","func":"const max_rules = 12;\n\nconst tests = { 'is below': '<', 'is above': '>', 'changes': 'changes' };\nlet notifs = global.get('settings2')['notify_rules'] || [];\n\nnotifs.sort((a,b) => a.notif_type.localeCompare(b.notif_type));\n\nfor (let notif in notifs) {\n    let n = notifs[notif];\n    n.notif_testval = tests[n.notif_test] + ' ' + n.notif_value + n.notif_unit;\n}\n\nreturn [{ payload: notifs }, { enabled: notifs.length < max_rules } ];\n","outputs":2,"noerr":0,"x":1960,"y":1220,"wires":[["e2c421b3.f2848","b2097772.d274e8","8a8c050e.0caf48","38a45819.94b8b8","2dc904bc.436dec","fbf2bb3d.e0f328","f5a40a96.f737d8","3e0d991d.d48406","d300de38.85a91","306b6c25.654324","28ea3b2d.3c2ef4","ae25d411.4a4ba8","1d26a6f5.7ed949","3d1ddb0.6f8e026","f519fa18.1805a8","cafe34ac.4149e8","1933a2b0.73ecad","4f8809a6.1201b8","327306de.6b584a","adbdad1a.49421","a7ec062d.f23588","204cc8c5.942038","a8dedca8.d037d","c3618c61.9eabd"],["cebf70f.3af299"]]},{"id":"e2c421b3.f2848","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":11,"width":"3","height":"1","name":"Type1","label":"{{msg.payload[1].notif_type}}","format":"","layout":"row-left","x":2170,"y":1100,"wires":[]},{"id":"b2097772.d274e8","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":12,"width":"2","height":"1","name":"Test1","label":"{{msg.payload[1].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1100,"wires":[]},{"id":"be4ee9dd.48dfb8","type":"ui_button","z":"2f811349.94c06c","name":"Delete1","group":"dbba06fe.896a28","order":13,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"1","x":2420,"y":1100,"wires":[["b48b80f2.bc7a2"]]},{"id":"8a8c050e.0caf48","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":14,"width":"3","height":"1","name":"Type2","label":"{{msg.payload[2].notif_type}}","format":"","layout":"row-left","x":2170,"y":1140,"wires":[]},{"id":"38a45819.94b8b8","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":15,"width":"2","height":"1","name":"Test2","label":"{{msg.payload[2].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1140,"wires":[]},{"id":"48d5fff6.b321f","type":"ui_button","z":"2f811349.94c06c","name":"Delete2","group":"dbba06fe.896a28","order":16,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"2","x":2420,"y":1140,"wires":[["b48b80f2.bc7a2"]]},{"id":"2dc904bc.436dec","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":17,"width":"3","height":"1","name":"Type3","label":"{{msg.payload[3].notif_type}}","format":"","layout":"row-left","x":2170,"y":1180,"wires":[]},{"id":"fbf2bb3d.e0f328","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":18,"width":"2","height":"1","name":"Test3","label":"{{msg.payload[3].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1180,"wires":[]},{"id":"45208326.f18e7c","type":"ui_button","z":"2f811349.94c06c","name":"Delete3","group":"dbba06fe.896a28","order":19,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"3","x":2420,"y":1180,"wires":[["b48b80f2.bc7a2"]]},{"id":"f5a40a96.f737d8","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":20,"width":"3","height":"1","name":"Type4","label":"{{msg.payload[4].notif_type}}","format":"","layout":"row-left","x":2170,"y":1220,"wires":[]},{"id":"3e0d991d.d48406","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":21,"width":"2","height":"1","name":"Test4","label":"{{msg.payload[4].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1220,"wires":[]},{"id":"f1217475.1fe2c8","type":"ui_button","z":"2f811349.94c06c","name":"Delete4","group":"dbba06fe.896a28","order":22,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"4","x":2420,"y":1220,"wires":[["b48b80f2.bc7a2"]]},{"id":"d300de38.85a91","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":23,"width":"3","height":"1","name":"Type5","label":"{{msg.payload[5].notif_type}}","format":"","layout":"row-left","x":2170,"y":1260,"wires":[]},{"id":"306b6c25.654324","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":24,"width":"2","height":"1","name":"Test5","label":"{{msg.payload[5].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1260,"wires":[]},{"id":"8eb384dc.21db68","type":"ui_button","z":"2f811349.94c06c","name":"Delete5","group":"dbba06fe.896a28","order":25,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"5","x":2420,"y":1260,"wires":[["b48b80f2.bc7a2"]]},{"id":"28ea3b2d.3c2ef4","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":26,"width":"3","height":"1","name":"Type6","label":"{{msg.payload[6].notif_type}}","format":"","layout":"row-left","x":2170,"y":1300,"wires":[]},{"id":"ae25d411.4a4ba8","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":27,"width":"2","height":"1","name":"Test6","label":"{{msg.payload[6].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1300,"wires":[]},{"id":"c94ebe9f.38d71","type":"ui_button","z":"2f811349.94c06c","name":"Delete6","group":"dbba06fe.896a28","order":28,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"6","x":2420,"y":1300,"wires":[["b48b80f2.bc7a2"]]},{"id":"1d26a6f5.7ed949","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":29,"width":"3","height":"1","name":"Type7","label":"{{msg.payload[7].notif_type}}","format":"","layout":"row-left","x":2170,"y":1340,"wires":[]},{"id":"3d1ddb0.6f8e026","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":30,"width":"2","height":"1","name":"Test7","label":"{{msg.payload[7].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1340,"wires":[]},{"id":"c50997b8.38bd88","type":"ui_button","z":"2f811349.94c06c","name":"Delete7","group":"dbba06fe.896a28","order":31,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"7","x":2420,"y":1340,"wires":[["b48b80f2.bc7a2"]]},{"id":"f519fa18.1805a8","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":32,"width":"3","height":"1","name":"Type8","label":"{{msg.payload[8].notif_type}}","format":"","layout":"row-left","x":2170,"y":1380,"wires":[]},{"id":"cafe34ac.4149e8","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":33,"width":"2","height":"1","name":"Test8","label":"{{msg.payload[8].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1380,"wires":[]},{"id":"840b2178.55d4e","type":"ui_button","z":"2f811349.94c06c","name":"Delete8","group":"dbba06fe.896a28","order":34,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"8","x":2420,"y":1380,"wires":[["b48b80f2.bc7a2"]]},{"id":"1933a2b0.73ecad","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":35,"width":"3","height":"1","name":"Type9","label":"{{msg.payload[9].notif_type}}","format":"","layout":"row-left","x":2170,"y":1420,"wires":[]},{"id":"4f8809a6.1201b8","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":36,"width":"2","height":"1","name":"Test9","label":"{{msg.payload[9].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1420,"wires":[]},{"id":"1335c48c.0953cb","type":"ui_button","z":"2f811349.94c06c","name":"Delete9","group":"dbba06fe.896a28","order":37,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"9","x":2420,"y":1420,"wires":[["b48b80f2.bc7a2"]]},{"id":"327306de.6b584a","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":8,"width":"3","height":"1","name":"Type0","label":"{{msg.payload[0].notif_type}}","format":"","layout":"row-left","x":2170,"y":1060,"wires":[]},{"id":"adbdad1a.49421","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":9,"width":"2","height":"1","name":"Test0","label":"{{msg.payload[0].notif_testval}}","format":"","layout":"row-left","x":2290,"y":1060,"wires":[]},{"id":"600eca00.204d18","type":"ui_button","z":"2f811349.94c06c","name":"Delete0","group":"dbba06fe.896a28","order":10,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"0","x":2420,"y":1060,"wires":[["b48b80f2.bc7a2"]]},{"id":"b48b80f2.bc7a2","type":"function","z":"2f811349.94c06c","name":"Delete Notification","func":"// Remove a notification rule, update the settings on disk,\n// and refresh the list.\n\nlet notifs = global.get('settings2')['notify_rules'] || [];\nnotifs.splice(msg.topic, 1);  // This changes in global context\n\nreturn { topic: 'notify_rules', payload: JSON.stringify(notifs) };","outputs":1,"noerr":0,"x":2650,"y":1140,"wires":[["cd3a135a.44941","e98f6c69.010e4"]]},{"id":"b3fb64cf.4893e8","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":7,"width":"0","height":"0","name":"Your notification rules:","label":"","format":"Your notification rules:","layout":"row-center","x":2220,"y":1020,"wires":[]},{"id":"23126449.a1f55c","type":"link in","z":"2f811349.94c06c","name":"Set remote access fields","links":["1a04f183.12f89e"],"x":1755,"y":160,"wires":[["c257f64a.766678","c96e86ca.164fa8","1653121c.6df21e","82bcec.57b0a318","d2fe1901.2fbaa8","cb66b232.6996f","32542058.66bb1"]]},{"id":"c459bea9.9d92e","type":"ui_template","z":"2f811349.94c06c","group":"1c0887fa.626488","name":"Notification Intro","order":1,"width":"","height":"","format":"<div layout=\"column\" layout-align=\"space-between\">\n<p><b>Internet Connection Requirement:</b></p>\n<p>Notifications require an active Internet connection\nconfigured in the 'Join your Wi-Fi' section of the 'System' page.</p>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2200,"y":40,"wires":[[]]},{"id":"c257f64a.766678","type":"change","z":"2f811349.94c06c","name":"settings2.pushover_key","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.pushover_key')","tot":"jsonata"},{"t":"set","p":"form.pushover_key","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":160,"wires":[[]]},{"id":"a3c2e94b.f58248","type":"http request","z":"2f811349.94c06c","name":"Post to Pushover","method":"POST","ret":"txt","url":"https://api.pushover.net/1/messages.json","x":2710,"y":200,"wires":[[]]},{"id":"ac0eb79b.8b2238","type":"function","z":"2f811349.94c06c","name":"Test Notification Message","func":"let message = \"Hi! This is a test notification from CoachProxyOS to Pushover.\\n\\n\";\nmessage = message + \"You can control your notification sounds, quiet hours, and other \";\nmessage = message + \"options in the Pushover app on your phone or tablet.\";\n\nmsg.headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\"\n};\n\nmsg.payload = { \n    user: global.get('settings2')['pushover_key'],\n    token: 'afvtrcguexvtutk7orsc41m1fcw42i',\n    title: 'CoachProxyOS Test Notification',\n    message: message,\n};\n\nreturn msg;","outputs":1,"noerr":0,"x":2470,"y":200,"wires":[["a3c2e94b.f58248"]]},{"id":"3b55b269.f8812e","type":"sqlite","z":"2f811349.94c06c","mydb":"c2b41353.c92fd","name":"CoachProxy","x":890,"y":120,"wires":[["c1359998.0cae08"]]},{"id":"3186df4e.899b5","type":"template","z":"2f811349.94c06c","name":"Load configs","field":"topic","fieldType":"msg","format":"handlebars","syntax":"plain","template":"select * from configs;","output":"str","x":690,"y":120,"wires":[["3b55b269.f8812e"]]},{"id":"c1359998.0cae08","type":"function","z":"2f811349.94c06c","name":"Store configs","func":"for (var i = 0; i < (msg.payload).length; i++) {\n    var key = msg.payload[i].key;\n    var value = msg.payload[i].value;\n    global.set('configs.' + key, value);\n}\n\n// Returning NULL would terminate the flow, but other\n// nodes want to know when settings have been loaded.\nreturn {};","outputs":1,"noerr":0,"x":1070,"y":120,"wires":[[]]},{"id":"21acc1a3.1e515e","type":"ui_template","z":"2f811349.94c06c","group":"dbba06fe.896a28","name":"Notification Rule Info","order":1,"width":"","height":"","format":"<div>\n<p>Create customized rules below to be notified when values change:</p>\n<p>&nbsp;</p>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2220,"y":740,"wires":[[]]},{"id":"801b22c1.83fa4","type":"http request","z":"2f811349.94c06c","name":"Post to Pushover","method":"POST","ret":"txt","url":"https://api.pushover.net/1/messages.json","tls":"","x":2770,"y":1680,"wires":[[]]},{"id":"8d814458.e06e38","type":"mqtt out","z":"2f811349.94c06c","name":"","topic":"GLOBAL/MESSAGE","qos":"","retain":"","broker":"689fc56b.144cec","x":2780,"y":1640,"wires":[]},{"id":"2cf26843.a31df8","type":"json","z":"60515b24.49bab4","name":"","property":"payload","action":"","pretty":false,"x":450,"y":460,"wires":[["2e772274.d6d55e"]]},{"id":"8c17a45b.3d9a38","type":"mqtt in","z":"60515b24.49bab4","name":"","topic":"RVC/DC_SOURCE_STATUS_SPYDER/#","qos":"2","broker":"689fc56b.144cec","x":190,"y":480,"wires":[["2cf26843.a31df8"]]},{"id":"98622a71.770a48","type":"mqtt out","z":"60515b24.49bab4","name":"CP/BATTERY_VOLTS/BatteryName","topic":"","qos":"","retain":"","broker":"689fc56b.144cec","x":900,"y":460,"wires":[]},{"id":"2e772274.d6d55e","type":"function","z":"60515b24.49bab4","name":"decode battery","func":"// Newer coaches send DC_SOURCE_STATUS_SPYDER in addition to the\n// normal DC_SOURCE_STATUS. In these cases, ignore the legacy values.\n\nlet newmsg = {};\n\nconst labels = ['N/A', 'House', 'Chassis', 'House2'];\nnewmsg.topic = 'CP/BATTERY_VOLTS/' + labels[msg.payload.instance];\nnewmsg.payload = msg.payload['dc voltage'];\n\nif ((msg.topic).includes('SPYDER')) {\n    // Remember to only parse _SPYDER messages from now on\n    context.set('use_spyder', true);\n} else {\n    // If _SPYDER messages are used, ignore legacy messages\n    if (context.get('use_spyder')) {\n        newmsg = null;\n    }\n}\n\nmsg.topic = null;  // Overwrite incoming msg topic\nreturn newmsg;\n","outputs":1,"noerr":0,"x":620,"y":460,"wires":[["98622a71.770a48"]]},{"id":"a965663f.370508","type":"mqtt in","z":"60515b24.49bab4","name":"","topic":"RVC/DC_SOURCE_STATUS/#","qos":"2","broker":"689fc56b.144cec","x":220,"y":440,"wires":[["2cf26843.a31df8"]]},{"id":"9b310238.aadaa","type":"mqtt in","z":"60515b24.49bab4","name":"","topic":"RVC/THERMOSTAT_AMBIENT_STATUS/#","qos":"0","broker":"689fc56b.144cec","x":200,"y":600,"wires":[["abfd2f33.a6a74"]]},{"id":"abfd2f33.a6a74","type":"json","z":"60515b24.49bab4","name":"","x":450,"y":600,"wires":[["6a5696b5.caf148"]]},{"id":"6a5696b5.caf148","type":"function","z":"60515b24.49bab4","name":"decode ambient temp","func":"const first_zone = global.get('settings2').tstat_first_zone || 0;\nconst zone_names = {\n  0: 'Front',\n  1: 'Mid',\n  2: 'Rear',\n  4: 'Wet Bay',\n  5: 'Generator Bay'\n};\n\nconst zone = parseInt(msg.payload.instance) - first_zone;\n\nlet newmsg = {};\nif (zone in zone_names) {\n  newmsg.topic = 'CP/THERMISTOR_TEMP/' + zone_names[zone];\n  newmsg.payload = msg.payload['ambient temp F'];\n\n  return newmsg;\n}\n","outputs":1,"noerr":0,"x":640,"y":600,"wires":[["c84aa813.fa9808"]]},{"id":"c84aa813.fa9808","type":"mqtt out","z":"60515b24.49bab4","name":"CP/THERMISTOR_TEMP/ZoneName","topic":"","qos":"","retain":"","broker":"689fc56b.144cec","x":930,"y":600,"wires":[]},{"id":"e01d4e84.2224e","type":"comment","z":"60515b24.49bab4","name":"Republish battery status in simple form","info":"","x":190,"y":400,"wires":[]},{"id":"27d8ea1f.f65846","type":"file function","z":"2f811349.94c06c","name":"notification_menu_options.js","filename":".node-red/js/notification_menu_options.js","reloadfile":false,"outputs":1,"x":1920,"y":760,"wires":[["bdb0f315.6ff84"]]},{"id":"1df6ffb5.487a8","type":"file function","z":"2f811349.94c06c","name":"notification_submenu_options.js","filename":".node-red/js/notification_submenu_options.js","reloadfile":false,"outputs":3,"x":1910,"y":860,"wires":[["da859c6d.172c3"],["8dc01cb7.ce79a","edf2d8d9.c4f4c8"],["514dc1ff.63da6"]]},{"id":"d37b59d2.d72778","type":"file function","z":"2f811349.94c06c","name":"notification_save.js","filename":".node-red/js/notification_save.js","reloadfile":false,"outputs":1,"x":2390,"y":940,"wires":[["cd3a135a.44941","e98f6c69.010e4"]]},{"id":"916d86c0.2f21c8","type":"link out","z":"2f811349.94c06c","name":"Notification list changed","links":["3c54947a.496c9c"],"x":2635,"y":500,"wires":[]},{"id":"204cc8c5.942038","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":38,"width":"3","height":"1","name":"Type10","label":"{{msg.payload[10].notif_type}}","format":"","layout":"row-left","x":2180,"y":1460,"wires":[]},{"id":"a7ec062d.f23588","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":39,"width":"2","height":"1","name":"Test10","label":"{{msg.payload[10].notif_testval}}","format":"","layout":"row-left","x":2310,"y":1460,"wires":[]},{"id":"5b0e2fba.02372","type":"ui_button","z":"2f811349.94c06c","name":"Delete10","group":"dbba06fe.896a28","order":40,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"10","x":2440,"y":1460,"wires":[["b48b80f2.bc7a2"]]},{"id":"a8dedca8.d037d","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":41,"width":"3","height":"1","name":"Type11","label":"{{msg.payload[11].notif_type}}","format":"","layout":"row-left","x":2180,"y":1500,"wires":[]},{"id":"c3618c61.9eabd","type":"ui_text","z":"2f811349.94c06c","group":"dbba06fe.896a28","order":42,"width":"2","height":"1","name":"Test11","label":"{{msg.payload[11].notif_testval}}","format":"","layout":"row-left","x":2310,"y":1500,"wires":[]},{"id":"41d90e0.41ce5f4","type":"ui_button","z":"2f811349.94c06c","name":"Delete11","group":"dbba06fe.896a28","order":43,"width":"1","height":"1","passthru":false,"label":"","color":"#8D0000","bgcolor":"#ffffff","icon":"fa-trash fa-lg","payload":"delete","payloadType":"str","topic":"11","x":2440,"y":1500,"wires":[["b48b80f2.bc7a2"]]},{"id":"cc67be16.6b1a6","type":"change","z":"60515b24.49bab4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload['status definition']","tot":"msg"},{"t":"set","p":"status.power.generator_state","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":320,"wires":[["d723afe5.5b2be","7a6d4ed5.1be7a"]]},{"id":"d46cb838.597938","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"CP/TANK_STATUS/#","qos":"2","broker":"689fc56b.144cec","x":1990,"y":1580,"wires":[["bf811f59.102fb"]]},{"id":"b066e951.2b5fa8","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"CP/IGNITION","qos":"2","broker":"689fc56b.144cec","x":2010,"y":1720,"wires":[["4e766c30.408534"]]},{"id":"b2b1bfad.c5081","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"CP/PARKBRAKE","qos":"2","broker":"689fc56b.144cec","x":2000,"y":1760,"wires":[["4e766c30.408534"]]},{"id":"a1577147.5ef68","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"CP/GENERATOR","qos":"2","broker":"689fc56b.144cec","x":2000,"y":1800,"wires":[["4e766c30.408534"]]},{"id":"bf811f59.102fb","type":"file function","z":"2f811349.94c06c","name":"notification_value_monitor.js","filename":".node-red/js/notification_value_monitor.js","reloadfile":false,"outputs":1,"x":2260,"y":1620,"wires":[["6f252ae4.777244"]]},{"id":"6f252ae4.777244","type":"file function","z":"2f811349.94c06c","name":"notification_deliver.js","filename":".node-red/js/notification_deliver.js","reloadfile":false,"outputs":3,"x":2540,"y":1680,"wires":[["8d814458.e06e38"],[],["1a043684.2b3ee9"]]},{"id":"369417cd.2a0058","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"CP/THERMISTOR_TEMP/#","qos":"2","broker":"689fc56b.144cec","x":1970,"y":1620,"wires":[["bf811f59.102fb"]]},{"id":"4e766c30.408534","type":"file function","z":"2f811349.94c06c","name":"notification_state_monitor.js","filename":".node-red/js/notification_state_monitor.js","reloadfile":false,"outputs":1,"x":2260,"y":1760,"wires":[["6f252ae4.777244"]]},{"id":"a5719dbb.8242d","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"CP/BATTERY_VOLTS/#","qos":"2","broker":"689fc56b.144cec","x":1980,"y":1660,"wires":[["bf811f59.102fb"]]},{"id":"1ee1dfec.add5c","type":"comment","z":"60515b24.49bab4","name":"Republish thermister status in simple form","info":"","x":200,"y":560,"wires":[]},{"id":"96d3c25a.f0e7c","type":"mqtt in","z":"2f811349.94c06c","name":"","topic":"CP/AC_SOURCE","qos":"2","broker":"689fc56b.144cec","x":2000,"y":1840,"wires":[["4e766c30.408534"]]},{"id":"d90484a2.94b5c8","type":"mqtt in","z":"60515b24.49bab4","name":"","topic":"RVC/ATS_AC_STATUS_1/#","qos":"2","broker":"689fc56b.144cec","x":150,"y":720,"wires":[["4138f81e.9df978"]]},{"id":"4138f81e.9df978","type":"json","z":"60515b24.49bab4","name":"","x":450,"y":720,"wires":[["763347dc.a8bb88"]]},{"id":"763347dc.a8bb88","type":"function","z":"60515b24.49bab4","name":"decode power status","func":"// Output 1: name of current ATS power source\n\nconst genset_status = global.get('status').power.generator_state || 'stopped';\n\n// If the rmsc value is not numeric (e.g. 'n/a'), then\n// the ATS is not receiving any external power.\nif (isNaN(parseFloat(msg.payload['rms current']))) {\n    msg.payload = 'None';\n} else if (genset_status == 'running') {\n    msg.payload = 'Generator';\n} else {\n    msg.payload = 'Shore';\n}\n\nglobal.set('status.power.ac_source', msg.payload);\n\nmsg.type = 'acsource';\nreturn msg;\n","outputs":1,"noerr":0,"x":640,"y":720,"wires":[["7f7eb491.6aa2dc"]]},{"id":"7f7eb491.6aa2dc","type":"mqtt out","z":"60515b24.49bab4","name":"","topic":"CP/AC_SOURCE","qos":"","retain":"","broker":"689fc56b.144cec","x":870,"y":720,"wires":[]},{"id":"d2ffbbb7.9198c8","type":"comment","z":"60515b24.49bab4","name":"Republish shore power status in simple form","info":"","x":210,"y":680,"wires":[]},{"id":"c96e86ca.164fa8","type":"change","z":"2f811349.94c06c","name":"settings2.notify_email1","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.notify_email1')","tot":"jsonata"},{"t":"set","p":"form.notify_email1","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1940,"y":300,"wires":[["be90f6c3.9b8a18"]]},{"id":"1653121c.6df21e","type":"change","z":"2f811349.94c06c","name":"settings2.notify_email2","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.notify_email2')","tot":"jsonata"},{"t":"set","p":"form.notify_email2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1940,"y":340,"wires":[["d12824f4.060098"]]},{"id":"be90f6c3.9b8a18","type":"ui_text_input","z":"2f811349.94c06c","name":"Email Address 1","label":"Email Address 1","group":"b16ae0ed.fe998","order":2,"width":"","height":"","passthru":true,"mode":"email","delay":"300","topic":"notify_email1","x":2200,"y":300,"wires":[["8c95359e.3879c8"]]},{"id":"d12824f4.060098","type":"ui_text_input","z":"2f811349.94c06c","name":"Email Address 2","label":"Email Address 2","group":"b16ae0ed.fe998","order":3,"width":"","height":"","passthru":true,"mode":"email","delay":"300","topic":"notify_email2","x":2200,"y":340,"wires":[["8c95359e.3879c8"]]},{"id":"2deb4e85.796b62","type":"ui_button","z":"2f811349.94c06c","name":"","group":"b16ae0ed.fe998","order":4,"width":"3","height":"1","label":"Save","color":"","icon":"fa-check","payload":"save","payloadType":"str","topic":"commit","x":2170,"y":380,"wires":[["2daabbb9.f05684"]]},{"id":"3fc76509.5b2a3a","type":"ui_button","z":"2f811349.94c06c","name":"","group":"b16ae0ed.fe998","order":5,"width":"3","height":"1","label":"Undo","color":"","icon":"fa-times","payload":"undo","payloadType":"str","topic":"commit","x":1710,"y":320,"wires":[["c96e86ca.164fa8","1653121c.6df21e"]]},{"id":"7db0f636.551ed8","type":"ui_template","z":"2f811349.94c06c","group":"b16ae0ed.fe998","name":"Email Info","order":1,"width":"6","height":"2","format":"<div layout=\"column\" layout-align=\"space-between\">\n<p><b>E-mail Notification Setup:</b></p>\n<p>Enter up to two addresses to deliver notifications to:</p>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2180,"y":260,"wires":[[]]},{"id":"8c95359e.3879c8","type":"file function","z":"2f811349.94c06c","name":"form_field_save.js","filename":".node-red/js/form_field_save.js","reloadfile":false,"outputs":1,"x":2450,"y":320,"wires":[[]]},{"id":"2daabbb9.f05684","type":"function","z":"2f811349.94c06c","name":"Save Email Settings","func":"const topics = ['notify_email1', 'notify_email2'];\nvar msgs = [];\n\ntopics.forEach(function(topic) {\n  const value = global.get('form')[topic] || '';\n  const newmsg = { topic: topic, payload: value };\n  msgs.push(newmsg);\n});\n\nreturn [ msgs ];\n","outputs":1,"noerr":0,"x":2460,"y":380,"wires":[["916d86c0.2f21c8"]]},{"id":"db3ae2f4.2f3da","type":"comment","z":"2f811349.94c06c","name":"INSERT PUSHOVER NODES HERE","info":"","x":2240,"y":160,"wires":[]},{"id":"cb1c8e7b.4e3c","type":"mqtt out","z":"60515b24.49bab4","name":"","topic":"CP/GENERATOR_STATUS","qos":"","retain":"","broker":"689fc56b.144cec","x":940,"y":360,"wires":[]},{"id":"7a6d4ed5.1be7a","type":"change","z":"60515b24.49bab4","name":"Generator Status with Timestamp","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload & \",\" & ($floor($millis() / 1000))","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":640,"y":360,"wires":[["cb1c8e7b.4e3c"]]},{"id":"7a8ef598.844c3c","type":"ui_text","z":"de0536ab.6a9728","group":"ff64ed84.f36a8","order":3,"width":"6","height":"1","name":"Awning Status","label":"","format":"{{msg.payload}}","layout":"row-center","x":3760,"y":2960,"wires":[]},{"id":"bf68e97f.573bb8","type":"change","z":"de0536ab.6a9728","name":"","rules":[{"t":"set","p":"duration","pt":"msg","to":"$substringAfter(payload, \"duration=\")","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":3770,"y":2840,"wires":[["2f2911d6.6fb6ae"]]},{"id":"2f2911d6.6fb6ae","type":"function","z":"de0536ab.6a9728","name":"Countdown Message","func":"let duration = msg.duration;\n\nif (msg.duration >= 0) {\n    if (msg.duration === 0) {\n        msg.payload = '';\n    } else {\n        msg.payload = \"Awning active for \" + duration + \" sec.\";\n    }\n\n    msg.duration--;\n\n    return msg;\n}","outputs":1,"noerr":0,"x":3760,"y":2880,"wires":[["7a8ef598.844c3c","27d34f6f.fe2c8"]]},{"id":"27d34f6f.fe2c8","type":"delay","z":"de0536ab.6a9728","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":3760,"y":2920,"wires":[["2f2911d6.6fb6ae"]]},{"id":"52fdd0b4.bc172","type":"ui_template","z":"3c3d44e8.9e19ac","group":"9143b49.e301448","name":"Copyright","order":3,"width":"6","height":"4","format":"<div layout='column' layout-align='space-between'>\n  <p>CoachProxyOS © 2019</p>\n  <p>CoachProxyOS comes with ABSOLUTELY NO WARRANTY.\n  This is free software, and you are welcome to redistribute it\n  under certain conditions.</p>\n  <p>See <a href=\"https://www.gnu.org/licenses/gpl-3.0.html\">https://www.gnu.org/licenses/gpl-3.0.html</a>\n  for complete details.</p>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":700,"y":80,"wires":[[]]},{"id":"82bcec.57b0a318","type":"change","z":"2f811349.94c06c","name":"settings2.smtp_host","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.smtp_host')","tot":"jsonata"},{"t":"set","p":"form.smtp_host","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1940,"y":480,"wires":[["29d5afa2.a4acf"]]},{"id":"d2fe1901.2fbaa8","type":"change","z":"2f811349.94c06c","name":"settings2.smtp_port","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.smtp_port')","tot":"jsonata"},{"t":"set","p":"form.smtp_port","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1940,"y":520,"wires":[["641be3c.7a3641c"]]},{"id":"cb66b232.6996f","type":"change","z":"2f811349.94c06c","name":"settings2.smtp_user","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.smtp_user')","tot":"jsonata"},{"t":"set","p":"form.smtp_user","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1940,"y":560,"wires":[["84ecd59b.640a08"]]},{"id":"32542058.66bb1","type":"change","z":"2f811349.94c06c","name":"settings2.smtp_password","rules":[{"t":"set","p":"payload","pt":"msg","to":"$globalContext('settings2.smtp_password')","tot":"jsonata"},{"t":"set","p":"form.smtp_password","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1950,"y":600,"wires":[["8da1506a.14f69"]]},{"id":"29d5afa2.a4acf","type":"ui_text_input","z":"2f811349.94c06c","name":"SMTP Server","label":"SMTP Server Name","tooltip":"e.g. smtp.gmail.com","group":"b15b6e12.9a77a","order":2,"width":"","height":"","passthru":true,"mode":"text","delay":"300","topic":"smtp_host","x":2190,"y":480,"wires":[["2ab50648.c6595a"]]},{"id":"641be3c.7a3641c","type":"ui_text_input","z":"2f811349.94c06c","name":"SMTP Port","label":"SMTP Server Port","tooltip":"e.g. 587","group":"b15b6e12.9a77a","order":3,"width":"","height":"","passthru":true,"mode":"text","delay":"300","topic":"smtp_port","x":2190,"y":520,"wires":[["2ab50648.c6595a"]]},{"id":"740418b7.ac39a8","type":"ui_button","z":"2f811349.94c06c","name":"","group":"b15b6e12.9a77a","order":6,"width":"3","height":"1","label":"Save","color":"","icon":"fa-check","payload":"save","payloadType":"str","topic":"commit","x":2170,"y":640,"wires":[["a9fa421e.32952"]]},{"id":"3d9c92a0.747dbe","type":"ui_template","z":"2f811349.94c06c","group":"b15b6e12.9a77a","name":"SMTP Info","order":1,"width":"6","height":"2","format":"<div layout=\"column\" layout-align=\"space-between\">\n<p><b>E-mail Server Setup:</b></p>\n<p>Enter your E-mail SMTP Server information:</p>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":2190,"y":440,"wires":[[]]},{"id":"84ecd59b.640a08","type":"ui_text_input","z":"2f811349.94c06c","name":"SMTP Username","label":"SMTP Username","tooltip":"","group":"b15b6e12.9a77a","order":4,"width":"","height":"","passthru":true,"mode":"text","delay":"300","topic":"smtp_user","x":2210,"y":560,"wires":[["2ab50648.c6595a"]]},{"id":"8da1506a.14f69","type":"ui_text_input","z":"2f811349.94c06c","name":"SMTP Password","label":"SMTP Password","tooltip":"","group":"b15b6e12.9a77a","order":5,"width":"","height":"","passthru":true,"mode":"text","delay":"300","topic":"smtp_password","x":2210,"y":600,"wires":[["2ab50648.c6595a"]]},{"id":"2ab50648.c6595a","type":"file function","z":"2f811349.94c06c","name":"form_field_save.js","filename":".node-red/js/form_field_save.js","reloadfile":false,"outputs":1,"x":2450,"y":540,"wires":[[]]},{"id":"a9fa421e.32952","type":"function","z":"2f811349.94c06c","name":"Save SMTP Settings","func":"const topics = ['smtp_host', 'smtp_port', 'smtp_user', 'smtp_password'];\nvar msgs = [];\n\ntopics.forEach(function(topic) {\n  const value = global.get('form')[topic] || '';\n  const newmsg = { topic: topic, payload: value };\n  msgs.push(newmsg);\n});\n\nreturn [ msgs ];\n","outputs":1,"noerr":0,"x":2460,"y":640,"wires":[["916d86c0.2f21c8"]]},{"id":"f25cf8e2.359d68","type":"ui_button","z":"2f811349.94c06c","name":"","group":"b15b6e12.9a77a","order":7,"width":"3","height":"1","label":"Undo","color":"","icon":"fa-times","payload":"undo","payloadType":"str","topic":"commit","x":1670,"y":540,"wires":[["82bcec.57b0a318","d2fe1901.2fbaa8","cb66b232.6996f","32542058.66bb1"]]},{"id":"1a043684.2b3ee9","type":"simple-sendmail","z":"2f811349.94c06c","name":"simple sendmail","x":2760,"y":1720,"wires":[["812bf2d3.65654"]]},{"id":"812bf2d3.65654","type":"ui_text","z":"2f811349.94c06c","group":"1c0887fa.626488","order":0,"width":"6","height":"1","name":"Mail Notification Status","label":"Succeeded: {{msg.payload.accepted.length}}","format":"","layout":"col-center","x":3010,"y":1720,"wires":[]},{"id":"5b1e73e.372bc8c","type":"ui_button","z":"2f811349.94c06c","name":"","group":"1c0887fa.626488","order":2,"width":"6","height":"1","passthru":false,"label":"Send Test Message","tooltip":"","color":"","bgcolor":"green","icon":"fa-envelope-o","payload":"test","payloadType":"str","topic":"commit","x":1990,"y":1900,"wires":[["741f65e1.96451c"]]},{"id":"741f65e1.96451c","type":"change","z":"2f811349.94c06c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"This is a test notification from CoachProxyOS","tot":"str"},{"t":"set","p":"subject","pt":"msg","to":"CoachProxyOS Alert!","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2300,"y":1900,"wires":[["a5c60fa9.2ba56","6f252ae4.777244"]]},{"id":"a5c60fa9.2ba56","type":"change","z":"2f811349.94c06c","name":"Clear output","rules":[{"t":"set","p":"payload","pt":"msg","to":"{'accepted': []}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":2510,"y":1900,"wires":[["812bf2d3.65654"]]},{"id":"93796841.9239b8","type":"function","z":"de0536ab.6a9728","name":"reset switch","func":"if (msg.payload == \"Controls disabled\")\n    return { payload: 0 };\nelse\n    return { payload: 1 };","outputs":1,"noerr":0,"x":810,"y":4340,"wires":[["5514d0db.9c3f3"]]}]